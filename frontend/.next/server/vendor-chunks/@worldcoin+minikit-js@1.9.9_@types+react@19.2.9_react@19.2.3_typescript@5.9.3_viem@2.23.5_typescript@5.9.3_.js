"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@worldcoin+minikit-js@1.9.9_@types+react@19.2.9_react@19.2.3_typescript@5.9.3_viem@2.23.5_typescript@5.9.3_";
exports.ids = ["vendor-chunks/@worldcoin+minikit-js@1.9.9_@types+react@19.2.9_react@19.2.3_typescript@5.9.3_viem@2.23.5_typescript@5.9.3_"];
exports.modules = {

/***/ "(rsc)/./node_modules/.pnpm/@worldcoin+minikit-js@1.9.9_@types+react@19.2.9_react@19.2.3_typescript@5.9.3_viem@2.23.5_typescript@5.9.3_/node_modules/@worldcoin/minikit-js/build/chunk-VWX7SELF.js":
/*!***************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@worldcoin+minikit-js@1.9.9_@types+react@19.2.9_react@19.2.3_typescript@5.9.3_viem@2.23.5_typescript@5.9.3_/node_modules/@worldcoin/minikit-js/build/chunk-VWX7SELF.js ***!
  \***************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AppErrorCodes: () => (/* reexport safe */ _worldcoin_idkit_core__WEBPACK_IMPORTED_MODULE_0__.AppErrorCodes),\n/* harmony export */   ChatErrorCodes: () => (/* binding */ ChatErrorCodes),\n/* harmony export */   ChatErrorMessage: () => (/* binding */ ChatErrorMessage),\n/* harmony export */   Command: () => (/* binding */ Command),\n/* harmony export */   GetPermissionsErrorCodes: () => (/* binding */ GetPermissionsErrorCodes),\n/* harmony export */   GetPermissionsErrorMessage: () => (/* binding */ GetPermissionsErrorMessage),\n/* harmony export */   MicrophoneErrorCodes: () => (/* binding */ MicrophoneErrorCodes),\n/* harmony export */   MicrophoneErrorMessage: () => (/* binding */ MicrophoneErrorMessage),\n/* harmony export */   MiniAppLaunchLocation: () => (/* binding */ MiniAppLaunchLocation),\n/* harmony export */   MiniKit: () => (/* binding */ MiniKit),\n/* harmony export */   MiniKitInstallErrorCodes: () => (/* binding */ MiniKitInstallErrorCodes),\n/* harmony export */   MiniKitInstallErrorMessage: () => (/* binding */ MiniKitInstallErrorMessage),\n/* harmony export */   Network: () => (/* binding */ Network),\n/* harmony export */   PaymentErrorCodes: () => (/* binding */ PaymentErrorCodes),\n/* harmony export */   PaymentErrorMessage: () => (/* binding */ PaymentErrorMessage),\n/* harmony export */   PaymentValidationErrors: () => (/* binding */ PaymentValidationErrors),\n/* harmony export */   Permission: () => (/* binding */ Permission),\n/* harmony export */   RequestPermissionErrorCodes: () => (/* binding */ RequestPermissionErrorCodes),\n/* harmony export */   RequestPermissionErrorMessage: () => (/* binding */ RequestPermissionErrorMessage),\n/* harmony export */   ResponseEvent: () => (/* binding */ ResponseEvent),\n/* harmony export */   SendHapticFeedbackErrorCodes: () => (/* binding */ SendHapticFeedbackErrorCodes),\n/* harmony export */   SendHapticFeedbackErrorMessage: () => (/* binding */ SendHapticFeedbackErrorMessage),\n/* harmony export */   SendTransactionErrorCodes: () => (/* binding */ SendTransactionErrorCodes),\n/* harmony export */   SendTransactionErrorMessage: () => (/* binding */ SendTransactionErrorMessage),\n/* harmony export */   ShareContactsErrorCodes: () => (/* binding */ ShareContactsErrorCodes),\n/* harmony export */   ShareContactsErrorMessage: () => (/* binding */ ShareContactsErrorMessage),\n/* harmony export */   ShareFilesErrorCodes: () => (/* binding */ ShareFilesErrorCodes),\n/* harmony export */   ShareFilesErrorMessage: () => (/* binding */ ShareFilesErrorMessage),\n/* harmony export */   SignMessageErrorCodes: () => (/* binding */ SignMessageErrorCodes),\n/* harmony export */   SignMessageErrorMessage: () => (/* binding */ SignMessageErrorMessage),\n/* harmony export */   SignTypedDataErrorCodes: () => (/* binding */ SignTypedDataErrorCodes),\n/* harmony export */   SignTypedDataErrorMessage: () => (/* binding */ SignTypedDataErrorMessage),\n/* harmony export */   TokenDecimals: () => (/* binding */ TokenDecimals),\n/* harmony export */   Tokens: () => (/* binding */ Tokens),\n/* harmony export */   VerificationErrorMessage: () => (/* binding */ VerificationErrorMessage),\n/* harmony export */   WalletAuthErrorCodes: () => (/* binding */ WalletAuthErrorCodes),\n/* harmony export */   WalletAuthErrorMessage: () => (/* binding */ WalletAuthErrorMessage),\n/* harmony export */   mapWorldAppLaunchLocation: () => (/* binding */ mapWorldAppLaunchLocation),\n/* harmony export */   parseSiweMessage: () => (/* binding */ parseSiweMessage),\n/* harmony export */   tokenToDecimals: () => (/* binding */ tokenToDecimals),\n/* harmony export */   verifySiweMessage: () => (/* binding */ verifySiweMessage)\n/* harmony export */ });\n/* harmony import */ var _worldcoin_idkit_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @worldcoin/idkit-core */ \"(rsc)/./node_modules/.pnpm/@worldcoin+idkit-core@2.1.0_@types+react@19.2.9_react@19.2.3_typescript@5.9.3/node_modules/@worldcoin/idkit-core/build/index.js\");\n/* harmony import */ var viem__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! viem */ \"(rsc)/./node_modules/.pnpm/viem@2.23.5_typescript@5.9.3/node_modules/viem/_esm/clients/createPublicClient.js\");\n/* harmony import */ var viem__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! viem */ \"(rsc)/./node_modules/.pnpm/viem@2.23.5_typescript@5.9.3/node_modules/viem/_esm/clients/transports/http.js\");\n/* harmony import */ var viem__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! viem */ \"(rsc)/./node_modules/.pnpm/viem@2.23.5_typescript@5.9.3/node_modules/viem/_esm/utils/signature/hashMessage.js\");\n/* harmony import */ var viem__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! viem */ \"(rsc)/./node_modules/.pnpm/viem@2.23.5_typescript@5.9.3/node_modules/viem/_esm/actions/getContract.js\");\n/* harmony import */ var viem__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! viem */ \"(rsc)/./node_modules/.pnpm/viem@2.23.5_typescript@5.9.3/node_modules/viem/_esm/utils/signature/recoverAddress.js\");\n/* harmony import */ var viem_chains__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! viem/chains */ \"(rsc)/./node_modules/.pnpm/viem@2.23.5_typescript@5.9.3/node_modules/viem/_esm/chains/definitions/worldchain.js\");\n/* harmony import */ var _worldcoin_idkit_core_hashing__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @worldcoin/idkit-core/hashing */ \"(rsc)/./node_modules/.pnpm/@worldcoin+idkit-core@2.1.0_@types+react@19.2.9_react@19.2.3_typescript@5.9.3/node_modules/@worldcoin/idkit-core/build/lib/hashing.js\");\n/* harmony import */ var viem__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! viem */ \"(rsc)/./node_modules/.pnpm/viem@2.23.5_typescript@5.9.3/node_modules/viem/_esm/utils/abi/decodeAbiParameters.js\");\n/* harmony import */ var viem__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! viem */ \"(rsc)/./node_modules/.pnpm/viem@2.23.5_typescript@5.9.3/node_modules/viem/_esm/utils/abi/encodeAbiParameters.js\");\n// types/errors.ts\n\n\nvar VerificationErrorMessage = {\n  [_worldcoin_idkit_core__WEBPACK_IMPORTED_MODULE_0__.AppErrorCodes.VerificationRejected]: \"You've cancelled the request in World App.\",\n  [_worldcoin_idkit_core__WEBPACK_IMPORTED_MODULE_0__.AppErrorCodes.MaxVerificationsReached]: \"You have already verified the maximum number of times for this action.\",\n  [_worldcoin_idkit_core__WEBPACK_IMPORTED_MODULE_0__.AppErrorCodes.CredentialUnavailable]: \"It seems you do not have the verification level required by this app.\",\n  [_worldcoin_idkit_core__WEBPACK_IMPORTED_MODULE_0__.AppErrorCodes.MalformedRequest]: \"There was a problem with this request. Please try again or contact the app owner.\",\n  [_worldcoin_idkit_core__WEBPACK_IMPORTED_MODULE_0__.AppErrorCodes.InvalidNetwork]: \"Invalid network. If you are the app owner, visit docs.worldcoin.org/test for details.\",\n  [_worldcoin_idkit_core__WEBPACK_IMPORTED_MODULE_0__.AppErrorCodes.InclusionProofFailed]: \"There was an issue fetching your credential. Please try again.\",\n  [_worldcoin_idkit_core__WEBPACK_IMPORTED_MODULE_0__.AppErrorCodes.InclusionProofPending]: \"Your identity is still being registered. Please wait a few minutes and try again.\",\n  [_worldcoin_idkit_core__WEBPACK_IMPORTED_MODULE_0__.AppErrorCodes.UnexpectedResponse]: \"Unexpected response from your wallet. Please try again.\",\n  [_worldcoin_idkit_core__WEBPACK_IMPORTED_MODULE_0__.AppErrorCodes.FailedByHostApp]: \"Verification failed by the app. Please contact the app owner for details.\",\n  [_worldcoin_idkit_core__WEBPACK_IMPORTED_MODULE_0__.AppErrorCodes.GenericError]: \"Something unexpected went wrong. Please try again.\",\n  [_worldcoin_idkit_core__WEBPACK_IMPORTED_MODULE_0__.AppErrorCodes.ConnectionFailed]: \"Connection to your wallet failed. Please try again.\"\n};\nvar PaymentErrorCodes = /* @__PURE__ */ ((PaymentErrorCodes2) => {\n  PaymentErrorCodes2[\"InputError\"] = \"input_error\";\n  PaymentErrorCodes2[\"UserRejected\"] = \"user_rejected\";\n  PaymentErrorCodes2[\"PaymentRejected\"] = \"payment_rejected\";\n  PaymentErrorCodes2[\"InvalidReceiver\"] = \"invalid_receiver\";\n  PaymentErrorCodes2[\"InsufficientBalance\"] = \"insufficient_balance\";\n  PaymentErrorCodes2[\"TransactionFailed\"] = \"transaction_failed\";\n  PaymentErrorCodes2[\"GenericError\"] = \"generic_error\";\n  PaymentErrorCodes2[\"UserBlocked\"] = \"user_blocked\";\n  return PaymentErrorCodes2;\n})(PaymentErrorCodes || {});\nvar PaymentErrorMessage = {\n  [\"input_error\" /* InputError */]: \"There was a problem with this request. Please try again or contact the app owner.\",\n  [\"user_rejected\" /* UserRejected */]: \"You have cancelled the payment in World App.\",\n  [\"payment_rejected\" /* PaymentRejected */]: \"You've cancelled the payment in World App.\",\n  [\"invalid_receiver\" /* InvalidReceiver */]: \"The receiver address is invalid. Please contact the app owner.\",\n  [\"insufficient_balance\" /* InsufficientBalance */]: \"You do not have enough balance to complete this transaction.\",\n  [\"transaction_failed\" /* TransactionFailed */]: \"The transaction failed. Please try again.\",\n  [\"generic_error\" /* GenericError */]: \"Something unexpected went wrong. Please try again.\",\n  [\"user_blocked\" /* UserBlocked */]: \"User's region is blocked from making payments.\"\n};\nvar PaymentValidationErrors = /* @__PURE__ */ ((PaymentValidationErrors2) => {\n  PaymentValidationErrors2[\"MalformedRequest\"] = \"There was a problem with this request. Please try again or contact the app owner.\";\n  PaymentValidationErrors2[\"InvalidTokenAddress\"] = \"The token address is invalid. Please contact the app owner.\";\n  PaymentValidationErrors2[\"InvalidAppId\"] = \"The app ID is invalid. Please contact the app owner.\";\n  PaymentValidationErrors2[\"DuplicateReference\"] = \"This reference ID already exists please generate a new one and try again.\";\n  return PaymentValidationErrors2;\n})(PaymentValidationErrors || {});\nvar WalletAuthErrorCodes = /* @__PURE__ */ ((WalletAuthErrorCodes2) => {\n  WalletAuthErrorCodes2[\"MalformedRequest\"] = \"malformed_request\";\n  WalletAuthErrorCodes2[\"UserRejected\"] = \"user_rejected\";\n  WalletAuthErrorCodes2[\"GenericError\"] = \"generic_error\";\n  return WalletAuthErrorCodes2;\n})(WalletAuthErrorCodes || {});\nvar WalletAuthErrorMessage = {\n  [\"malformed_request\" /* MalformedRequest */]: \"Provided parameters in the request are invalid.\",\n  [\"user_rejected\" /* UserRejected */]: \"User rejected the request.\",\n  [\"generic_error\" /* GenericError */]: \"Something unexpected went wrong.\"\n};\nvar SendTransactionErrorCodes = /* @__PURE__ */ ((SendTransactionErrorCodes2) => {\n  SendTransactionErrorCodes2[\"InvalidOperation\"] = \"invalid_operation\";\n  SendTransactionErrorCodes2[\"UserRejected\"] = \"user_rejected\";\n  SendTransactionErrorCodes2[\"InputError\"] = \"input_error\";\n  SendTransactionErrorCodes2[\"SimulationFailed\"] = \"simulation_failed\";\n  SendTransactionErrorCodes2[\"TransactionFailed\"] = \"transaction_failed\";\n  SendTransactionErrorCodes2[\"GenericError\"] = \"generic_error\";\n  SendTransactionErrorCodes2[\"DisallowedOperation\"] = \"disallowed_operation\";\n  SendTransactionErrorCodes2[\"ValidationError\"] = \"validation_error\";\n  SendTransactionErrorCodes2[\"InvalidContract\"] = \"invalid_contract\";\n  SendTransactionErrorCodes2[\"MaliciousOperation\"] = \"malicious_operation\";\n  SendTransactionErrorCodes2[\"DailyTxLimitReached\"] = \"daily_tx_limit_reached\";\n  SendTransactionErrorCodes2[\"PermittedAmountExceedsSlippage\"] = \"permitted_amount_exceeds_slippage\";\n  SendTransactionErrorCodes2[\"PermittedAmountNotFound\"] = \"permitted_amount_not_found\";\n  return SendTransactionErrorCodes2;\n})(SendTransactionErrorCodes || {});\nvar SendTransactionErrorMessage = {\n  [\"invalid_operation\" /* InvalidOperation */]: \"Transaction included an operation that was invalid\",\n  [\"user_rejected\" /* UserRejected */]: \"User rejected the request.\",\n  [\"input_error\" /* InputError */]: \"Invalid payload.\",\n  [\"simulation_failed\" /* SimulationFailed */]: \"The transaction simulation failed.\",\n  [\"validation_error\" /* ValidationError */]: \"The transaction validation failed. Please try again.\",\n  [\"transaction_failed\" /* TransactionFailed */]: \"The transaction failed. Please try again later.\",\n  [\"generic_error\" /* GenericError */]: \"Something unexpected went wrong. Please try again.\",\n  [\"disallowed_operation\" /* DisallowedOperation */]: \"The operation requested is not allowed. Please refer to the docs.\",\n  [\"invalid_contract\" /* InvalidContract */]: \"The contract address is not allowed for your application. Please check your developer portal configurations\",\n  [\"malicious_operation\" /* MaliciousOperation */]: \"The operation requested is considered malicious.\",\n  [\"daily_tx_limit_reached\" /* DailyTxLimitReached */]: \"Daily transaction limit reached. Max 100 transactions per day. Wait until the next day.\",\n  [\"permitted_amount_exceeds_slippage\" /* PermittedAmountExceedsSlippage */]: \"Permitted amount exceeds slippage. You must spend at least 90% of the permitted amount.\",\n  [\"permitted_amount_not_found\" /* PermittedAmountNotFound */]: \"Permitted amount not found in permit2 payload.\"\n};\nvar SignMessageErrorCodes = /* @__PURE__ */ ((SignMessageErrorCodes2) => {\n  SignMessageErrorCodes2[\"InvalidMessage\"] = \"invalid_message\";\n  SignMessageErrorCodes2[\"UserRejected\"] = \"user_rejected\";\n  SignMessageErrorCodes2[\"GenericError\"] = \"generic_error\";\n  return SignMessageErrorCodes2;\n})(SignMessageErrorCodes || {});\nvar SignMessageErrorMessage = {\n  [\"invalid_message\" /* InvalidMessage */]: \"Invalid message requested\",\n  [\"user_rejected\" /* UserRejected */]: \"User rejected the request.\",\n  [\"generic_error\" /* GenericError */]: \"Something unexpected went wrong.\"\n};\nvar SignTypedDataErrorCodes = /* @__PURE__ */ ((SignTypedDataErrorCodes2) => {\n  SignTypedDataErrorCodes2[\"InvalidOperation\"] = \"invalid_operation\";\n  SignTypedDataErrorCodes2[\"UserRejected\"] = \"user_rejected\";\n  SignTypedDataErrorCodes2[\"InputError\"] = \"input_error\";\n  SignTypedDataErrorCodes2[\"SimulationFailed\"] = \"simulation_failed\";\n  SignTypedDataErrorCodes2[\"GenericError\"] = \"generic_error\";\n  SignTypedDataErrorCodes2[\"DisallowedOperation\"] = \"disallowed_operation\";\n  SignTypedDataErrorCodes2[\"InvalidContract\"] = \"invalid_contract\";\n  SignTypedDataErrorCodes2[\"MaliciousOperation\"] = \"malicious_operation\";\n  return SignTypedDataErrorCodes2;\n})(SignTypedDataErrorCodes || {});\nvar SignTypedDataErrorMessage = {\n  [\"invalid_operation\" /* InvalidOperation */]: \"Transaction included an operation that was invalid\",\n  [\"user_rejected\" /* UserRejected */]: \"User rejected the request.\",\n  [\"input_error\" /* InputError */]: \"Invalid payload.\",\n  [\"simulation_failed\" /* SimulationFailed */]: \"The transaction simulation failed.\",\n  [\"generic_error\" /* GenericError */]: \"Something unexpected went wrong. Please try again.\",\n  [\"disallowed_operation\" /* DisallowedOperation */]: \"The operation requested is not allowed. Please refer to the docs.\",\n  [\"invalid_contract\" /* InvalidContract */]: \"The contract address is not allowed for your application. Please check your developer portal configurations\",\n  [\"malicious_operation\" /* MaliciousOperation */]: \"The operation requested is considered malicious.\"\n};\nvar MiniKitInstallErrorCodes = /* @__PURE__ */ ((MiniKitInstallErrorCodes2) => {\n  MiniKitInstallErrorCodes2[\"Unknown\"] = \"unknown\";\n  MiniKitInstallErrorCodes2[\"AlreadyInstalled\"] = \"already_installed\";\n  MiniKitInstallErrorCodes2[\"OutsideOfWorldApp\"] = \"outside_of_worldapp\";\n  MiniKitInstallErrorCodes2[\"NotOnClient\"] = \"not_on_client\";\n  MiniKitInstallErrorCodes2[\"AppOutOfDate\"] = \"app_out_of_date\";\n  return MiniKitInstallErrorCodes2;\n})(MiniKitInstallErrorCodes || {});\nvar MiniKitInstallErrorMessage = {\n  [\"unknown\" /* Unknown */]: \"Failed to install MiniKit.\",\n  [\"already_installed\" /* AlreadyInstalled */]: \"MiniKit is already installed.\",\n  [\"outside_of_worldapp\" /* OutsideOfWorldApp */]: \"MiniApp launched outside of WorldApp.\",\n  [\"not_on_client\" /* NotOnClient */]: \"Window object is not available.\",\n  [\"app_out_of_date\" /* AppOutOfDate */]: \"WorldApp is out of date. Please update the app.\"\n};\nvar ShareContactsErrorCodes = /* @__PURE__ */ ((ShareContactsErrorCodes2) => {\n  ShareContactsErrorCodes2[\"UserRejected\"] = \"user_rejected\";\n  ShareContactsErrorCodes2[\"GenericError\"] = \"generic_error\";\n  return ShareContactsErrorCodes2;\n})(ShareContactsErrorCodes || {});\nvar ShareContactsErrorMessage = {\n  [\"user_rejected\" /* UserRejected */]: \"User rejected the request.\",\n  [\"generic_error\" /* GenericError */]: \"Something unexpected went wrong.\"\n};\nvar RequestPermissionErrorCodes = /* @__PURE__ */ ((RequestPermissionErrorCodes2) => {\n  RequestPermissionErrorCodes2[\"UserRejected\"] = \"user_rejected\";\n  RequestPermissionErrorCodes2[\"GenericError\"] = \"generic_error\";\n  RequestPermissionErrorCodes2[\"AlreadyRequested\"] = \"already_requested\";\n  RequestPermissionErrorCodes2[\"PermissionDisabled\"] = \"permission_disabled\";\n  RequestPermissionErrorCodes2[\"AlreadyGranted\"] = \"already_granted\";\n  RequestPermissionErrorCodes2[\"UnsupportedPermission\"] = \"unsupported_permission\";\n  return RequestPermissionErrorCodes2;\n})(RequestPermissionErrorCodes || {});\nvar RequestPermissionErrorMessage = {\n  [\"user_rejected\" /* UserRejected */]: \"User declined sharing contacts\",\n  [\"generic_error\" /* GenericError */]: \"Request failed for unknown reason.\",\n  [\"already_requested\" /* AlreadyRequested */]: \"User has already declined turning on notifications once\",\n  [\"permission_disabled\" /* PermissionDisabled */]: \"User does not have this permission enabled in World App\",\n  [\"already_granted\" /* AlreadyGranted */]: \"If the user has already granted this mini app permission\",\n  [\"unsupported_permission\" /* UnsupportedPermission */]: \"The permission requested is not supported by this mini app\"\n};\nvar GetPermissionsErrorCodes = /* @__PURE__ */ ((GetPermissionsErrorCodes2) => {\n  GetPermissionsErrorCodes2[\"GenericError\"] = \"generic_error\";\n  return GetPermissionsErrorCodes2;\n})(GetPermissionsErrorCodes || {});\nvar GetPermissionsErrorMessage = {\n  [\"generic_error\" /* GenericError */]: \"Something unexpected went wrong. Please try again.\"\n};\nvar SendHapticFeedbackErrorCodes = /* @__PURE__ */ ((SendHapticFeedbackErrorCodes2) => {\n  SendHapticFeedbackErrorCodes2[\"GenericError\"] = \"generic_error\";\n  SendHapticFeedbackErrorCodes2[\"UserRejected\"] = \"user_rejected\";\n  return SendHapticFeedbackErrorCodes2;\n})(SendHapticFeedbackErrorCodes || {});\nvar SendHapticFeedbackErrorMessage = {\n  [\"generic_error\" /* GenericError */]: \"Something unexpected went wrong.\",\n  [\"user_rejected\" /* UserRejected */]: \"User rejected the request.\"\n};\nvar ShareFilesErrorCodes = /* @__PURE__ */ ((ShareFilesErrorCodes2) => {\n  ShareFilesErrorCodes2[\"UserRejected\"] = \"user_rejected\";\n  ShareFilesErrorCodes2[\"GenericError\"] = \"generic_error\";\n  ShareFilesErrorCodes2[\"InvalidFileName\"] = \"invalid_file_name\";\n  return ShareFilesErrorCodes2;\n})(ShareFilesErrorCodes || {});\nvar ShareFilesErrorMessage = {\n  [\"user_rejected\" /* UserRejected */]: \"User rejected the request.\",\n  [\"generic_error\" /* GenericError */]: \"Something unexpected went wrong.\",\n  [\"invalid_file_name\" /* InvalidFileName */]: \"Invalid file name. Make sure you include the extension\"\n};\nvar MicrophoneErrorCodes = /* @__PURE__ */ ((MicrophoneErrorCodes2) => {\n  MicrophoneErrorCodes2[\"MiniAppPermissionNotEnabled\"] = \"mini_app_permission_not_enabled\";\n  MicrophoneErrorCodes2[\"WorldAppPermissionNotEnabled\"] = \"world_app_permission_not_enabled\";\n  return MicrophoneErrorCodes2;\n})(MicrophoneErrorCodes || {});\nvar MicrophoneErrorMessage = {\n  [\"mini_app_permission_not_enabled\" /* MiniAppPermissionNotEnabled */]: \"Microphone permission not enabled for your Mini App\",\n  [\"world_app_permission_not_enabled\" /* WorldAppPermissionNotEnabled */]: \"Microphone permission not enabled in World App\"\n};\nvar ChatErrorCodes = /* @__PURE__ */ ((ChatErrorCodes2) => {\n  ChatErrorCodes2[\"UserRejected\"] = \"user_rejected\";\n  ChatErrorCodes2[\"SendFailed\"] = \"send_failed\";\n  ChatErrorCodes2[\"GenericError\"] = \"generic_error\";\n  return ChatErrorCodes2;\n})(ChatErrorCodes || {});\nvar ChatErrorMessage = {\n  [\"user_rejected\" /* UserRejected */]: \"User rejected the request.\",\n  [\"send_failed\" /* SendFailed */]: \"Failed to send the message.\",\n  [\"generic_error\" /* GenericError */]: \"Something unexpected went wrong.\"\n};\n\n// types/responses.ts\nvar ResponseEvent = /* @__PURE__ */ ((ResponseEvent2) => {\n  ResponseEvent2[\"MiniAppVerifyAction\"] = \"miniapp-verify-action\";\n  ResponseEvent2[\"MiniAppPayment\"] = \"miniapp-payment\";\n  ResponseEvent2[\"MiniAppWalletAuth\"] = \"miniapp-wallet-auth\";\n  ResponseEvent2[\"MiniAppSendTransaction\"] = \"miniapp-send-transaction\";\n  ResponseEvent2[\"MiniAppSignMessage\"] = \"miniapp-sign-message\";\n  ResponseEvent2[\"MiniAppSignTypedData\"] = \"miniapp-sign-typed-data\";\n  ResponseEvent2[\"MiniAppShareContacts\"] = \"miniapp-share-contacts\";\n  ResponseEvent2[\"MiniAppRequestPermission\"] = \"miniapp-request-permission\";\n  ResponseEvent2[\"MiniAppGetPermissions\"] = \"miniapp-get-permissions\";\n  ResponseEvent2[\"MiniAppSendHapticFeedback\"] = \"miniapp-send-haptic-feedback\";\n  ResponseEvent2[\"MiniAppShare\"] = \"miniapp-share\";\n  ResponseEvent2[\"MiniAppMicrophone\"] = \"miniapp-microphone\";\n  ResponseEvent2[\"MiniAppChat\"] = \"miniapp-chat\";\n  return ResponseEvent2;\n})(ResponseEvent || {});\n\n// types/payment.ts\nvar Tokens = /* @__PURE__ */ ((Tokens2) => {\n  Tokens2[\"USDC\"] = \"USDCE\";\n  Tokens2[\"WLD\"] = \"WLD\";\n  return Tokens2;\n})(Tokens || {});\nvar TokenDecimals = {\n  [\"USDCE\" /* USDC */]: 6,\n  [\"WLD\" /* WLD */]: 18\n};\nvar Network = /* @__PURE__ */ ((Network2) => {\n  Network2[\"Optimism\"] = \"optimism\";\n  Network2[\"WorldChain\"] = \"worldchain\";\n  return Network2;\n})(Network || {});\n\n// helpers/payment/client.ts\nvar tokenToDecimals = (amount, token) => {\n  const decimals = TokenDecimals[token];\n  if (decimals === void 0) {\n    throw new Error(`Invalid token: ${token}`);\n  }\n  const factor = 10 ** decimals;\n  const result = amount * factor;\n  if (!Number.isInteger(result)) {\n    throw new Error(`The resulting amount is not a whole number: ${result}`);\n  }\n  return result;\n};\nvar validatePaymentPayload = (payload) => {\n  if (payload.tokens.some(\n    (token) => token.symbol == \"USDCE\" /* USDC */ && parseFloat(token.token_amount) < 0.1\n  )) {\n    console.error(\"USDC amount should be greater than $0.1\");\n    return false;\n  }\n  if (payload.reference.length > 36) {\n    console.error(\"Reference must not exceed 36 characters\");\n    return false;\n  }\n  if (typeof payload.reference !== \"string\") {\n    throw new Error(\"Reference must be a string\");\n  }\n  return true;\n};\n\n// helpers/siwe/siwe.ts\n\n\nvar PREAMBLE = \" wants you to sign in with your Ethereum account:\";\nvar URI_TAG = \"URI: \";\nvar VERSION_TAG = \"Version: \";\nvar CHAIN_TAG = \"Chain ID: \";\nvar NONCE_TAG = \"Nonce: \";\nvar IAT_TAG = \"Issued At: \";\nvar EXP_TAG = \"Expiration Time: \";\nvar NBF_TAG = \"Not Before: \";\nvar RID_TAG = \"Request ID: \";\nvar ERC_191_PREFIX = \"\u0019Ethereum Signed Message:\\n\";\nvar EIP1271_MAGICVALUE = \"0x1626ba7e\";\nvar SAFE_CONTRACT_ABI = [\n  {\n    inputs: [\n      {\n        internalType: \"address\",\n        name: \"owner\",\n        type: \"address\"\n      }\n    ],\n    name: \"isOwner\",\n    outputs: [\n      {\n        internalType: \"bool\",\n        name: \"\",\n        type: \"bool\"\n      }\n    ],\n    stateMutability: \"view\",\n    type: \"function\"\n  },\n  {\n    inputs: [\n      {\n        internalType: \"bytes32\",\n        name: \"_message\",\n        type: \"bytes32\"\n      },\n      {\n        internalType: \"bytes\",\n        name: \"_signature\",\n        type: \"bytes\"\n      }\n    ],\n    name: \"isValidSignature\",\n    outputs: [\n      {\n        internalType: \"bytes4\",\n        name: \"\",\n        type: \"bytes4\"\n      }\n    ],\n    stateMutability: \"view\",\n    type: \"function\"\n  }\n];\nvar tagged = (line, tag) => {\n  if (line && line.includes(tag)) {\n    return line.replace(tag, \"\");\n  } else {\n    throw new Error(`Missing '${tag}'`);\n  }\n};\nvar parseSiweMessage = (inputString) => {\n  const lines = inputString.split(\"\\n\")[Symbol.iterator]();\n  const domain = tagged(lines.next()?.value, PREAMBLE);\n  const address = lines.next()?.value;\n  lines.next();\n  const nextValue = lines.next()?.value;\n  let statement;\n  if (nextValue) {\n    statement = nextValue;\n    lines.next();\n  }\n  const uri = tagged(lines.next()?.value, URI_TAG);\n  const version = tagged(lines.next()?.value, VERSION_TAG);\n  const chain_id = tagged(lines.next()?.value, CHAIN_TAG);\n  const nonce = tagged(lines.next()?.value, NONCE_TAG);\n  const issued_at = tagged(lines.next()?.value, IAT_TAG);\n  let expiration_time, not_before, request_id;\n  for (let line of lines) {\n    if (line.startsWith(EXP_TAG)) {\n      expiration_time = tagged(line, EXP_TAG);\n    } else if (line.startsWith(NBF_TAG)) {\n      not_before = tagged(line, NBF_TAG);\n    } else if (line.startsWith(RID_TAG)) {\n      request_id = tagged(line, RID_TAG);\n    }\n  }\n  if (lines.next().done === false) {\n    throw new Error(\"Extra lines in the input\");\n  }\n  const siweMessageData = {\n    domain,\n    address,\n    statement,\n    uri,\n    version,\n    chain_id,\n    nonce,\n    issued_at,\n    expiration_time,\n    not_before,\n    request_id\n  };\n  return siweMessageData;\n};\nvar generateSiweMessage = (siweMessageData) => {\n  let siweMessage = \"\";\n  if (siweMessageData.scheme) {\n    siweMessage += `${siweMessageData.scheme}://${siweMessageData.domain} wants you to sign in with your Ethereum account:\n`;\n  } else {\n    siweMessage += `${siweMessageData.domain} wants you to sign in with your Ethereum account:\n`;\n  }\n  if (siweMessageData.address) {\n    siweMessage += `${siweMessageData.address}\n`;\n  } else {\n    siweMessage += \"{address}\\n\";\n  }\n  siweMessage += \"\\n\";\n  if (siweMessageData.statement) {\n    siweMessage += `${siweMessageData.statement}\n`;\n  }\n  siweMessage += \"\\n\";\n  siweMessage += `URI: ${siweMessageData.uri}\n`;\n  siweMessage += `Version: ${siweMessageData.version}\n`;\n  siweMessage += `Chain ID: ${siweMessageData.chain_id}\n`;\n  siweMessage += `Nonce: ${siweMessageData.nonce}\n`;\n  siweMessage += `Issued At: ${siweMessageData.issued_at}\n`;\n  if (siweMessageData.expiration_time) {\n    siweMessage += `Expiration Time: ${siweMessageData.expiration_time}\n`;\n  }\n  if (siweMessageData.not_before) {\n    siweMessage += `Not Before: ${siweMessageData.not_before}\n`;\n  }\n  if (siweMessageData.request_id) {\n    siweMessage += `Request ID: ${siweMessageData.request_id}\n`;\n  }\n  return siweMessage;\n};\nvar verifySiweMessage = (payload, nonce, statement, requestId, userProvider) => {\n  if (payload.version === 1) {\n    return verifySiweMessageV1(\n      payload,\n      nonce,\n      statement,\n      requestId,\n      userProvider\n    );\n  } else {\n    return verifySiweMessageV2(\n      payload,\n      nonce,\n      statement,\n      requestId,\n      userProvider\n    );\n  }\n};\nvar validateMessage = (siweMessageData, nonce, statement, requestId) => {\n  if (siweMessageData.expiration_time) {\n    const expirationTime = new Date(siweMessageData.expiration_time);\n    if (expirationTime < /* @__PURE__ */ new Date()) {\n      throw new Error(\"Expired message\");\n    }\n  }\n  if (siweMessageData.not_before) {\n    const notBefore = new Date(siweMessageData.not_before);\n    if (notBefore > /* @__PURE__ */ new Date()) {\n      throw new Error(\"Not Before time has not passed\");\n    }\n  }\n  if (nonce && siweMessageData.nonce !== nonce) {\n    throw new Error(\n      `Nonce mismatch. Got: ${siweMessageData.nonce}, Expected: ${nonce}`\n    );\n  }\n  if (statement && siweMessageData.statement !== statement) {\n    throw new Error(\n      `Statement mismatch. Got: ${siweMessageData.statement}, Expected: ${statement}`\n    );\n  }\n  if (requestId && siweMessageData.request_id !== requestId) {\n    throw new Error(\n      `Request ID mismatch. Got: ${siweMessageData.request_id}, Expected: ${requestId}`\n    );\n  }\n  return true;\n};\nvar verifySiweMessageV1 = async (payload, nonce, statement, requestId, userProvider) => {\n  if (typeof window !== \"undefined\") {\n    throw new Error(\"Wallet auth payload can only be verified in the backend\");\n  }\n  const { message, signature, address } = payload;\n  const siweMessageData = parseSiweMessage(message);\n  validateMessage(siweMessageData, nonce, statement, requestId);\n  let provider = userProvider || (0,viem__WEBPACK_IMPORTED_MODULE_1__.createPublicClient)({ chain: viem_chains__WEBPACK_IMPORTED_MODULE_2__.worldchain, transport: (0,viem__WEBPACK_IMPORTED_MODULE_3__.http)() });\n  const signedMessage = `${ERC_191_PREFIX}${message.length}${message}`;\n  const hashedMessage = (0,viem__WEBPACK_IMPORTED_MODULE_4__.hashMessage)(signedMessage);\n  const contract = (0,viem__WEBPACK_IMPORTED_MODULE_5__.getContract)({\n    address,\n    abi: SAFE_CONTRACT_ABI,\n    client: provider\n  });\n  try {\n    const recoveredAddress = await (0,viem__WEBPACK_IMPORTED_MODULE_6__.recoverAddress)({\n      hash: hashedMessage,\n      signature: `0x${signature}`\n    });\n    const isOwner = await contract.read.isOwner([recoveredAddress]);\n    if (!isOwner) {\n      throw new Error(\"Signature verification failed, invalid owner\");\n    }\n  } catch (error) {\n    throw new Error(\"Signature verification failed\");\n  }\n  return { isValid: true, siweMessageData };\n};\nvar verifySiweMessageV2 = async (payload, nonce, statement, requestId, userProvider) => {\n  if (typeof window !== \"undefined\") {\n    throw new Error(\"Wallet auth payload can only be verified in the backend\");\n  }\n  const { message, signature, address } = payload;\n  const siweMessageData = parseSiweMessage(message);\n  if (!validateMessage(siweMessageData, nonce, statement, requestId)) {\n    throw new Error(\"Validation failed\");\n  }\n  try {\n    const walletContract = (0,viem__WEBPACK_IMPORTED_MODULE_5__.getContract)({\n      address,\n      abi: SAFE_CONTRACT_ABI,\n      client: userProvider || (0,viem__WEBPACK_IMPORTED_MODULE_1__.createPublicClient)({ chain: viem_chains__WEBPACK_IMPORTED_MODULE_2__.worldchain, transport: (0,viem__WEBPACK_IMPORTED_MODULE_3__.http)() })\n    });\n    const hashedMessage = (0,viem__WEBPACK_IMPORTED_MODULE_4__.hashMessage)(message);\n    const res = await walletContract.read.isValidSignature([\n      hashedMessage,\n      signature\n    ]);\n    return {\n      isValid: res === EIP1271_MAGICVALUE,\n      siweMessageData\n    };\n  } catch (error) {\n    console.log(error);\n    throw new Error(\"Signature verification failed\");\n  }\n};\n\n// types/commands.ts\nvar Command = /* @__PURE__ */ ((Command2) => {\n  Command2[\"Verify\"] = \"verify\";\n  Command2[\"Pay\"] = \"pay\";\n  Command2[\"WalletAuth\"] = \"wallet-auth\";\n  Command2[\"SendTransaction\"] = \"send-transaction\";\n  Command2[\"SignMessage\"] = \"sign-message\";\n  Command2[\"SignTypedData\"] = \"sign-typed-data\";\n  Command2[\"ShareContacts\"] = \"share-contacts\";\n  Command2[\"RequestPermission\"] = \"request-permission\";\n  Command2[\"GetPermissions\"] = \"get-permissions\";\n  Command2[\"SendHapticFeedback\"] = \"send-haptic-feedback\";\n  Command2[\"Share\"] = \"share\";\n  Command2[\"Chat\"] = \"chat\";\n  return Command2;\n})(Command || {});\nvar Permission = /* @__PURE__ */ ((Permission2) => {\n  Permission2[\"Notifications\"] = \"notifications\";\n  Permission2[\"Contacts\"] = \"contacts\";\n  Permission2[\"Microphone\"] = \"microphone\";\n  return Permission2;\n})(Permission || {});\n\n// types/init.ts\nvar MiniAppLaunchLocation = /* @__PURE__ */ ((MiniAppLaunchLocation3) => {\n  MiniAppLaunchLocation3[\"Chat\"] = \"chat\";\n  MiniAppLaunchLocation3[\"Home\"] = \"home\";\n  MiniAppLaunchLocation3[\"AppStore\"] = \"app-store\";\n  MiniAppLaunchLocation3[\"DeepLink\"] = \"deep-link\";\n  MiniAppLaunchLocation3[\"WalletTab\"] = \"wallet-tab\";\n  return MiniAppLaunchLocation3;\n})(MiniAppLaunchLocation || {});\nvar WORLD_APP_LAUNCH_LOCATION_MAP = {\n  \"app-store\": \"app-store\" /* AppStore */,\n  carousel: \"app-store\" /* AppStore */,\n  explore: \"app-store\" /* AppStore */,\n  app_details: \"app-store\" /* AppStore */,\n  deeplink: \"deep-link\" /* DeepLink */,\n  homepage: \"home\" /* Home */,\n  wallet_tab: \"wallet-tab\" /* WalletTab */,\n  world_chat: \"chat\" /* Chat */\n};\nvar mapWorldAppLaunchLocation = (location) => {\n  if (!location || typeof location !== \"string\") return null;\n  console.log(\"MiniKit launch location mapped:\", location);\n  const normalizedLocation = location.toLowerCase();\n  return WORLD_APP_LAUNCH_LOCATION_MAP[normalizedLocation] ?? null;\n};\n\n// minikit.ts\n\n\n\n// helpers/send-webview-event.ts\nvar sendWebviewEvent = (payload) => {\n  if (window.webkit) {\n    window.webkit?.messageHandlers?.minikit?.postMessage?.(payload);\n  } else if (window.Android) {\n    window.Android.postMessage?.(JSON.stringify(payload));\n  }\n};\n\n// helpers/microphone/index.ts\nvar microphoneSetupDone = false;\nvar setupMicrophone = () => {\n  if (microphoneSetupDone) {\n    return;\n  }\n  if (typeof navigator !== \"undefined\" && !navigator.mediaDevices?.getUserMedia)\n    return;\n  const originalStop = MediaStreamTrack.prototype.stop;\n  MediaStreamTrack.prototype.stop = function() {\n    originalStop.call(this);\n    if (this.readyState === \"ended\") {\n      setTimeout(() => this.dispatchEvent(new Event(\"ended\")), 0);\n    }\n  };\n  const realGUM = navigator.mediaDevices.getUserMedia.bind(\n    navigator.mediaDevices\n  );\n  const live = /* @__PURE__ */ new Set();\n  async function wrapped(constraints) {\n    const stream = await realGUM(constraints);\n    const hasAudioTrack = stream.getAudioTracks().length > 0;\n    if (hasAudioTrack) {\n      sendWebviewEvent({\n        command: \"microphone-stream-started\",\n        version: 1,\n        payload: {\n          streamId: stream.id\n        }\n      });\n      live.add(stream);\n      stream.getAudioTracks().forEach((t) => {\n        t.addEventListener(\"ended\", () => {\n          const allAudioTracksEnded = stream.getAudioTracks().every((track) => track.readyState === \"ended\");\n          if (allAudioTracksEnded) {\n            sendWebviewEvent({\n              command: \"microphone-stream-ended\",\n              version: 1,\n              payload: {\n                streamId: stream.id\n              }\n            });\n            live.delete(stream);\n          }\n        });\n      });\n    }\n    return stream;\n  }\n  Object.defineProperty(navigator.mediaDevices, \"getUserMedia\", {\n    value: wrapped,\n    writable: false,\n    configurable: false,\n    enumerable: true\n  });\n  Object.freeze(navigator.mediaDevices);\n  const stopAllMiniAppMicrophoneStreams = () => {\n    live.forEach((s) => {\n      const audioTracks = s.getAudioTracks();\n      if (audioTracks.length > 0) {\n        audioTracks.forEach((t) => {\n          t.stop();\n        });\n        sendWebviewEvent({\n          command: \"microphone-stream-ended\",\n          version: 1,\n          payload: {\n            streamId: s.id\n          }\n        });\n      }\n    });\n    live.clear();\n  };\n  MiniKit.subscribe(\"miniapp-microphone\" /* MiniAppMicrophone */, (payload) => {\n    if (payload.status === \"error\" && (payload.error_code === \"mini_app_permission_not_enabled\" /* MiniAppPermissionNotEnabled */ || payload.error_code === \"world_app_permission_not_enabled\" /* WorldAppPermissionNotEnabled */)) {\n      console.log(\"stopping all microphone streams\", payload);\n      stopAllMiniAppMicrophoneStreams();\n    }\n  });\n  window.__stopAllMiniAppMicrophoneStreams = stopAllMiniAppMicrophoneStreams;\n  microphoneSetupDone = true;\n};\n\n// helpers/proof/index.ts\n\n\nvar semaphoreVerifierAddress = \"0x79f46b94d134109EbcbbddBAeD0E88790409A0e4\";\nvar semaphoreVerifierAbi = [\n  {\n    inputs: [\n      {\n        internalType: \"uint256[8]\",\n        name: \"proof\",\n        type: \"uint256[8]\"\n      }\n    ],\n    name: \"compressProof\",\n    outputs: [\n      {\n        internalType: \"uint256[4]\",\n        name: \"compressed\",\n        type: \"uint256[4]\"\n      }\n    ],\n    stateMutability: \"view\",\n    type: \"function\"\n  }\n];\nvar compressAndPadProof = async (proof, rpcUrl) => {\n  try {\n    const publicClient = (0,viem__WEBPACK_IMPORTED_MODULE_1__.createPublicClient)({\n      chain: viem_chains__WEBPACK_IMPORTED_MODULE_2__.worldchain,\n      transport: (0,viem__WEBPACK_IMPORTED_MODULE_3__.http)(\n        rpcUrl || \"https://worldchain-mainnet.g.alchemy.com/public\"\n      )\n    });\n    const decodedProof = (0,viem__WEBPACK_IMPORTED_MODULE_8__.decodeAbiParameters)(\n      [{ type: \"uint256[8]\" }],\n      proof\n    )[0];\n    const compressedProof = await publicClient.readContract({\n      address: semaphoreVerifierAddress,\n      abi: semaphoreVerifierAbi,\n      functionName: \"compressProof\",\n      args: [decodedProof]\n    });\n    const paddedProof = [...compressedProof, 0n, 0n, 0n, 0n];\n    return (0,viem__WEBPACK_IMPORTED_MODULE_9__.encodeAbiParameters)([{ type: \"uint256[8]\" }], [paddedProof]);\n  } catch (e) {\n    return proof;\n  }\n};\n\n// helpers/share/index.ts\nvar MAX_FILES = 10;\nvar MAX_TOTAL_SIZE_MB = 50;\nvar MAX_TOTAL_SIZE_BYTES = MAX_TOTAL_SIZE_MB * 1024 * 1024;\nvar processFile = async (file) => {\n  const buffer = await file.arrayBuffer();\n  const uint8Array = new Uint8Array(buffer);\n  let binaryString = \"\";\n  const K_CHUNK_SIZE = 32768;\n  for (let i = 0; i < uint8Array.length; i += K_CHUNK_SIZE) {\n    const chunk = uint8Array.subarray(\n      i,\n      Math.min(i + K_CHUNK_SIZE, uint8Array.length)\n    );\n    binaryString += String.fromCharCode.apply(\n      null,\n      Array.from(chunk)\n      // Convert Uint8Array chunk to number[]\n    );\n  }\n  const base64Data = btoa(binaryString);\n  return {\n    name: file.name,\n    type: file.type,\n    data: base64Data\n  };\n};\nvar formatShareInput = async (input) => {\n  if (!input.files) {\n    return {\n      title: input.title,\n      text: input.text,\n      url: input.url\n    };\n  }\n  if (!Array.isArray(input.files)) {\n    throw new Error('The \"files\" property must be an array.');\n  }\n  if (input.files.length === 0) {\n  } else {\n    if (input.files.length > MAX_FILES) {\n      throw new Error(`Cannot share more than ${MAX_FILES} files.`);\n    }\n    let totalSize = 0;\n    for (const file of input.files) {\n      if (!(file instanceof File)) {\n        throw new Error(\n          `Each item in the 'files' array must be a File object. Received: ${typeof file}`\n        );\n      }\n      totalSize += file.size;\n    }\n    if (totalSize > MAX_TOTAL_SIZE_BYTES) {\n      throw new Error(`Total file size cannot exceed ${MAX_TOTAL_SIZE_MB}MB.`);\n    }\n  }\n  const fileProcessingPromises = input.files.map((file) => processFile(file));\n  const processedFiles = await Promise.all(fileProcessingPromises);\n  return {\n    files: processedFiles,\n    title: input.title,\n    text: input.text,\n    url: input.url\n  };\n};\n\n// helpers/siwe/validate-wallet-auth-command-input.ts\nvar validateWalletAuthCommandInput = (params) => {\n  if (!params.nonce) {\n    return { valid: false, message: \"'nonce' is required\" };\n  }\n  if (params.nonce.length < 8) {\n    return { valid: false, message: \"'nonce' must be at least 8 characters\" };\n  }\n  if (params.statement && params.statement.includes(\"\\n\")) {\n    return { valid: false, message: \"'statement' must not contain newlines\" };\n  }\n  if (params.expirationTime && new Date(params.expirationTime) < /* @__PURE__ */ new Date()) {\n    return { valid: false, message: \"'expirationTime' must be in the future\" };\n  }\n  if (params.expirationTime && new Date(params.expirationTime) > new Date(Date.now() + 7 * 24 * 60 * 60 * 1e3)) {\n    return { valid: false, message: \"'expirationTime' must be within 7 days\" };\n  }\n  if (params.notBefore && new Date(params.notBefore) > new Date(Date.now() + 7 * 24 * 60 * 60 * 1e3)) {\n    return { valid: false, message: \"'notBefore' must be within 7 days\" };\n  }\n  return { valid: true };\n};\n\n// helpers/transaction/validate-payload.ts\nvar isValidHex = (str) => {\n  return /^0x[0-9A-Fa-f]+$/.test(str);\n};\nvar objectValuesToArrayRecursive = (input) => {\n  if (input === null || typeof input !== \"object\") {\n    return input;\n  }\n  if (Array.isArray(input)) {\n    return input.map((item) => objectValuesToArrayRecursive(item));\n  }\n  const values = Object.values(input);\n  return values.map((value) => objectValuesToArrayRecursive(value));\n};\nvar processPayload = (payload) => {\n  if (typeof payload === \"boolean\" || typeof payload === \"string\" || payload === null || payload === void 0) {\n    return payload;\n  }\n  if (typeof payload === \"number\" || typeof payload === \"bigint\") {\n    return String(payload);\n  }\n  if (Array.isArray(payload)) {\n    return payload.map((value) => processPayload(value));\n  }\n  if (typeof payload === \"object\") {\n    const result = { ...payload };\n    if (\"value\" in result && result.value !== void 0) {\n      if (typeof result.value !== \"string\") {\n        result.value = String(result.value);\n      }\n      if (!isValidHex(result.value)) {\n        console.error(\n          \"Transaction value must be a valid hex string\",\n          result.value\n        );\n        throw new Error(\n          `Transaction value must be a valid hex string: ${result.value}`\n        );\n      }\n    }\n    for (const key in result) {\n      if (Object.prototype.hasOwnProperty.call(result, key)) {\n        result[key] = processPayload(result[key]);\n      }\n    }\n    return result;\n  }\n  return payload;\n};\nvar validateSendTransactionPayload = (payload) => {\n  if (payload.formatPayload) {\n    const formattedPayload = processPayload(payload);\n    formattedPayload.transaction = formattedPayload.transaction.map((tx) => {\n      const args = objectValuesToArrayRecursive(tx.args);\n      return {\n        ...tx,\n        args\n      };\n    });\n    return formattedPayload;\n  }\n  return payload;\n};\n\n// helpers/usernames/index.ts\nvar getUserProfile = async (address) => {\n  const res = await fetch(\"https://usernames.worldcoin.org/api/v1/query\", {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify({\n      addresses: [address]\n    })\n  });\n  const usernames = await res.json();\n  return usernames?.[0] ?? { username: null, profile_picture_url: null };\n};\n\n// minikit.ts\nvar sendMiniKitEvent = (payload) => {\n  sendWebviewEvent(payload);\n};\nvar _MiniKit = class _MiniKit {\n  static sendInit() {\n    sendWebviewEvent({\n      command: \"init\",\n      payload: {\n        version: this.MINIKIT_VERSION,\n        minorVersion: this.MINIKIT_MINOR_VERSION\n      }\n    });\n  }\n  static subscribe(event, handler) {\n    if (event === \"miniapp-wallet-auth\" /* MiniAppWalletAuth */) {\n      const originalHandler = handler;\n      const wrappedHandler = async (payload) => {\n        if (payload.status === \"success\") {\n          _MiniKit.user.walletAddress = payload.address;\n          try {\n            const user = await _MiniKit.getUserByAddress(payload.address);\n            _MiniKit.user = { ..._MiniKit.user, ...user };\n          } catch (error) {\n            console.error(\"Failed to fetch user profile:\", error);\n          }\n        }\n        originalHandler(payload);\n      };\n      this.listeners[event] = wrappedHandler;\n    } else if (event === \"miniapp-verify-action\" /* MiniAppVerifyAction */) {\n      const originalHandler = handler;\n      const wrappedHandler = (payload) => {\n        if (payload.status === \"error\" && payload.error_code == \"user_rejected\") {\n          payload.error_code = _worldcoin_idkit_core__WEBPACK_IMPORTED_MODULE_0__.AppErrorCodes.VerificationRejected;\n        }\n        if (payload.status === \"success\" && payload.verification_level === _worldcoin_idkit_core__WEBPACK_IMPORTED_MODULE_0__.VerificationLevel.Orb) {\n          compressAndPadProof(payload.proof).then(\n            (compressedProof) => {\n              payload.proof = compressedProof;\n              originalHandler(payload);\n            }\n          );\n        } else {\n          originalHandler(payload);\n        }\n      };\n      this.listeners[event] = wrappedHandler;\n    } else {\n      this.listeners[event] = handler;\n    }\n  }\n  static unsubscribe(event) {\n    delete this.listeners[event];\n  }\n  static trigger(event, payload) {\n    if (!this.listeners[event]) {\n      console.error(\n        `No handler for event ${event}, payload: ${JSON.stringify(payload)}`\n      );\n      return;\n    }\n    this.listeners[event](payload);\n  }\n  static async awaitCommand(event, command, executor) {\n    return new Promise((resolve) => {\n      let commandPayload = null;\n      const handleAndUnsubscribe = (payload) => {\n        this.unsubscribe(event);\n        resolve({ commandPayload, finalPayload: payload });\n      };\n      this.subscribe(event, handleAndUnsubscribe);\n      commandPayload = executor();\n    });\n  }\n  static commandsValid(worldAppSupportedCommands) {\n    let allCommandsValid = true;\n    Object.entries(this.miniKitCommandVersion).forEach(\n      ([minikitCommandName, version]) => {\n        const commandInput = worldAppSupportedCommands.find(\n          (command) => command.name === minikitCommandName\n        );\n        let isCommandValid = false;\n        if (!commandInput) {\n          console.warn(\n            `Command ${minikitCommandName} is not supported by the app. Try updating the app version`\n          );\n        } else {\n          if (commandInput.supported_versions.includes(version)) {\n            _MiniKit.isCommandAvailable[minikitCommandName] = true;\n            isCommandValid = true;\n          } else {\n            isCommandValid = true;\n            console.warn(\n              `Command ${minikitCommandName} version ${version} is not supported by the app. Supported versions: ${commandInput.supported_versions.join(\", \")}. This is not an error, but it is recommended to update the World App version.`\n            );\n            _MiniKit.isCommandAvailable[minikitCommandName] = isCommandValid;\n          }\n        }\n        if (!isCommandValid) {\n          allCommandsValid = false;\n        }\n      }\n    );\n    return allCommandsValid;\n  }\n  static install(appId) {\n    if (typeof window === \"undefined\" || Boolean(window.MiniKit)) {\n      return {\n        success: false,\n        errorCode: \"already_installed\" /* AlreadyInstalled */,\n        errorMessage: MiniKitInstallErrorMessage[\"already_installed\" /* AlreadyInstalled */]\n      };\n    }\n    if (!appId) {\n      console.warn(\"App ID not provided during install\");\n    } else {\n      _MiniKit.appId = appId;\n    }\n    if (!window.WorldApp) {\n      return {\n        success: false,\n        errorCode: \"outside_of_worldapp\" /* OutsideOfWorldApp */,\n        errorMessage: MiniKitInstallErrorMessage[\"outside_of_worldapp\" /* OutsideOfWorldApp */]\n      };\n    }\n    _MiniKit.user.optedIntoOptionalAnalytics = window.WorldApp.is_optional_analytics;\n    _MiniKit.user.deviceOS = window.WorldApp.device_os;\n    _MiniKit.user.worldAppVersion = window.WorldApp.world_app_version;\n    _MiniKit.deviceProperties.safeAreaInsets = window.WorldApp.safe_area_insets;\n    _MiniKit.deviceProperties.deviceOS = window.WorldApp.device_os;\n    _MiniKit.deviceProperties.worldAppVersion = window.WorldApp.world_app_version;\n    _MiniKit.location = mapWorldAppLaunchLocation(window.WorldApp.location);\n    try {\n      window.MiniKit = _MiniKit;\n      this.sendInit();\n    } catch (error) {\n      console.error(\n        MiniKitInstallErrorMessage[\"unknown\" /* Unknown */],\n        error\n      );\n      return {\n        success: false,\n        errorCode: \"unknown\" /* Unknown */,\n        errorMessage: MiniKitInstallErrorMessage[\"unknown\" /* Unknown */]\n      };\n    }\n    _MiniKit.isReady = true;\n    setupMicrophone();\n    if (!this.commandsValid(window.WorldApp.supported_commands)) {\n      return {\n        success: false,\n        errorCode: \"app_out_of_date\" /* AppOutOfDate */,\n        errorMessage: MiniKitInstallErrorMessage[\"app_out_of_date\" /* AppOutOfDate */]\n      };\n    }\n    return { success: true };\n  }\n  static isInstalled(debug) {\n    const isInstalled = _MiniKit.isReady && Boolean(window.MiniKit);\n    if (!isInstalled)\n      console.error(\n        \"MiniKit is not installed. Make sure you're running the application inside of World App\"\n      );\n    if (debug && isInstalled) console.log(\"MiniKit is alive!\");\n    return isInstalled;\n  }\n};\n_MiniKit.MINIKIT_VERSION = 1;\n_MiniKit.MINIKIT_MINOR_VERSION = 96;\n_MiniKit.miniKitCommandVersion = {\n  [\"verify\" /* Verify */]: 1,\n  [\"pay\" /* Pay */]: 1,\n  [\"wallet-auth\" /* WalletAuth */]: 2,\n  [\"send-transaction\" /* SendTransaction */]: 1,\n  [\"sign-message\" /* SignMessage */]: 1,\n  [\"sign-typed-data\" /* SignTypedData */]: 1,\n  [\"share-contacts\" /* ShareContacts */]: 1,\n  [\"request-permission\" /* RequestPermission */]: 1,\n  [\"get-permissions\" /* GetPermissions */]: 1,\n  [\"send-haptic-feedback\" /* SendHapticFeedback */]: 1,\n  [\"share\" /* Share */]: 1,\n  [\"chat\" /* Chat */]: 1\n};\n_MiniKit.isCommandAvailable = {\n  [\"verify\" /* Verify */]: false,\n  [\"pay\" /* Pay */]: false,\n  [\"wallet-auth\" /* WalletAuth */]: false,\n  [\"send-transaction\" /* SendTransaction */]: false,\n  [\"sign-message\" /* SignMessage */]: false,\n  [\"sign-typed-data\" /* SignTypedData */]: false,\n  [\"share-contacts\" /* ShareContacts */]: false,\n  [\"request-permission\" /* RequestPermission */]: false,\n  [\"get-permissions\" /* GetPermissions */]: false,\n  [\"send-haptic-feedback\" /* SendHapticFeedback */]: false,\n  [\"share\" /* Share */]: false,\n  [\"chat\" /* Chat */]: false\n};\n_MiniKit.listeners = {\n  [\"miniapp-verify-action\" /* MiniAppVerifyAction */]: () => {\n  },\n  [\"miniapp-payment\" /* MiniAppPayment */]: () => {\n  },\n  [\"miniapp-wallet-auth\" /* MiniAppWalletAuth */]: () => {\n  },\n  [\"miniapp-send-transaction\" /* MiniAppSendTransaction */]: () => {\n  },\n  [\"miniapp-sign-message\" /* MiniAppSignMessage */]: () => {\n  },\n  [\"miniapp-sign-typed-data\" /* MiniAppSignTypedData */]: () => {\n  },\n  [\"miniapp-share-contacts\" /* MiniAppShareContacts */]: () => {\n  },\n  [\"miniapp-request-permission\" /* MiniAppRequestPermission */]: () => {\n  },\n  [\"miniapp-get-permissions\" /* MiniAppGetPermissions */]: () => {\n  },\n  [\"miniapp-send-haptic-feedback\" /* MiniAppSendHapticFeedback */]: () => {\n  },\n  [\"miniapp-share\" /* MiniAppShare */]: () => {\n  },\n  [\"miniapp-microphone\" /* MiniAppMicrophone */]: () => {\n  },\n  [\"miniapp-chat\" /* MiniAppChat */]: () => {\n  }\n};\n_MiniKit.appId = null;\n_MiniKit.user = {};\n_MiniKit.deviceProperties = {};\n_MiniKit.location = null;\n_MiniKit.isReady = false;\n_MiniKit.getUserByAddress = async (address) => {\n  const userProfile = await getUserProfile(\n    address ?? _MiniKit.user.walletAddress\n  );\n  return {\n    walletAddress: address ?? _MiniKit.user.walletAddress,\n    username: userProfile.username,\n    profilePictureUrl: userProfile.profile_picture_url\n  };\n};\n_MiniKit.getUserByUsername = async (username) => {\n  const res = await fetch(\n    `https://usernames.worldcoin.org/api/v1/${username}`,\n    {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    }\n  );\n  const user = await res.json();\n  return {\n    walletAddress: user.address,\n    username: user.username,\n    profilePictureUrl: user.profile_picture_url\n  };\n};\n// This is a helper function for developers to generate MiniApp URLs\n_MiniKit.getMiniAppUrl = (appId, path) => {\n  const baseUrl = new URL(\"https://world.org/mini-app\");\n  baseUrl.searchParams.append(\"app_id\", appId);\n  if (path) {\n    const fullPath = path.startsWith(\"/\") ? path : `/${path}`;\n    baseUrl.searchParams.append(\"path\", encodeURIComponent(fullPath));\n  }\n  return baseUrl.toString();\n};\n// Opens the profile card for a given username or wallet address\n_MiniKit.showProfileCard = (username, walletAddress) => {\n  if (!username && !walletAddress) {\n    console.error(\n      \"Either username or walletAddress must be provided to show profile card\"\n    );\n    return;\n  }\n  if (username) {\n    window.open(\n      `worldapp://profile?username=${encodeURIComponent(username)}`\n    );\n    return;\n  } else {\n    window.open(\n      `worldapp://profile?address=${encodeURIComponent(walletAddress || \"\")}`\n    );\n  }\n};\n// Simply re-exporting the existing function\n_MiniKit.getUserInfo = _MiniKit.getUserByAddress;\n_MiniKit.commands = {\n  verify: (payload) => {\n    if (typeof window === \"undefined\" || !_MiniKit.isCommandAvailable[\"verify\" /* Verify */]) {\n      console.error(\n        \"'verify' command is unavailable. Check MiniKit.install() or update the app version\"\n      );\n      return null;\n    }\n    const timestamp = (/* @__PURE__ */ new Date()).toISOString();\n    const eventPayload = {\n      action: (0,_worldcoin_idkit_core_hashing__WEBPACK_IMPORTED_MODULE_7__.encodeAction)(payload.action),\n      signal: (0,_worldcoin_idkit_core_hashing__WEBPACK_IMPORTED_MODULE_7__.generateSignal)(payload.signal).digest,\n      verification_level: payload.verification_level || _worldcoin_idkit_core__WEBPACK_IMPORTED_MODULE_0__.VerificationLevel.Orb,\n      timestamp\n    };\n    sendMiniKitEvent({\n      command: \"verify\" /* Verify */,\n      version: _MiniKit.miniKitCommandVersion[\"verify\" /* Verify */],\n      payload: eventPayload\n    });\n    return eventPayload;\n  },\n  pay: (payload) => {\n    if (typeof window === \"undefined\" || !_MiniKit.isCommandAvailable[\"pay\" /* Pay */]) {\n      console.error(\n        \"'pay' command is unavailable. Check MiniKit.install() or update the app version\"\n      );\n      return null;\n    }\n    if (!validatePaymentPayload(payload)) {\n      return null;\n    }\n    const eventPayload = {\n      ...payload,\n      network: \"worldchain\" /* WorldChain */\n    };\n    sendMiniKitEvent({\n      command: \"pay\" /* Pay */,\n      version: _MiniKit.miniKitCommandVersion[\"pay\" /* Pay */],\n      payload: eventPayload\n    });\n    return eventPayload;\n  },\n  walletAuth: (payload) => {\n    if (typeof window === \"undefined\" || !_MiniKit.isCommandAvailable[\"wallet-auth\" /* WalletAuth */]) {\n      console.error(\n        \"'walletAuth' command is unavailable. Check MiniKit.install() or update the app version\"\n      );\n      return null;\n    }\n    const validationResult = validateWalletAuthCommandInput(payload);\n    if (!validationResult.valid) {\n      console.error(\n        \"Failed to validate wallet auth input:\\n\\n -->\",\n        validationResult.message\n      );\n      return null;\n    }\n    let protocol = null;\n    try {\n      const currentUrl = new URL(window.location.href);\n      protocol = currentUrl.protocol.split(\":\")[0];\n    } catch (error) {\n      console.error(\"Failed to get current URL\", error);\n      return null;\n    }\n    const siweMessage = generateSiweMessage({\n      scheme: protocol,\n      domain: window.location.host,\n      statement: payload.statement ?? void 0,\n      uri: window.location.href,\n      version: \"1\",\n      chain_id: 480,\n      nonce: payload.nonce,\n      issued_at: (/* @__PURE__ */ new Date()).toISOString(),\n      expiration_time: payload.expirationTime?.toISOString() ?? void 0,\n      not_before: payload.notBefore?.toISOString() ?? void 0,\n      request_id: payload.requestId ?? void 0\n    });\n    const walletAuthPayload = { siweMessage };\n    const walletAuthVersion = _MiniKit.user.worldAppVersion && _MiniKit.user.worldAppVersion > 2087900 ? _MiniKit.miniKitCommandVersion[\"wallet-auth\" /* WalletAuth */] : 1;\n    sendMiniKitEvent({\n      command: \"wallet-auth\" /* WalletAuth */,\n      version: walletAuthVersion,\n      payload: walletAuthPayload\n    });\n    return walletAuthPayload;\n  },\n  sendTransaction: (payload) => {\n    if (typeof window === \"undefined\" || !_MiniKit.isCommandAvailable[\"send-transaction\" /* SendTransaction */]) {\n      console.error(\n        \"'sendTransaction' command is unavailable. Check MiniKit.install() or update the app version\"\n      );\n      return null;\n    }\n    payload.formatPayload = payload.formatPayload !== false;\n    const validatedPayload = validateSendTransactionPayload(payload);\n    sendMiniKitEvent({\n      command: \"send-transaction\" /* SendTransaction */,\n      version: _MiniKit.miniKitCommandVersion[\"send-transaction\" /* SendTransaction */],\n      payload: validatedPayload\n    });\n    return validatedPayload;\n  },\n  signMessage: (payload) => {\n    if (typeof window === \"undefined\" || !_MiniKit.isCommandAvailable[\"sign-message\" /* SignMessage */]) {\n      console.error(\n        \"'signMessage' command is unavailable. Check MiniKit.install() or update the app version\"\n      );\n      return null;\n    }\n    sendMiniKitEvent({\n      command: \"sign-message\" /* SignMessage */,\n      version: _MiniKit.miniKitCommandVersion[\"sign-message\" /* SignMessage */],\n      payload\n    });\n    return payload;\n  },\n  signTypedData: (payload) => {\n    if (typeof window === \"undefined\" || !_MiniKit.isCommandAvailable[\"sign-typed-data\" /* SignTypedData */]) {\n      console.error(\n        \"'signTypedData' command is unavailable. Check MiniKit.install() or update the app version\"\n      );\n      return null;\n    }\n    if (!payload.chainId) {\n      payload.chainId = 480;\n    }\n    sendMiniKitEvent({\n      command: \"sign-typed-data\" /* SignTypedData */,\n      version: _MiniKit.miniKitCommandVersion[\"sign-typed-data\" /* SignTypedData */],\n      payload\n    });\n    return payload;\n  },\n  shareContacts: (payload) => {\n    if (typeof window === \"undefined\" || !_MiniKit.isCommandAvailable[\"share-contacts\" /* ShareContacts */]) {\n      console.error(\n        \"'shareContacts' command is unavailable. Check MiniKit.install() or update the app version\"\n      );\n      return null;\n    }\n    sendMiniKitEvent({\n      command: \"share-contacts\" /* ShareContacts */,\n      version: _MiniKit.miniKitCommandVersion[\"share-contacts\" /* ShareContacts */],\n      payload\n    });\n    return payload;\n  },\n  requestPermission: (payload) => {\n    if (typeof window === \"undefined\" || !_MiniKit.isCommandAvailable[\"request-permission\" /* RequestPermission */]) {\n      console.error(\n        \"'requestPermission' command is unavailable. Check MiniKit.install() or update the app version\"\n      );\n      return null;\n    }\n    sendMiniKitEvent({\n      command: \"request-permission\" /* RequestPermission */,\n      version: _MiniKit.miniKitCommandVersion[\"request-permission\" /* RequestPermission */],\n      payload\n    });\n    return payload;\n  },\n  getPermissions: () => {\n    if (typeof window === \"undefined\" || !_MiniKit.isCommandAvailable[\"get-permissions\" /* GetPermissions */]) {\n      console.error(\n        \"'getPermissions' command is unavailable. Check MiniKit.install() or update the app version\"\n      );\n      return null;\n    }\n    sendMiniKitEvent({\n      command: \"get-permissions\" /* GetPermissions */,\n      version: _MiniKit.miniKitCommandVersion[\"get-permissions\" /* GetPermissions */],\n      payload: {}\n    });\n    return {\n      status: \"sent\"\n    };\n  },\n  sendHapticFeedback: (payload) => {\n    if (typeof window === \"undefined\" || !_MiniKit.isCommandAvailable[\"send-haptic-feedback\" /* SendHapticFeedback */]) {\n      console.error(\n        \"'sendHapticFeedback' command is unavailable. Check MiniKit.install() or update the app version\"\n      );\n      return null;\n    }\n    sendMiniKitEvent({\n      command: \"send-haptic-feedback\" /* SendHapticFeedback */,\n      version: _MiniKit.miniKitCommandVersion[\"send-haptic-feedback\" /* SendHapticFeedback */],\n      payload\n    });\n    return payload;\n  },\n  // We return share input here because the payload is formatted asynchronously\n  share: (payload) => {\n    if (typeof window === \"undefined\" || !_MiniKit.isCommandAvailable[\"share\" /* Share */]) {\n      console.error(\n        \"'share' command is unavailable. Check MiniKit.install() or update the app version\"\n      );\n      return null;\n    }\n    if (_MiniKit.deviceProperties.deviceOS === \"ios\" && typeof navigator !== \"undefined\") {\n      sendMiniKitEvent({\n        command: \"share\" /* Share */,\n        version: _MiniKit.miniKitCommandVersion[\"share\" /* Share */],\n        payload\n      });\n      navigator.share(payload);\n    } else {\n      formatShareInput(payload).then((formattedResult) => {\n        sendMiniKitEvent({\n          command: \"share\" /* Share */,\n          version: _MiniKit.miniKitCommandVersion[\"share\" /* Share */],\n          payload: formattedResult\n        });\n      }).catch((error) => {\n        console.error(\"Failed to format share input\", error);\n      });\n      _MiniKit.subscribe(\"miniapp-share\" /* MiniAppShare */, (payload2) => {\n        console.log(\"Share Response\", payload2);\n      });\n    }\n    return payload;\n  },\n  chat: (payload) => {\n    if (typeof window === \"undefined\" || !_MiniKit.isCommandAvailable[\"chat\" /* Chat */]) {\n      console.error(\n        \"'chat' command is unavailable. Check MiniKit.install() or update the app version\"\n      );\n      return null;\n    }\n    if (payload.message.length === 0) {\n      console.error(\"'chat' command requires a non-empty message\");\n      return null;\n    }\n    sendMiniKitEvent({\n      command: \"chat\" /* Chat */,\n      version: _MiniKit.miniKitCommandVersion[\"chat\" /* Chat */],\n      payload\n    });\n    return payload;\n  }\n};\n/**\n * This object contains async versions of all the commands.\n * Instead of using event listeners, you can just `await` these.\n *\n * They return a standardized object\n *\n * commandPayload - object returned by the command function\n *\n * finalPayload - object returned by the event listener, or in other words, WorldApp response\n */\n_MiniKit.commandsAsync = {\n  verify: async (payload) => {\n    return new Promise(async (resolve, reject) => {\n      try {\n        const response = await _MiniKit.awaitCommand(\n          \"miniapp-verify-action\" /* MiniAppVerifyAction */,\n          \"verify\" /* Verify */,\n          () => _MiniKit.commands.verify(payload)\n        );\n        if (response.finalPayload.status === \"success\" && response.finalPayload.verification_level === _worldcoin_idkit_core__WEBPACK_IMPORTED_MODULE_0__.VerificationLevel.Orb) {\n          response.finalPayload.proof = await compressAndPadProof(\n            response.finalPayload.proof\n          );\n        }\n        resolve(response);\n      } catch (error) {\n        reject(error);\n      }\n    });\n  },\n  pay: async (payload) => {\n    return new Promise(async (resolve, reject) => {\n      try {\n        const response = await _MiniKit.awaitCommand(\n          \"miniapp-payment\" /* MiniAppPayment */,\n          \"pay\" /* Pay */,\n          () => _MiniKit.commands.pay(payload)\n        );\n        resolve(response);\n      } catch (error) {\n        reject(error);\n      }\n    });\n  },\n  walletAuth: async (payload) => {\n    return new Promise(async (resolve, reject) => {\n      try {\n        const response = await _MiniKit.awaitCommand(\n          \"miniapp-wallet-auth\" /* MiniAppWalletAuth */,\n          \"wallet-auth\" /* WalletAuth */,\n          () => _MiniKit.commands.walletAuth(payload)\n        );\n        return resolve(response);\n      } catch (error) {\n        reject(error);\n      }\n    });\n  },\n  sendTransaction: async (payload) => {\n    return new Promise(async (resolve, reject) => {\n      try {\n        const response = await _MiniKit.awaitCommand(\n          \"miniapp-send-transaction\" /* MiniAppSendTransaction */,\n          \"send-transaction\" /* SendTransaction */,\n          () => _MiniKit.commands.sendTransaction(payload)\n        );\n        return resolve(response);\n      } catch (error) {\n        reject(error);\n      }\n    });\n  },\n  signMessage: async (payload) => {\n    return new Promise(async (resolve, reject) => {\n      try {\n        const response = await _MiniKit.awaitCommand(\n          \"miniapp-sign-message\" /* MiniAppSignMessage */,\n          \"sign-message\" /* SignMessage */,\n          () => _MiniKit.commands.signMessage(payload)\n        );\n        return resolve(response);\n      } catch (error) {\n        reject(error);\n      }\n    });\n  },\n  signTypedData: async (payload) => {\n    return new Promise(async (resolve, reject) => {\n      try {\n        const response = await _MiniKit.awaitCommand(\n          \"miniapp-sign-typed-data\" /* MiniAppSignTypedData */,\n          \"sign-typed-data\" /* SignTypedData */,\n          () => _MiniKit.commands.signTypedData(payload)\n        );\n        return resolve(response);\n      } catch (error) {\n        reject(error);\n      }\n    });\n  },\n  shareContacts: async (payload) => {\n    return new Promise(async (resolve, reject) => {\n      try {\n        const response = await _MiniKit.awaitCommand(\n          \"miniapp-share-contacts\" /* MiniAppShareContacts */,\n          \"share-contacts\" /* ShareContacts */,\n          () => _MiniKit.commands.shareContacts(payload)\n        );\n        return resolve(response);\n      } catch (error) {\n        reject(error);\n      }\n    });\n  },\n  requestPermission: async (payload) => {\n    return new Promise(async (resolve, reject) => {\n      try {\n        const response = await _MiniKit.awaitCommand(\n          \"miniapp-request-permission\" /* MiniAppRequestPermission */,\n          \"request-permission\" /* RequestPermission */,\n          () => _MiniKit.commands.requestPermission(payload)\n        );\n        resolve(response);\n      } catch (error) {\n        reject(error);\n      }\n    });\n  },\n  getPermissions: async () => {\n    return new Promise(async (resolve, reject) => {\n      try {\n        const response = await _MiniKit.awaitCommand(\n          \"miniapp-get-permissions\" /* MiniAppGetPermissions */,\n          \"get-permissions\" /* GetPermissions */,\n          () => _MiniKit.commands.getPermissions()\n        );\n        resolve(response);\n      } catch (error) {\n        reject(error);\n      }\n    });\n  },\n  sendHapticFeedback: async (payload) => {\n    return new Promise(async (resolve, reject) => {\n      try {\n        const response = await _MiniKit.awaitCommand(\n          \"miniapp-send-haptic-feedback\" /* MiniAppSendHapticFeedback */,\n          \"send-haptic-feedback\" /* SendHapticFeedback */,\n          () => _MiniKit.commands.sendHapticFeedback(payload)\n        );\n        resolve(response);\n      } catch (error) {\n        reject(error);\n      }\n    });\n  },\n  share: async (payload) => {\n    return new Promise(async (resolve, reject) => {\n      try {\n        const response = await _MiniKit.awaitCommand(\n          \"miniapp-share\" /* MiniAppShare */,\n          \"share\" /* Share */,\n          () => _MiniKit.commands.share(payload)\n        );\n        resolve({\n          commandPayload: response.commandPayload,\n          finalPayload: response.finalPayload\n        });\n      } catch (error) {\n        reject(error);\n      }\n    });\n  },\n  chat: async (payload) => {\n    return new Promise(async (resolve, reject) => {\n      try {\n        const response = await _MiniKit.awaitCommand(\n          \"miniapp-chat\" /* MiniAppChat */,\n          \"chat\" /* Chat */,\n          () => _MiniKit.commands.chat(payload)\n        );\n        resolve({\n          commandPayload: response.commandPayload,\n          finalPayload: response.finalPayload\n        });\n      } catch (error) {\n        reject(error);\n      }\n    });\n  }\n};\nvar MiniKit = _MiniKit;\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHdvcmxkY29pbittaW5pa2l0LWpzQDEuOS45X0B0eXBlcytyZWFjdEAxOS4yLjlfcmVhY3RAMTkuMi4zX3R5cGVzY3JpcHRANS45LjNfdmllbUAyLjIzLjVfdHlwZXNjcmlwdEA1LjkuM18vbm9kZV9tb2R1bGVzL0B3b3JsZGNvaW4vbWluaWtpdC1qcy9idWlsZC9jaHVuay1WV1g3U0VMRi5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNzRDtBQUNrQjtBQUN4RTtBQUNBLEdBQUcsZ0VBQWE7QUFDaEIsR0FBRyxnRUFBYTtBQUNoQixHQUFHLGdFQUFhO0FBQ2hCLEdBQUcsZ0VBQWE7QUFDaEIsR0FBRyxnRUFBYTtBQUNoQixHQUFHLGdFQUFhO0FBQ2hCLEdBQUcsZ0VBQWE7QUFDaEIsR0FBRyxnRUFBYTtBQUNoQixHQUFHLGdFQUFhO0FBQ2hCLEdBQUcsZ0VBQWE7QUFDaEIsR0FBRyxnRUFBYTtBQUNoQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyx5QkFBeUI7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLCtCQUErQjtBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyw0QkFBNEI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsaUNBQWlDO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtB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TjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsZ0NBQWdDO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsT0FBTztBQUNQO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1R0FBdUcsb0VBQWlCO0FBQ3hIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxRQUFRO0FBQ1I7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxRQUFRO0FBQ1I7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBNENFIiwic291cmNlcyI6WyIvVXNlcnMvam9uZ3dvb2traW0vRGVza3RvcC93b3JsZC1jb21tdW5pdHkvZnJvbnRlbmQvbm9kZV9tb2R1bGVzLy5wbnBtL0B3b3JsZGNvaW4rbWluaWtpdC1qc0AxLjkuOV9AdHlwZXMrcmVhY3RAMTkuMi45X3JlYWN0QDE5LjIuM190eXBlc2NyaXB0QDUuOS4zX3ZpZW1AMi4yMy41X3R5cGVzY3JpcHRANS45LjNfL25vZGVfbW9kdWxlcy9Ad29ybGRjb2luL21pbmlraXQtanMvYnVpbGQvY2h1bmstVldYN1NFTEYuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gdHlwZXMvZXJyb3JzLnRzXG5pbXBvcnQgeyBBcHBFcnJvckNvZGVzIH0gZnJvbSBcIkB3b3JsZGNvaW4vaWRraXQtY29yZVwiO1xuaW1wb3J0IHsgQXBwRXJyb3JDb2RlcyBhcyBBcHBFcnJvckNvZGVzMiB9IGZyb20gXCJAd29ybGRjb2luL2lka2l0LWNvcmVcIjtcbnZhciBWZXJpZmljYXRpb25FcnJvck1lc3NhZ2UgPSB7XG4gIFtBcHBFcnJvckNvZGVzLlZlcmlmaWNhdGlvblJlamVjdGVkXTogXCJZb3UndmUgY2FuY2VsbGVkIHRoZSByZXF1ZXN0IGluIFdvcmxkIEFwcC5cIixcbiAgW0FwcEVycm9yQ29kZXMuTWF4VmVyaWZpY2F0aW9uc1JlYWNoZWRdOiBcIllvdSBoYXZlIGFscmVhZHkgdmVyaWZpZWQgdGhlIG1heGltdW0gbnVtYmVyIG9mIHRpbWVzIGZvciB0aGlzIGFjdGlvbi5cIixcbiAgW0FwcEVycm9yQ29kZXMuQ3JlZGVudGlhbFVuYXZhaWxhYmxlXTogXCJJdCBzZWVtcyB5b3UgZG8gbm90IGhhdmUgdGhlIHZlcmlmaWNhdGlvbiBsZXZlbCByZXF1aXJlZCBieSB0aGlzIGFwcC5cIixcbiAgW0FwcEVycm9yQ29kZXMuTWFsZm9ybWVkUmVxdWVzdF06IFwiVGhlcmUgd2FzIGEgcHJvYmxlbSB3aXRoIHRoaXMgcmVxdWVzdC4gUGxlYXNlIHRyeSBhZ2FpbiBvciBjb250YWN0IHRoZSBhcHAgb3duZXIuXCIsXG4gIFtBcHBFcnJvckNvZGVzLkludmFsaWROZXR3b3JrXTogXCJJbnZhbGlkIG5ldHdvcmsuIElmIHlvdSBhcmUgdGhlIGFwcCBvd25lciwgdmlzaXQgZG9jcy53b3JsZGNvaW4ub3JnL3Rlc3QgZm9yIGRldGFpbHMuXCIsXG4gIFtBcHBFcnJvckNvZGVzLkluY2x1c2lvblByb29mRmFpbGVkXTogXCJUaGVyZSB3YXMgYW4gaXNzdWUgZmV0Y2hpbmcgeW91ciBjcmVkZW50aWFsLiBQbGVhc2UgdHJ5IGFnYWluLlwiLFxuICBbQXBwRXJyb3JDb2Rlcy5JbmNsdXNpb25Qcm9vZlBlbmRpbmddOiBcIllvdXIgaWRlbnRpdHkgaXMgc3RpbGwgYmVpbmcgcmVnaXN0ZXJlZC4gUGxlYXNlIHdhaXQgYSBmZXcgbWludXRlcyBhbmQgdHJ5IGFnYWluLlwiLFxuICBbQXBwRXJyb3JDb2Rlcy5VbmV4cGVjdGVkUmVzcG9uc2VdOiBcIlVuZXhwZWN0ZWQgcmVzcG9uc2UgZnJvbSB5b3VyIHdhbGxldC4gUGxlYXNlIHRyeSBhZ2Fpbi5cIixcbiAgW0FwcEVycm9yQ29kZXMuRmFpbGVkQnlIb3N0QXBwXTogXCJWZXJpZmljYXRpb24gZmFpbGVkIGJ5IHRoZSBhcHAuIFBsZWFzZSBjb250YWN0IHRoZSBhcHAgb3duZXIgZm9yIGRldGFpbHMuXCIsXG4gIFtBcHBFcnJvckNvZGVzLkdlbmVyaWNFcnJvcl06IFwiU29tZXRoaW5nIHVuZXhwZWN0ZWQgd2VudCB3cm9uZy4gUGxlYXNlIHRyeSBhZ2Fpbi5cIixcbiAgW0FwcEVycm9yQ29kZXMuQ29ubmVjdGlvbkZhaWxlZF06IFwiQ29ubmVjdGlvbiB0byB5b3VyIHdhbGxldCBmYWlsZWQuIFBsZWFzZSB0cnkgYWdhaW4uXCJcbn07XG52YXIgUGF5bWVudEVycm9yQ29kZXMgPSAvKiBAX19QVVJFX18gKi8gKChQYXltZW50RXJyb3JDb2RlczIpID0+IHtcbiAgUGF5bWVudEVycm9yQ29kZXMyW1wiSW5wdXRFcnJvclwiXSA9IFwiaW5wdXRfZXJyb3JcIjtcbiAgUGF5bWVudEVycm9yQ29kZXMyW1wiVXNlclJlamVjdGVkXCJdID0gXCJ1c2VyX3JlamVjdGVkXCI7XG4gIFBheW1lbnRFcnJvckNvZGVzMltcIlBheW1lbnRSZWplY3RlZFwiXSA9IFwicGF5bWVudF9yZWplY3RlZFwiO1xuICBQYXltZW50RXJyb3JDb2RlczJbXCJJbnZhbGlkUmVjZWl2ZXJcIl0gPSBcImludmFsaWRfcmVjZWl2ZXJcIjtcbiAgUGF5bWVudEVycm9yQ29kZXMyW1wiSW5zdWZmaWNpZW50QmFsYW5jZVwiXSA9IFwiaW5zdWZmaWNpZW50X2JhbGFuY2VcIjtcbiAgUGF5bWVudEVycm9yQ29kZXMyW1wiVHJhbnNhY3Rpb25GYWlsZWRcIl0gPSBcInRyYW5zYWN0aW9uX2ZhaWxlZFwiO1xuICBQYXltZW50RXJyb3JDb2RlczJbXCJHZW5lcmljRXJyb3JcIl0gPSBcImdlbmVyaWNfZXJyb3JcIjtcbiAgUGF5bWVudEVycm9yQ29kZXMyW1wiVXNlckJsb2NrZWRcIl0gPSBcInVzZXJfYmxvY2tlZFwiO1xuICByZXR1cm4gUGF5bWVudEVycm9yQ29kZXMyO1xufSkoUGF5bWVudEVycm9yQ29kZXMgfHwge30pO1xudmFyIFBheW1lbnRFcnJvck1lc3NhZ2UgPSB7XG4gIFtcImlucHV0X2Vycm9yXCIgLyogSW5wdXRFcnJvciAqL106IFwiVGhlcmUgd2FzIGEgcHJvYmxlbSB3aXRoIHRoaXMgcmVxdWVzdC4gUGxlYXNlIHRyeSBhZ2FpbiBvciBjb250YWN0IHRoZSBhcHAgb3duZXIuXCIsXG4gIFtcInVzZXJfcmVqZWN0ZWRcIiAvKiBVc2VyUmVqZWN0ZWQgKi9dOiBcIllvdSBoYXZlIGNhbmNlbGxlZCB0aGUgcGF5bWVudCBpbiBXb3JsZCBBcHAuXCIsXG4gIFtcInBheW1lbnRfcmVqZWN0ZWRcIiAvKiBQYXltZW50UmVqZWN0ZWQgKi9dOiBcIllvdSd2ZSBjYW5jZWxsZWQgdGhlIHBheW1lbnQgaW4gV29ybGQgQXBwLlwiLFxuICBbXCJpbnZhbGlkX3JlY2VpdmVyXCIgLyogSW52YWxpZFJlY2VpdmVyICovXTogXCJUaGUgcmVjZWl2ZXIgYWRkcmVzcyBpcyBpbnZhbGlkLiBQbGVhc2UgY29udGFjdCB0aGUgYXBwIG93bmVyLlwiLFxuICBbXCJpbnN1ZmZpY2llbnRfYmFsYW5jZVwiIC8qIEluc3VmZmljaWVudEJhbGFuY2UgKi9dOiBcIllvdSBkbyBub3QgaGF2ZSBlbm91Z2ggYmFsYW5jZSB0byBjb21wbGV0ZSB0aGlzIHRyYW5zYWN0aW9uLlwiLFxuICBbXCJ0cmFuc2FjdGlvbl9mYWlsZWRcIiAvKiBUcmFuc2FjdGlvbkZhaWxlZCAqL106IFwiVGhlIHRyYW5zYWN0aW9uIGZhaWxlZC4gUGxlYXNlIHRyeSBhZ2Fpbi5cIixcbiAgW1wiZ2VuZXJpY19lcnJvclwiIC8qIEdlbmVyaWNFcnJvciAqL106IFwiU29tZXRoaW5nIHVuZXhwZWN0ZWQgd2VudCB3cm9uZy4gUGxlYXNlIHRyeSBhZ2Fpbi5cIixcbiAgW1widXNlcl9ibG9ja2VkXCIgLyogVXNlckJsb2NrZWQgKi9dOiBcIlVzZXIncyByZWdpb24gaXMgYmxvY2tlZCBmcm9tIG1ha2luZyBwYXltZW50cy5cIlxufTtcbnZhciBQYXltZW50VmFsaWRhdGlvbkVycm9ycyA9IC8qIEBfX1BVUkVfXyAqLyAoKFBheW1lbnRWYWxpZGF0aW9uRXJyb3JzMikgPT4ge1xuICBQYXltZW50VmFsaWRhdGlvbkVycm9yczJbXCJNYWxmb3JtZWRSZXF1ZXN0XCJdID0gXCJUaGVyZSB3YXMgYSBwcm9ibGVtIHdpdGggdGhpcyByZXF1ZXN0LiBQbGVhc2UgdHJ5IGFnYWluIG9yIGNvbnRhY3QgdGhlIGFwcCBvd25lci5cIjtcbiAgUGF5bWVudFZhbGlkYXRpb25FcnJvcnMyW1wiSW52YWxpZFRva2VuQWRkcmVzc1wiXSA9IFwiVGhlIHRva2VuIGFkZHJlc3MgaXMgaW52YWxpZC4gUGxlYXNlIGNvbnRhY3QgdGhlIGFwcCBvd25lci5cIjtcbiAgUGF5bWVudFZhbGlkYXRpb25FcnJvcnMyW1wiSW52YWxpZEFwcElkXCJdID0gXCJUaGUgYXBwIElEIGlzIGludmFsaWQuIFBsZWFzZSBjb250YWN0IHRoZSBhcHAgb3duZXIuXCI7XG4gIFBheW1lbnRWYWxpZGF0aW9uRXJyb3JzMltcIkR1cGxpY2F0ZVJlZmVyZW5jZVwiXSA9IFwiVGhpcyByZWZlcmVuY2UgSUQgYWxyZWFkeSBleGlzdHMgcGxlYXNlIGdlbmVyYXRlIGEgbmV3IG9uZSBhbmQgdHJ5IGFnYWluLlwiO1xuICByZXR1cm4gUGF5bWVudFZhbGlkYXRpb25FcnJvcnMyO1xufSkoUGF5bWVudFZhbGlkYXRpb25FcnJvcnMgfHwge30pO1xudmFyIFdhbGxldEF1dGhFcnJvckNvZGVzID0gLyogQF9fUFVSRV9fICovICgoV2FsbGV0QXV0aEVycm9yQ29kZXMyKSA9PiB7XG4gIFdhbGxldEF1dGhFcnJvckNvZGVzMltcIk1hbGZvcm1lZFJlcXVlc3RcIl0gPSBcIm1hbGZvcm1lZF9yZXF1ZXN0XCI7XG4gIFdhbGxldEF1dGhFcnJvckNvZGVzMltcIlVzZXJSZWplY3RlZFwiXSA9IFwidXNlcl9yZWplY3RlZFwiO1xuICBXYWxsZXRBdXRoRXJyb3JDb2RlczJbXCJHZW5lcmljRXJyb3JcIl0gPSBcImdlbmVyaWNfZXJyb3JcIjtcbiAgcmV0dXJuIFdhbGxldEF1dGhFcnJvckNvZGVzMjtcbn0pKFdhbGxldEF1dGhFcnJvckNvZGVzIHx8IHt9KTtcbnZhciBXYWxsZXRBdXRoRXJyb3JNZXNzYWdlID0ge1xuICBbXCJtYWxmb3JtZWRfcmVxdWVzdFwiIC8qIE1hbGZvcm1lZFJlcXVlc3QgKi9dOiBcIlByb3ZpZGVkIHBhcmFtZXRlcnMgaW4gdGhlIHJlcXVlc3QgYXJlIGludmFsaWQuXCIsXG4gIFtcInVzZXJfcmVqZWN0ZWRcIiAvKiBVc2VyUmVqZWN0ZWQgKi9dOiBcIlVzZXIgcmVqZWN0ZWQgdGhlIHJlcXVlc3QuXCIsXG4gIFtcImdlbmVyaWNfZXJyb3JcIiAvKiBHZW5lcmljRXJyb3IgKi9dOiBcIlNvbWV0aGluZyB1bmV4cGVjdGVkIHdlbnQgd3JvbmcuXCJcbn07XG52YXIgU2VuZFRyYW5zYWN0aW9uRXJyb3JDb2RlcyA9IC8qIEBfX1BVUkVfXyAqLyAoKFNlbmRUcmFuc2FjdGlvbkVycm9yQ29kZXMyKSA9PiB7XG4gIFNlbmRUcmFuc2FjdGlvbkVycm9yQ29kZXMyW1wiSW52YWxpZE9wZXJhdGlvblwiXSA9IFwiaW52YWxpZF9vcGVyYXRpb25cIjtcbiAgU2VuZFRyYW5zYWN0aW9uRXJyb3JDb2RlczJbXCJVc2VyUmVqZWN0ZWRcIl0gPSBcInVzZXJfcmVqZWN0ZWRcIjtcbiAgU2VuZFRyYW5zYWN0aW9uRXJyb3JDb2RlczJbXCJJbnB1dEVycm9yXCJdID0gXCJpbnB1dF9lcnJvclwiO1xuICBTZW5kVHJhbnNhY3Rpb25FcnJvckNvZGVzMltcIlNpbXVsYXRpb25GYWlsZWRcIl0gPSBcInNpbXVsYXRpb25fZmFpbGVkXCI7XG4gIFNlbmRUcmFuc2FjdGlvbkVycm9yQ29kZXMyW1wiVHJhbnNhY3Rpb25GYWlsZWRcIl0gPSBcInRyYW5zYWN0aW9uX2ZhaWxlZFwiO1xuICBTZW5kVHJhbnNhY3Rpb25FcnJvckNvZGVzMltcIkdlbmVyaWNFcnJvclwiXSA9IFwiZ2VuZXJpY19lcnJvclwiO1xuICBTZW5kVHJhbnNhY3Rpb25FcnJvckNvZGVzMltcIkRpc2FsbG93ZWRPcGVyYXRpb25cIl0gPSBcImRpc2FsbG93ZWRfb3BlcmF0aW9uXCI7XG4gIFNlbmRUcmFuc2FjdGlvbkVycm9yQ29kZXMyW1wiVmFsaWRhdGlvbkVycm9yXCJdID0gXCJ2YWxpZGF0aW9uX2Vycm9yXCI7XG4gIFNlbmRUcmFuc2FjdGlvbkVycm9yQ29kZXMyW1wiSW52YWxpZENvbnRyYWN0XCJdID0gXCJpbnZhbGlkX2NvbnRyYWN0XCI7XG4gIFNlbmRUcmFuc2FjdGlvbkVycm9yQ29kZXMyW1wiTWFsaWNpb3VzT3BlcmF0aW9uXCJdID0gXCJtYWxpY2lvdXNfb3BlcmF0aW9uXCI7XG4gIFNlbmRUcmFuc2FjdGlvbkVycm9yQ29kZXMyW1wiRGFpbHlUeExpbWl0UmVhY2hlZFwiXSA9IFwiZGFpbHlfdHhfbGltaXRfcmVhY2hlZFwiO1xuICBTZW5kVHJhbnNhY3Rpb25FcnJvckNvZGVzMltcIlBlcm1pdHRlZEFtb3VudEV4Y2VlZHNTbGlwcGFnZVwiXSA9IFwicGVybWl0dGVkX2Ftb3VudF9leGNlZWRzX3NsaXBwYWdlXCI7XG4gIFNlbmRUcmFuc2FjdGlvbkVycm9yQ29kZXMyW1wiUGVybWl0dGVkQW1vdW50Tm90Rm91bmRcIl0gPSBcInBlcm1pdHRlZF9hbW91bnRfbm90X2ZvdW5kXCI7XG4gIHJldHVybiBTZW5kVHJhbnNhY3Rpb25FcnJvckNvZGVzMjtcbn0pKFNlbmRUcmFuc2FjdGlvbkVycm9yQ29kZXMgfHwge30pO1xudmFyIFNlbmRUcmFuc2FjdGlvbkVycm9yTWVzc2FnZSA9IHtcbiAgW1wiaW52YWxpZF9vcGVyYXRpb25cIiAvKiBJbnZhbGlkT3BlcmF0aW9uICovXTogXCJUcmFuc2FjdGlvbiBpbmNsdWRlZCBhbiBvcGVyYXRpb24gdGhhdCB3YXMgaW52YWxpZFwiLFxuICBbXCJ1c2VyX3JlamVjdGVkXCIgLyogVXNlclJlamVjdGVkICovXTogXCJVc2VyIHJlamVjdGVkIHRoZSByZXF1ZXN0LlwiLFxuICBbXCJpbnB1dF9lcnJvclwiIC8qIElucHV0RXJyb3IgKi9dOiBcIkludmFsaWQgcGF5bG9hZC5cIixcbiAgW1wic2ltdWxhdGlvbl9mYWlsZWRcIiAvKiBTaW11bGF0aW9uRmFpbGVkICovXTogXCJUaGUgdHJhbnNhY3Rpb24gc2ltdWxhdGlvbiBmYWlsZWQuXCIsXG4gIFtcInZhbGlkYXRpb25fZXJyb3JcIiAvKiBWYWxpZGF0aW9uRXJyb3IgKi9dOiBcIlRoZSB0cmFuc2FjdGlvbiB2YWxpZGF0aW9uIGZhaWxlZC4gUGxlYXNlIHRyeSBhZ2Fpbi5cIixcbiAgW1widHJhbnNhY3Rpb25fZmFpbGVkXCIgLyogVHJhbnNhY3Rpb25GYWlsZWQgKi9dOiBcIlRoZSB0cmFuc2FjdGlvbiBmYWlsZWQuIFBsZWFzZSB0cnkgYWdhaW4gbGF0ZXIuXCIsXG4gIFtcImdlbmVyaWNfZXJyb3JcIiAvKiBHZW5lcmljRXJyb3IgKi9dOiBcIlNvbWV0aGluZyB1bmV4cGVjdGVkIHdlbnQgd3JvbmcuIFBsZWFzZSB0cnkgYWdhaW4uXCIsXG4gIFtcImRpc2FsbG93ZWRfb3BlcmF0aW9uXCIgLyogRGlzYWxsb3dlZE9wZXJhdGlvbiAqL106IFwiVGhlIG9wZXJhdGlvbiByZXF1ZXN0ZWQgaXMgbm90IGFsbG93ZWQuIFBsZWFzZSByZWZlciB0byB0aGUgZG9jcy5cIixcbiAgW1wiaW52YWxpZF9jb250cmFjdFwiIC8qIEludmFsaWRDb250cmFjdCAqL106IFwiVGhlIGNvbnRyYWN0IGFkZHJlc3MgaXMgbm90IGFsbG93ZWQgZm9yIHlvdXIgYXBwbGljYXRpb24uIFBsZWFzZSBjaGVjayB5b3VyIGRldmVsb3BlciBwb3J0YWwgY29uZmlndXJhdGlvbnNcIixcbiAgW1wibWFsaWNpb3VzX29wZXJhdGlvblwiIC8qIE1hbGljaW91c09wZXJhdGlvbiAqL106IFwiVGhlIG9wZXJhdGlvbiByZXF1ZXN0ZWQgaXMgY29uc2lkZXJlZCBtYWxpY2lvdXMuXCIsXG4gIFtcImRhaWx5X3R4X2xpbWl0X3JlYWNoZWRcIiAvKiBEYWlseVR4TGltaXRSZWFjaGVkICovXTogXCJEYWlseSB0cmFuc2FjdGlvbiBsaW1pdCByZWFjaGVkLiBNYXggMTAwIHRyYW5zYWN0aW9ucyBwZXIgZGF5LiBXYWl0IHVudGlsIHRoZSBuZXh0IGRheS5cIixcbiAgW1wicGVybWl0dGVkX2Ftb3VudF9leGNlZWRzX3NsaXBwYWdlXCIgLyogUGVybWl0dGVkQW1vdW50RXhjZWVkc1NsaXBwYWdlICovXTogXCJQZXJtaXR0ZWQgYW1vdW50IGV4Y2VlZHMgc2xpcHBhZ2UuIFlvdSBtdXN0IHNwZW5kIGF0IGxlYXN0IDkwJSBvZiB0aGUgcGVybWl0dGVkIGFtb3VudC5cIixcbiAgW1wicGVybWl0dGVkX2Ftb3VudF9ub3RfZm91bmRcIiAvKiBQZXJtaXR0ZWRBbW91bnROb3RGb3VuZCAqL106IFwiUGVybWl0dGVkIGFtb3VudCBub3QgZm91bmQgaW4gcGVybWl0MiBwYXlsb2FkLlwiXG59O1xudmFyIFNpZ25NZXNzYWdlRXJyb3JDb2RlcyA9IC8qIEBfX1BVUkVfXyAqLyAoKFNpZ25NZXNzYWdlRXJyb3JDb2RlczIpID0+IHtcbiAgU2lnbk1lc3NhZ2VFcnJvckNvZGVzMltcIkludmFsaWRNZXNzYWdlXCJdID0gXCJpbnZhbGlkX21lc3NhZ2VcIjtcbiAgU2lnbk1lc3NhZ2VFcnJvckNvZGVzMltcIlVzZXJSZWplY3RlZFwiXSA9IFwidXNlcl9yZWplY3RlZFwiO1xuICBTaWduTWVzc2FnZUVycm9yQ29kZXMyW1wiR2VuZXJpY0Vycm9yXCJdID0gXCJnZW5lcmljX2Vycm9yXCI7XG4gIHJldHVybiBTaWduTWVzc2FnZUVycm9yQ29kZXMyO1xufSkoU2lnbk1lc3NhZ2VFcnJvckNvZGVzIHx8IHt9KTtcbnZhciBTaWduTWVzc2FnZUVycm9yTWVzc2FnZSA9IHtcbiAgW1wiaW52YWxpZF9tZXNzYWdlXCIgLyogSW52YWxpZE1lc3NhZ2UgKi9dOiBcIkludmFsaWQgbWVzc2FnZSByZXF1ZXN0ZWRcIixcbiAgW1widXNlcl9yZWplY3RlZFwiIC8qIFVzZXJSZWplY3RlZCAqL106IFwiVXNlciByZWplY3RlZCB0aGUgcmVxdWVzdC5cIixcbiAgW1wiZ2VuZXJpY19lcnJvclwiIC8qIEdlbmVyaWNFcnJvciAqL106IFwiU29tZXRoaW5nIHVuZXhwZWN0ZWQgd2VudCB3cm9uZy5cIlxufTtcbnZhciBTaWduVHlwZWREYXRhRXJyb3JDb2RlcyA9IC8qIEBfX1BVUkVfXyAqLyAoKFNpZ25UeXBlZERhdGFFcnJvckNvZGVzMikgPT4ge1xuICBTaWduVHlwZWREYXRhRXJyb3JDb2RlczJbXCJJbnZhbGlkT3BlcmF0aW9uXCJdID0gXCJpbnZhbGlkX29wZXJhdGlvblwiO1xuICBTaWduVHlwZWREYXRhRXJyb3JDb2RlczJbXCJVc2VyUmVqZWN0ZWRcIl0gPSBcInVzZXJfcmVqZWN0ZWRcIjtcbiAgU2lnblR5cGVkRGF0YUVycm9yQ29kZXMyW1wiSW5wdXRFcnJvclwiXSA9IFwiaW5wdXRfZXJyb3JcIjtcbiAgU2lnblR5cGVkRGF0YUVycm9yQ29kZXMyW1wiU2ltdWxhdGlvbkZhaWxlZFwiXSA9IFwic2ltdWxhdGlvbl9mYWlsZWRcIjtcbiAgU2lnblR5cGVkRGF0YUVycm9yQ29kZXMyW1wiR2VuZXJpY0Vycm9yXCJdID0gXCJnZW5lcmljX2Vycm9yXCI7XG4gIFNpZ25UeXBlZERhdGFFcnJvckNvZGVzMltcIkRpc2FsbG93ZWRPcGVyYXRpb25cIl0gPSBcImRpc2FsbG93ZWRfb3BlcmF0aW9uXCI7XG4gIFNpZ25UeXBlZERhdGFFcnJvckNvZGVzMltcIkludmFsaWRDb250cmFjdFwiXSA9IFwiaW52YWxpZF9jb250cmFjdFwiO1xuICBTaWduVHlwZWREYXRhRXJyb3JDb2RlczJbXCJNYWxpY2lvdXNPcGVyYXRpb25cIl0gPSBcIm1hbGljaW91c19vcGVyYXRpb25cIjtcbiAgcmV0dXJuIFNpZ25UeXBlZERhdGFFcnJvckNvZGVzMjtcbn0pKFNpZ25UeXBlZERhdGFFcnJvckNvZGVzIHx8IHt9KTtcbnZhciBTaWduVHlwZWREYXRhRXJyb3JNZXNzYWdlID0ge1xuICBbXCJpbnZhbGlkX29wZXJhdGlvblwiIC8qIEludmFsaWRPcGVyYXRpb24gKi9dOiBcIlRyYW5zYWN0aW9uIGluY2x1ZGVkIGFuIG9wZXJhdGlvbiB0aGF0IHdhcyBpbnZhbGlkXCIsXG4gIFtcInVzZXJfcmVqZWN0ZWRcIiAvKiBVc2VyUmVqZWN0ZWQgKi9dOiBcIlVzZXIgcmVqZWN0ZWQgdGhlIHJlcXVlc3QuXCIsXG4gIFtcImlucHV0X2Vycm9yXCIgLyogSW5wdXRFcnJvciAqL106IFwiSW52YWxpZCBwYXlsb2FkLlwiLFxuICBbXCJzaW11bGF0aW9uX2ZhaWxlZFwiIC8qIFNpbXVsYXRpb25GYWlsZWQgKi9dOiBcIlRoZSB0cmFuc2FjdGlvbiBzaW11bGF0aW9uIGZhaWxlZC5cIixcbiAgW1wiZ2VuZXJpY19lcnJvclwiIC8qIEdlbmVyaWNFcnJvciAqL106IFwiU29tZXRoaW5nIHVuZXhwZWN0ZWQgd2VudCB3cm9uZy4gUGxlYXNlIHRyeSBhZ2Fpbi5cIixcbiAgW1wiZGlzYWxsb3dlZF9vcGVyYXRpb25cIiAvKiBEaXNhbGxvd2VkT3BlcmF0aW9uICovXTogXCJUaGUgb3BlcmF0aW9uIHJlcXVlc3RlZCBpcyBub3QgYWxsb3dlZC4gUGxlYXNlIHJlZmVyIHRvIHRoZSBkb2NzLlwiLFxuICBbXCJpbnZhbGlkX2NvbnRyYWN0XCIgLyogSW52YWxpZENvbnRyYWN0ICovXTogXCJUaGUgY29udHJhY3QgYWRkcmVzcyBpcyBub3QgYWxsb3dlZCBmb3IgeW91ciBhcHBsaWNhdGlvbi4gUGxlYXNlIGNoZWNrIHlvdXIgZGV2ZWxvcGVyIHBvcnRhbCBjb25maWd1cmF0aW9uc1wiLFxuICBbXCJtYWxpY2lvdXNfb3BlcmF0aW9uXCIgLyogTWFsaWNpb3VzT3BlcmF0aW9uICovXTogXCJUaGUgb3BlcmF0aW9uIHJlcXVlc3RlZCBpcyBjb25zaWRlcmVkIG1hbGljaW91cy5cIlxufTtcbnZhciBNaW5pS2l0SW5zdGFsbEVycm9yQ29kZXMgPSAvKiBAX19QVVJFX18gKi8gKChNaW5pS2l0SW5zdGFsbEVycm9yQ29kZXMyKSA9PiB7XG4gIE1pbmlLaXRJbnN0YWxsRXJyb3JDb2RlczJbXCJVbmtub3duXCJdID0gXCJ1bmtub3duXCI7XG4gIE1pbmlLaXRJbnN0YWxsRXJyb3JDb2RlczJbXCJBbHJlYWR5SW5zdGFsbGVkXCJdID0gXCJhbHJlYWR5X2luc3RhbGxlZFwiO1xuICBNaW5pS2l0SW5zdGFsbEVycm9yQ29kZXMyW1wiT3V0c2lkZU9mV29ybGRBcHBcIl0gPSBcIm91dHNpZGVfb2Zfd29ybGRhcHBcIjtcbiAgTWluaUtpdEluc3RhbGxFcnJvckNvZGVzMltcIk5vdE9uQ2xpZW50XCJdID0gXCJub3Rfb25fY2xpZW50XCI7XG4gIE1pbmlLaXRJbnN0YWxsRXJyb3JDb2RlczJbXCJBcHBPdXRPZkRhdGVcIl0gPSBcImFwcF9vdXRfb2ZfZGF0ZVwiO1xuICByZXR1cm4gTWluaUtpdEluc3RhbGxFcnJvckNvZGVzMjtcbn0pKE1pbmlLaXRJbnN0YWxsRXJyb3JDb2RlcyB8fCB7fSk7XG52YXIgTWluaUtpdEluc3RhbGxFcnJvck1lc3NhZ2UgPSB7XG4gIFtcInVua25vd25cIiAvKiBVbmtub3duICovXTogXCJGYWlsZWQgdG8gaW5zdGFsbCBNaW5pS2l0LlwiLFxuICBbXCJhbHJlYWR5X2luc3RhbGxlZFwiIC8qIEFscmVhZHlJbnN0YWxsZWQgKi9dOiBcIk1pbmlLaXQgaXMgYWxyZWFkeSBpbnN0YWxsZWQuXCIsXG4gIFtcIm91dHNpZGVfb2Zfd29ybGRhcHBcIiAvKiBPdXRzaWRlT2ZXb3JsZEFwcCAqL106IFwiTWluaUFwcCBsYXVuY2hlZCBvdXRzaWRlIG9mIFdvcmxkQXBwLlwiLFxuICBbXCJub3Rfb25fY2xpZW50XCIgLyogTm90T25DbGllbnQgKi9dOiBcIldpbmRvdyBvYmplY3QgaXMgbm90IGF2YWlsYWJsZS5cIixcbiAgW1wiYXBwX291dF9vZl9kYXRlXCIgLyogQXBwT3V0T2ZEYXRlICovXTogXCJXb3JsZEFwcCBpcyBvdXQgb2YgZGF0ZS4gUGxlYXNlIHVwZGF0ZSB0aGUgYXBwLlwiXG59O1xudmFyIFNoYXJlQ29udGFjdHNFcnJvckNvZGVzID0gLyogQF9fUFVSRV9fICovICgoU2hhcmVDb250YWN0c0Vycm9yQ29kZXMyKSA9PiB7XG4gIFNoYXJlQ29udGFjdHNFcnJvckNvZGVzMltcIlVzZXJSZWplY3RlZFwiXSA9IFwidXNlcl9yZWplY3RlZFwiO1xuICBTaGFyZUNvbnRhY3RzRXJyb3JDb2RlczJbXCJHZW5lcmljRXJyb3JcIl0gPSBcImdlbmVyaWNfZXJyb3JcIjtcbiAgcmV0dXJuIFNoYXJlQ29udGFjdHNFcnJvckNvZGVzMjtcbn0pKFNoYXJlQ29udGFjdHNFcnJvckNvZGVzIHx8IHt9KTtcbnZhciBTaGFyZUNvbnRhY3RzRXJyb3JNZXNzYWdlID0ge1xuICBbXCJ1c2VyX3JlamVjdGVkXCIgLyogVXNlclJlamVjdGVkICovXTogXCJVc2VyIHJlamVjdGVkIHRoZSByZXF1ZXN0LlwiLFxuICBbXCJnZW5lcmljX2Vycm9yXCIgLyogR2VuZXJpY0Vycm9yICovXTogXCJTb21ldGhpbmcgdW5leHBlY3RlZCB3ZW50IHdyb25nLlwiXG59O1xudmFyIFJlcXVlc3RQZXJtaXNzaW9uRXJyb3JDb2RlcyA9IC8qIEBfX1BVUkVfXyAqLyAoKFJlcXVlc3RQZXJtaXNzaW9uRXJyb3JDb2RlczIpID0+IHtcbiAgUmVxdWVzdFBlcm1pc3Npb25FcnJvckNvZGVzMltcIlVzZXJSZWplY3RlZFwiXSA9IFwidXNlcl9yZWplY3RlZFwiO1xuICBSZXF1ZXN0UGVybWlzc2lvbkVycm9yQ29kZXMyW1wiR2VuZXJpY0Vycm9yXCJdID0gXCJnZW5lcmljX2Vycm9yXCI7XG4gIFJlcXVlc3RQZXJtaXNzaW9uRXJyb3JDb2RlczJbXCJBbHJlYWR5UmVxdWVzdGVkXCJdID0gXCJhbHJlYWR5X3JlcXVlc3RlZFwiO1xuICBSZXF1ZXN0UGVybWlzc2lvbkVycm9yQ29kZXMyW1wiUGVybWlzc2lvbkRpc2FibGVkXCJdID0gXCJwZXJtaXNzaW9uX2Rpc2FibGVkXCI7XG4gIFJlcXVlc3RQZXJtaXNzaW9uRXJyb3JDb2RlczJbXCJBbHJlYWR5R3JhbnRlZFwiXSA9IFwiYWxyZWFkeV9ncmFudGVkXCI7XG4gIFJlcXVlc3RQZXJtaXNzaW9uRXJyb3JDb2RlczJbXCJVbnN1cHBvcnRlZFBlcm1pc3Npb25cIl0gPSBcInVuc3VwcG9ydGVkX3Blcm1pc3Npb25cIjtcbiAgcmV0dXJuIFJlcXVlc3RQZXJtaXNzaW9uRXJyb3JDb2RlczI7XG59KShSZXF1ZXN0UGVybWlzc2lvbkVycm9yQ29kZXMgfHwge30pO1xudmFyIFJlcXVlc3RQZXJtaXNzaW9uRXJyb3JNZXNzYWdlID0ge1xuICBbXCJ1c2VyX3JlamVjdGVkXCIgLyogVXNlclJlamVjdGVkICovXTogXCJVc2VyIGRlY2xpbmVkIHNoYXJpbmcgY29udGFjdHNcIixcbiAgW1wiZ2VuZXJpY19lcnJvclwiIC8qIEdlbmVyaWNFcnJvciAqL106IFwiUmVxdWVzdCBmYWlsZWQgZm9yIHVua25vd24gcmVhc29uLlwiLFxuICBbXCJhbHJlYWR5X3JlcXVlc3RlZFwiIC8qIEFscmVhZHlSZXF1ZXN0ZWQgKi9dOiBcIlVzZXIgaGFzIGFscmVhZHkgZGVjbGluZWQgdHVybmluZyBvbiBub3RpZmljYXRpb25zIG9uY2VcIixcbiAgW1wicGVybWlzc2lvbl9kaXNhYmxlZFwiIC8qIFBlcm1pc3Npb25EaXNhYmxlZCAqL106IFwiVXNlciBkb2VzIG5vdCBoYXZlIHRoaXMgcGVybWlzc2lvbiBlbmFibGVkIGluIFdvcmxkIEFwcFwiLFxuICBbXCJhbHJlYWR5X2dyYW50ZWRcIiAvKiBBbHJlYWR5R3JhbnRlZCAqL106IFwiSWYgdGhlIHVzZXIgaGFzIGFscmVhZHkgZ3JhbnRlZCB0aGlzIG1pbmkgYXBwIHBlcm1pc3Npb25cIixcbiAgW1widW5zdXBwb3J0ZWRfcGVybWlzc2lvblwiIC8qIFVuc3VwcG9ydGVkUGVybWlzc2lvbiAqL106IFwiVGhlIHBlcm1pc3Npb24gcmVxdWVzdGVkIGlzIG5vdCBzdXBwb3J0ZWQgYnkgdGhpcyBtaW5pIGFwcFwiXG59O1xudmFyIEdldFBlcm1pc3Npb25zRXJyb3JDb2RlcyA9IC8qIEBfX1BVUkVfXyAqLyAoKEdldFBlcm1pc3Npb25zRXJyb3JDb2RlczIpID0+IHtcbiAgR2V0UGVybWlzc2lvbnNFcnJvckNvZGVzMltcIkdlbmVyaWNFcnJvclwiXSA9IFwiZ2VuZXJpY19lcnJvclwiO1xuICByZXR1cm4gR2V0UGVybWlzc2lvbnNFcnJvckNvZGVzMjtcbn0pKEdldFBlcm1pc3Npb25zRXJyb3JDb2RlcyB8fCB7fSk7XG52YXIgR2V0UGVybWlzc2lvbnNFcnJvck1lc3NhZ2UgPSB7XG4gIFtcImdlbmVyaWNfZXJyb3JcIiAvKiBHZW5lcmljRXJyb3IgKi9dOiBcIlNvbWV0aGluZyB1bmV4cGVjdGVkIHdlbnQgd3JvbmcuIFBsZWFzZSB0cnkgYWdhaW4uXCJcbn07XG52YXIgU2VuZEhhcHRpY0ZlZWRiYWNrRXJyb3JDb2RlcyA9IC8qIEBfX1BVUkVfXyAqLyAoKFNlbmRIYXB0aWNGZWVkYmFja0Vycm9yQ29kZXMyKSA9PiB7XG4gIFNlbmRIYXB0aWNGZWVkYmFja0Vycm9yQ29kZXMyW1wiR2VuZXJpY0Vycm9yXCJdID0gXCJnZW5lcmljX2Vycm9yXCI7XG4gIFNlbmRIYXB0aWNGZWVkYmFja0Vycm9yQ29kZXMyW1wiVXNlclJlamVjdGVkXCJdID0gXCJ1c2VyX3JlamVjdGVkXCI7XG4gIHJldHVybiBTZW5kSGFwdGljRmVlZGJhY2tFcnJvckNvZGVzMjtcbn0pKFNlbmRIYXB0aWNGZWVkYmFja0Vycm9yQ29kZXMgfHwge30pO1xudmFyIFNlbmRIYXB0aWNGZWVkYmFja0Vycm9yTWVzc2FnZSA9IHtcbiAgW1wiZ2VuZXJpY19lcnJvclwiIC8qIEdlbmVyaWNFcnJvciAqL106IFwiU29tZXRoaW5nIHVuZXhwZWN0ZWQgd2VudCB3cm9uZy5cIixcbiAgW1widXNlcl9yZWplY3RlZFwiIC8qIFVzZXJSZWplY3RlZCAqL106IFwiVXNlciByZWplY3RlZCB0aGUgcmVxdWVzdC5cIlxufTtcbnZhciBTaGFyZUZpbGVzRXJyb3JDb2RlcyA9IC8qIEBfX1BVUkVfXyAqLyAoKFNoYXJlRmlsZXNFcnJvckNvZGVzMikgPT4ge1xuICBTaGFyZUZpbGVzRXJyb3JDb2RlczJbXCJVc2VyUmVqZWN0ZWRcIl0gPSBcInVzZXJfcmVqZWN0ZWRcIjtcbiAgU2hhcmVGaWxlc0Vycm9yQ29kZXMyW1wiR2VuZXJpY0Vycm9yXCJdID0gXCJnZW5lcmljX2Vycm9yXCI7XG4gIFNoYXJlRmlsZXNFcnJvckNvZGVzMltcIkludmFsaWRGaWxlTmFtZVwiXSA9IFwiaW52YWxpZF9maWxlX25hbWVcIjtcbiAgcmV0dXJuIFNoYXJlRmlsZXNFcnJvckNvZGVzMjtcbn0pKFNoYXJlRmlsZXNFcnJvckNvZGVzIHx8IHt9KTtcbnZhciBTaGFyZUZpbGVzRXJyb3JNZXNzYWdlID0ge1xuICBbXCJ1c2VyX3JlamVjdGVkXCIgLyogVXNlclJlamVjdGVkICovXTogXCJVc2VyIHJlamVjdGVkIHRoZSByZXF1ZXN0LlwiLFxuICBbXCJnZW5lcmljX2Vycm9yXCIgLyogR2VuZXJpY0Vycm9yICovXTogXCJTb21ldGhpbmcgdW5leHBlY3RlZCB3ZW50IHdyb25nLlwiLFxuICBbXCJpbnZhbGlkX2ZpbGVfbmFtZVwiIC8qIEludmFsaWRGaWxlTmFtZSAqL106IFwiSW52YWxpZCBmaWxlIG5hbWUuIE1ha2Ugc3VyZSB5b3UgaW5jbHVkZSB0aGUgZXh0ZW5zaW9uXCJcbn07XG52YXIgTWljcm9waG9uZUVycm9yQ29kZXMgPSAvKiBAX19QVVJFX18gKi8gKChNaWNyb3Bob25lRXJyb3JDb2RlczIpID0+IHtcbiAgTWljcm9waG9uZUVycm9yQ29kZXMyW1wiTWluaUFwcFBlcm1pc3Npb25Ob3RFbmFibGVkXCJdID0gXCJtaW5pX2FwcF9wZXJtaXNzaW9uX25vdF9lbmFibGVkXCI7XG4gIE1pY3JvcGhvbmVFcnJvckNvZGVzMltcIldvcmxkQXBwUGVybWlzc2lvbk5vdEVuYWJsZWRcIl0gPSBcIndvcmxkX2FwcF9wZXJtaXNzaW9uX25vdF9lbmFibGVkXCI7XG4gIHJldHVybiBNaWNyb3Bob25lRXJyb3JDb2RlczI7XG59KShNaWNyb3Bob25lRXJyb3JDb2RlcyB8fCB7fSk7XG52YXIgTWljcm9waG9uZUVycm9yTWVzc2FnZSA9IHtcbiAgW1wibWluaV9hcHBfcGVybWlzc2lvbl9ub3RfZW5hYmxlZFwiIC8qIE1pbmlBcHBQZXJtaXNzaW9uTm90RW5hYmxlZCAqL106IFwiTWljcm9waG9uZSBwZXJtaXNzaW9uIG5vdCBlbmFibGVkIGZvciB5b3VyIE1pbmkgQXBwXCIsXG4gIFtcIndvcmxkX2FwcF9wZXJtaXNzaW9uX25vdF9lbmFibGVkXCIgLyogV29ybGRBcHBQZXJtaXNzaW9uTm90RW5hYmxlZCAqL106IFwiTWljcm9waG9uZSBwZXJtaXNzaW9uIG5vdCBlbmFibGVkIGluIFdvcmxkIEFwcFwiXG59O1xudmFyIENoYXRFcnJvckNvZGVzID0gLyogQF9fUFVSRV9fICovICgoQ2hhdEVycm9yQ29kZXMyKSA9PiB7XG4gIENoYXRFcnJvckNvZGVzMltcIlVzZXJSZWplY3RlZFwiXSA9IFwidXNlcl9yZWplY3RlZFwiO1xuICBDaGF0RXJyb3JDb2RlczJbXCJTZW5kRmFpbGVkXCJdID0gXCJzZW5kX2ZhaWxlZFwiO1xuICBDaGF0RXJyb3JDb2RlczJbXCJHZW5lcmljRXJyb3JcIl0gPSBcImdlbmVyaWNfZXJyb3JcIjtcbiAgcmV0dXJuIENoYXRFcnJvckNvZGVzMjtcbn0pKENoYXRFcnJvckNvZGVzIHx8IHt9KTtcbnZhciBDaGF0RXJyb3JNZXNzYWdlID0ge1xuICBbXCJ1c2VyX3JlamVjdGVkXCIgLyogVXNlclJlamVjdGVkICovXTogXCJVc2VyIHJlamVjdGVkIHRoZSByZXF1ZXN0LlwiLFxuICBbXCJzZW5kX2ZhaWxlZFwiIC8qIFNlbmRGYWlsZWQgKi9dOiBcIkZhaWxlZCB0byBzZW5kIHRoZSBtZXNzYWdlLlwiLFxuICBbXCJnZW5lcmljX2Vycm9yXCIgLyogR2VuZXJpY0Vycm9yICovXTogXCJTb21ldGhpbmcgdW5leHBlY3RlZCB3ZW50IHdyb25nLlwiXG59O1xuXG4vLyB0eXBlcy9yZXNwb25zZXMudHNcbnZhciBSZXNwb25zZUV2ZW50ID0gLyogQF9fUFVSRV9fICovICgoUmVzcG9uc2VFdmVudDIpID0+IHtcbiAgUmVzcG9uc2VFdmVudDJbXCJNaW5pQXBwVmVyaWZ5QWN0aW9uXCJdID0gXCJtaW5pYXBwLXZlcmlmeS1hY3Rpb25cIjtcbiAgUmVzcG9uc2VFdmVudDJbXCJNaW5pQXBwUGF5bWVudFwiXSA9IFwibWluaWFwcC1wYXltZW50XCI7XG4gIFJlc3BvbnNlRXZlbnQyW1wiTWluaUFwcFdhbGxldEF1dGhcIl0gPSBcIm1pbmlhcHAtd2FsbGV0LWF1dGhcIjtcbiAgUmVzcG9uc2VFdmVudDJbXCJNaW5pQXBwU2VuZFRyYW5zYWN0aW9uXCJdID0gXCJtaW5pYXBwLXNlbmQtdHJhbnNhY3Rpb25cIjtcbiAgUmVzcG9uc2VFdmVudDJbXCJNaW5pQXBwU2lnbk1lc3NhZ2VcIl0gPSBcIm1pbmlhcHAtc2lnbi1tZXNzYWdlXCI7XG4gIFJlc3BvbnNlRXZlbnQyW1wiTWluaUFwcFNpZ25UeXBlZERhdGFcIl0gPSBcIm1pbmlhcHAtc2lnbi10eXBlZC1kYXRhXCI7XG4gIFJlc3BvbnNlRXZlbnQyW1wiTWluaUFwcFNoYXJlQ29udGFjdHNcIl0gPSBcIm1pbmlhcHAtc2hhcmUtY29udGFjdHNcIjtcbiAgUmVzcG9uc2VFdmVudDJbXCJNaW5pQXBwUmVxdWVzdFBlcm1pc3Npb25cIl0gPSBcIm1pbmlhcHAtcmVxdWVzdC1wZXJtaXNzaW9uXCI7XG4gIFJlc3BvbnNlRXZlbnQyW1wiTWluaUFwcEdldFBlcm1pc3Npb25zXCJdID0gXCJtaW5pYXBwLWdldC1wZXJtaXNzaW9uc1wiO1xuICBSZXNwb25zZUV2ZW50MltcIk1pbmlBcHBTZW5kSGFwdGljRmVlZGJhY2tcIl0gPSBcIm1pbmlhcHAtc2VuZC1oYXB0aWMtZmVlZGJhY2tcIjtcbiAgUmVzcG9uc2VFdmVudDJbXCJNaW5pQXBwU2hhcmVcIl0gPSBcIm1pbmlhcHAtc2hhcmVcIjtcbiAgUmVzcG9uc2VFdmVudDJbXCJNaW5pQXBwTWljcm9waG9uZVwiXSA9IFwibWluaWFwcC1taWNyb3Bob25lXCI7XG4gIFJlc3BvbnNlRXZlbnQyW1wiTWluaUFwcENoYXRcIl0gPSBcIm1pbmlhcHAtY2hhdFwiO1xuICByZXR1cm4gUmVzcG9uc2VFdmVudDI7XG59KShSZXNwb25zZUV2ZW50IHx8IHt9KTtcblxuLy8gdHlwZXMvcGF5bWVudC50c1xudmFyIFRva2VucyA9IC8qIEBfX1BVUkVfXyAqLyAoKFRva2VuczIpID0+IHtcbiAgVG9rZW5zMltcIlVTRENcIl0gPSBcIlVTRENFXCI7XG4gIFRva2VuczJbXCJXTERcIl0gPSBcIldMRFwiO1xuICByZXR1cm4gVG9rZW5zMjtcbn0pKFRva2VucyB8fCB7fSk7XG52YXIgVG9rZW5EZWNpbWFscyA9IHtcbiAgW1wiVVNEQ0VcIiAvKiBVU0RDICovXTogNixcbiAgW1wiV0xEXCIgLyogV0xEICovXTogMThcbn07XG52YXIgTmV0d29yayA9IC8qIEBfX1BVUkVfXyAqLyAoKE5ldHdvcmsyKSA9PiB7XG4gIE5ldHdvcmsyW1wiT3B0aW1pc21cIl0gPSBcIm9wdGltaXNtXCI7XG4gIE5ldHdvcmsyW1wiV29ybGRDaGFpblwiXSA9IFwid29ybGRjaGFpblwiO1xuICByZXR1cm4gTmV0d29yazI7XG59KShOZXR3b3JrIHx8IHt9KTtcblxuLy8gaGVscGVycy9wYXltZW50L2NsaWVudC50c1xudmFyIHRva2VuVG9EZWNpbWFscyA9IChhbW91bnQsIHRva2VuKSA9PiB7XG4gIGNvbnN0IGRlY2ltYWxzID0gVG9rZW5EZWNpbWFsc1t0b2tlbl07XG4gIGlmIChkZWNpbWFscyA9PT0gdm9pZCAwKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIHRva2VuOiAke3Rva2VufWApO1xuICB9XG4gIGNvbnN0IGZhY3RvciA9IDEwICoqIGRlY2ltYWxzO1xuICBjb25zdCByZXN1bHQgPSBhbW91bnQgKiBmYWN0b3I7XG4gIGlmICghTnVtYmVyLmlzSW50ZWdlcihyZXN1bHQpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBUaGUgcmVzdWx0aW5nIGFtb3VudCBpcyBub3QgYSB3aG9sZSBudW1iZXI6ICR7cmVzdWx0fWApO1xuICB9XG4gIHJldHVybiByZXN1bHQ7XG59O1xudmFyIHZhbGlkYXRlUGF5bWVudFBheWxvYWQgPSAocGF5bG9hZCkgPT4ge1xuICBpZiAocGF5bG9hZC50b2tlbnMuc29tZShcbiAgICAodG9rZW4pID0+IHRva2VuLnN5bWJvbCA9PSBcIlVTRENFXCIgLyogVVNEQyAqLyAmJiBwYXJzZUZsb2F0KHRva2VuLnRva2VuX2Ftb3VudCkgPCAwLjFcbiAgKSkge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJVU0RDIGFtb3VudCBzaG91bGQgYmUgZ3JlYXRlciB0aGFuICQwLjFcIik7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGlmIChwYXlsb2FkLnJlZmVyZW5jZS5sZW5ndGggPiAzNikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJSZWZlcmVuY2UgbXVzdCBub3QgZXhjZWVkIDM2IGNoYXJhY3RlcnNcIik7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGlmICh0eXBlb2YgcGF5bG9hZC5yZWZlcmVuY2UgIT09IFwic3RyaW5nXCIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJSZWZlcmVuY2UgbXVzdCBiZSBhIHN0cmluZ1wiKTtcbiAgfVxuICByZXR1cm4gdHJ1ZTtcbn07XG5cbi8vIGhlbHBlcnMvc2l3ZS9zaXdlLnRzXG5pbXBvcnQge1xuICBjcmVhdGVQdWJsaWNDbGllbnQsXG4gIGdldENvbnRyYWN0LFxuICBoYXNoTWVzc2FnZSxcbiAgaHR0cCxcbiAgcmVjb3ZlckFkZHJlc3Ncbn0gZnJvbSBcInZpZW1cIjtcbmltcG9ydCB7IHdvcmxkY2hhaW4gfSBmcm9tIFwidmllbS9jaGFpbnNcIjtcbnZhciBQUkVBTUJMRSA9IFwiIHdhbnRzIHlvdSB0byBzaWduIGluIHdpdGggeW91ciBFdGhlcmV1bSBhY2NvdW50OlwiO1xudmFyIFVSSV9UQUcgPSBcIlVSSTogXCI7XG52YXIgVkVSU0lPTl9UQUcgPSBcIlZlcnNpb246IFwiO1xudmFyIENIQUlOX1RBRyA9IFwiQ2hhaW4gSUQ6IFwiO1xudmFyIE5PTkNFX1RBRyA9IFwiTm9uY2U6IFwiO1xudmFyIElBVF9UQUcgPSBcIklzc3VlZCBBdDogXCI7XG52YXIgRVhQX1RBRyA9IFwiRXhwaXJhdGlvbiBUaW1lOiBcIjtcbnZhciBOQkZfVEFHID0gXCJOb3QgQmVmb3JlOiBcIjtcbnZhciBSSURfVEFHID0gXCJSZXF1ZXN0IElEOiBcIjtcbnZhciBFUkNfMTkxX1BSRUZJWCA9IFwiXHUwMDE5RXRoZXJldW0gU2lnbmVkIE1lc3NhZ2U6XFxuXCI7XG52YXIgRUlQMTI3MV9NQUdJQ1ZBTFVFID0gXCIweDE2MjZiYTdlXCI7XG52YXIgU0FGRV9DT05UUkFDVF9BQkkgPSBbXG4gIHtcbiAgICBpbnB1dHM6IFtcbiAgICAgIHtcbiAgICAgICAgaW50ZXJuYWxUeXBlOiBcImFkZHJlc3NcIixcbiAgICAgICAgbmFtZTogXCJvd25lclwiLFxuICAgICAgICB0eXBlOiBcImFkZHJlc3NcIlxuICAgICAgfVxuICAgIF0sXG4gICAgbmFtZTogXCJpc093bmVyXCIsXG4gICAgb3V0cHV0czogW1xuICAgICAge1xuICAgICAgICBpbnRlcm5hbFR5cGU6IFwiYm9vbFwiLFxuICAgICAgICBuYW1lOiBcIlwiLFxuICAgICAgICB0eXBlOiBcImJvb2xcIlxuICAgICAgfVxuICAgIF0sXG4gICAgc3RhdGVNdXRhYmlsaXR5OiBcInZpZXdcIixcbiAgICB0eXBlOiBcImZ1bmN0aW9uXCJcbiAgfSxcbiAge1xuICAgIGlucHV0czogW1xuICAgICAge1xuICAgICAgICBpbnRlcm5hbFR5cGU6IFwiYnl0ZXMzMlwiLFxuICAgICAgICBuYW1lOiBcIl9tZXNzYWdlXCIsXG4gICAgICAgIHR5cGU6IFwiYnl0ZXMzMlwiXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBpbnRlcm5hbFR5cGU6IFwiYnl0ZXNcIixcbiAgICAgICAgbmFtZTogXCJfc2lnbmF0dXJlXCIsXG4gICAgICAgIHR5cGU6IFwiYnl0ZXNcIlxuICAgICAgfVxuICAgIF0sXG4gICAgbmFtZTogXCJpc1ZhbGlkU2lnbmF0dXJlXCIsXG4gICAgb3V0cHV0czogW1xuICAgICAge1xuICAgICAgICBpbnRlcm5hbFR5cGU6IFwiYnl0ZXM0XCIsXG4gICAgICAgIG5hbWU6IFwiXCIsXG4gICAgICAgIHR5cGU6IFwiYnl0ZXM0XCJcbiAgICAgIH1cbiAgICBdLFxuICAgIHN0YXRlTXV0YWJpbGl0eTogXCJ2aWV3XCIsXG4gICAgdHlwZTogXCJmdW5jdGlvblwiXG4gIH1cbl07XG52YXIgdGFnZ2VkID0gKGxpbmUsIHRhZykgPT4ge1xuICBpZiAobGluZSAmJiBsaW5lLmluY2x1ZGVzKHRhZykpIHtcbiAgICByZXR1cm4gbGluZS5yZXBsYWNlKHRhZywgXCJcIik7XG4gIH0gZWxzZSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBNaXNzaW5nICcke3RhZ30nYCk7XG4gIH1cbn07XG52YXIgcGFyc2VTaXdlTWVzc2FnZSA9IChpbnB1dFN0cmluZykgPT4ge1xuICBjb25zdCBsaW5lcyA9IGlucHV0U3RyaW5nLnNwbGl0KFwiXFxuXCIpW1N5bWJvbC5pdGVyYXRvcl0oKTtcbiAgY29uc3QgZG9tYWluID0gdGFnZ2VkKGxpbmVzLm5leHQoKT8udmFsdWUsIFBSRUFNQkxFKTtcbiAgY29uc3QgYWRkcmVzcyA9IGxpbmVzLm5leHQoKT8udmFsdWU7XG4gIGxpbmVzLm5leHQoKTtcbiAgY29uc3QgbmV4dFZhbHVlID0gbGluZXMubmV4dCgpPy52YWx1ZTtcbiAgbGV0IHN0YXRlbWVudDtcbiAgaWYgKG5leHRWYWx1ZSkge1xuICAgIHN0YXRlbWVudCA9IG5leHRWYWx1ZTtcbiAgICBsaW5lcy5uZXh0KCk7XG4gIH1cbiAgY29uc3QgdXJpID0gdGFnZ2VkKGxpbmVzLm5leHQoKT8udmFsdWUsIFVSSV9UQUcpO1xuICBjb25zdCB2ZXJzaW9uID0gdGFnZ2VkKGxpbmVzLm5leHQoKT8udmFsdWUsIFZFUlNJT05fVEFHKTtcbiAgY29uc3QgY2hhaW5faWQgPSB0YWdnZWQobGluZXMubmV4dCgpPy52YWx1ZSwgQ0hBSU5fVEFHKTtcbiAgY29uc3Qgbm9uY2UgPSB0YWdnZWQobGluZXMubmV4dCgpPy52YWx1ZSwgTk9OQ0VfVEFHKTtcbiAgY29uc3QgaXNzdWVkX2F0ID0gdGFnZ2VkKGxpbmVzLm5leHQoKT8udmFsdWUsIElBVF9UQUcpO1xuICBsZXQgZXhwaXJhdGlvbl90aW1lLCBub3RfYmVmb3JlLCByZXF1ZXN0X2lkO1xuICBmb3IgKGxldCBsaW5lIG9mIGxpbmVzKSB7XG4gICAgaWYgKGxpbmUuc3RhcnRzV2l0aChFWFBfVEFHKSkge1xuICAgICAgZXhwaXJhdGlvbl90aW1lID0gdGFnZ2VkKGxpbmUsIEVYUF9UQUcpO1xuICAgIH0gZWxzZSBpZiAobGluZS5zdGFydHNXaXRoKE5CRl9UQUcpKSB7XG4gICAgICBub3RfYmVmb3JlID0gdGFnZ2VkKGxpbmUsIE5CRl9UQUcpO1xuICAgIH0gZWxzZSBpZiAobGluZS5zdGFydHNXaXRoKFJJRF9UQUcpKSB7XG4gICAgICByZXF1ZXN0X2lkID0gdGFnZ2VkKGxpbmUsIFJJRF9UQUcpO1xuICAgIH1cbiAgfVxuICBpZiAobGluZXMubmV4dCgpLmRvbmUgPT09IGZhbHNlKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiRXh0cmEgbGluZXMgaW4gdGhlIGlucHV0XCIpO1xuICB9XG4gIGNvbnN0IHNpd2VNZXNzYWdlRGF0YSA9IHtcbiAgICBkb21haW4sXG4gICAgYWRkcmVzcyxcbiAgICBzdGF0ZW1lbnQsXG4gICAgdXJpLFxuICAgIHZlcnNpb24sXG4gICAgY2hhaW5faWQsXG4gICAgbm9uY2UsXG4gICAgaXNzdWVkX2F0LFxuICAgIGV4cGlyYXRpb25fdGltZSxcbiAgICBub3RfYmVmb3JlLFxuICAgIHJlcXVlc3RfaWRcbiAgfTtcbiAgcmV0dXJuIHNpd2VNZXNzYWdlRGF0YTtcbn07XG52YXIgZ2VuZXJhdGVTaXdlTWVzc2FnZSA9IChzaXdlTWVzc2FnZURhdGEpID0+IHtcbiAgbGV0IHNpd2VNZXNzYWdlID0gXCJcIjtcbiAgaWYgKHNpd2VNZXNzYWdlRGF0YS5zY2hlbWUpIHtcbiAgICBzaXdlTWVzc2FnZSArPSBgJHtzaXdlTWVzc2FnZURhdGEuc2NoZW1lfTovLyR7c2l3ZU1lc3NhZ2VEYXRhLmRvbWFpbn0gd2FudHMgeW91IHRvIHNpZ24gaW4gd2l0aCB5b3VyIEV0aGVyZXVtIGFjY291bnQ6XG5gO1xuICB9IGVsc2Uge1xuICAgIHNpd2VNZXNzYWdlICs9IGAke3Npd2VNZXNzYWdlRGF0YS5kb21haW59IHdhbnRzIHlvdSB0byBzaWduIGluIHdpdGggeW91ciBFdGhlcmV1bSBhY2NvdW50OlxuYDtcbiAgfVxuICBpZiAoc2l3ZU1lc3NhZ2VEYXRhLmFkZHJlc3MpIHtcbiAgICBzaXdlTWVzc2FnZSArPSBgJHtzaXdlTWVzc2FnZURhdGEuYWRkcmVzc31cbmA7XG4gIH0gZWxzZSB7XG4gICAgc2l3ZU1lc3NhZ2UgKz0gXCJ7YWRkcmVzc31cXG5cIjtcbiAgfVxuICBzaXdlTWVzc2FnZSArPSBcIlxcblwiO1xuICBpZiAoc2l3ZU1lc3NhZ2VEYXRhLnN0YXRlbWVudCkge1xuICAgIHNpd2VNZXNzYWdlICs9IGAke3Npd2VNZXNzYWdlRGF0YS5zdGF0ZW1lbnR9XG5gO1xuICB9XG4gIHNpd2VNZXNzYWdlICs9IFwiXFxuXCI7XG4gIHNpd2VNZXNzYWdlICs9IGBVUkk6ICR7c2l3ZU1lc3NhZ2VEYXRhLnVyaX1cbmA7XG4gIHNpd2VNZXNzYWdlICs9IGBWZXJzaW9uOiAke3Npd2VNZXNzYWdlRGF0YS52ZXJzaW9ufVxuYDtcbiAgc2l3ZU1lc3NhZ2UgKz0gYENoYWluIElEOiAke3Npd2VNZXNzYWdlRGF0YS5jaGFpbl9pZH1cbmA7XG4gIHNpd2VNZXNzYWdlICs9IGBOb25jZTogJHtzaXdlTWVzc2FnZURhdGEubm9uY2V9XG5gO1xuICBzaXdlTWVzc2FnZSArPSBgSXNzdWVkIEF0OiAke3Npd2VNZXNzYWdlRGF0YS5pc3N1ZWRfYXR9XG5gO1xuICBpZiAoc2l3ZU1lc3NhZ2VEYXRhLmV4cGlyYXRpb25fdGltZSkge1xuICAgIHNpd2VNZXNzYWdlICs9IGBFeHBpcmF0aW9uIFRpbWU6ICR7c2l3ZU1lc3NhZ2VEYXRhLmV4cGlyYXRpb25fdGltZX1cbmA7XG4gIH1cbiAgaWYgKHNpd2VNZXNzYWdlRGF0YS5ub3RfYmVmb3JlKSB7XG4gICAgc2l3ZU1lc3NhZ2UgKz0gYE5vdCBCZWZvcmU6ICR7c2l3ZU1lc3NhZ2VEYXRhLm5vdF9iZWZvcmV9XG5gO1xuICB9XG4gIGlmIChzaXdlTWVzc2FnZURhdGEucmVxdWVzdF9pZCkge1xuICAgIHNpd2VNZXNzYWdlICs9IGBSZXF1ZXN0IElEOiAke3Npd2VNZXNzYWdlRGF0YS5yZXF1ZXN0X2lkfVxuYDtcbiAgfVxuICByZXR1cm4gc2l3ZU1lc3NhZ2U7XG59O1xudmFyIHZlcmlmeVNpd2VNZXNzYWdlID0gKHBheWxvYWQsIG5vbmNlLCBzdGF0ZW1lbnQsIHJlcXVlc3RJZCwgdXNlclByb3ZpZGVyKSA9PiB7XG4gIGlmIChwYXlsb2FkLnZlcnNpb24gPT09IDEpIHtcbiAgICByZXR1cm4gdmVyaWZ5U2l3ZU1lc3NhZ2VWMShcbiAgICAgIHBheWxvYWQsXG4gICAgICBub25jZSxcbiAgICAgIHN0YXRlbWVudCxcbiAgICAgIHJlcXVlc3RJZCxcbiAgICAgIHVzZXJQcm92aWRlclxuICAgICk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHZlcmlmeVNpd2VNZXNzYWdlVjIoXG4gICAgICBwYXlsb2FkLFxuICAgICAgbm9uY2UsXG4gICAgICBzdGF0ZW1lbnQsXG4gICAgICByZXF1ZXN0SWQsXG4gICAgICB1c2VyUHJvdmlkZXJcbiAgICApO1xuICB9XG59O1xudmFyIHZhbGlkYXRlTWVzc2FnZSA9IChzaXdlTWVzc2FnZURhdGEsIG5vbmNlLCBzdGF0ZW1lbnQsIHJlcXVlc3RJZCkgPT4ge1xuICBpZiAoc2l3ZU1lc3NhZ2VEYXRhLmV4cGlyYXRpb25fdGltZSkge1xuICAgIGNvbnN0IGV4cGlyYXRpb25UaW1lID0gbmV3IERhdGUoc2l3ZU1lc3NhZ2VEYXRhLmV4cGlyYXRpb25fdGltZSk7XG4gICAgaWYgKGV4cGlyYXRpb25UaW1lIDwgLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkV4cGlyZWQgbWVzc2FnZVwiKTtcbiAgICB9XG4gIH1cbiAgaWYgKHNpd2VNZXNzYWdlRGF0YS5ub3RfYmVmb3JlKSB7XG4gICAgY29uc3Qgbm90QmVmb3JlID0gbmV3IERhdGUoc2l3ZU1lc3NhZ2VEYXRhLm5vdF9iZWZvcmUpO1xuICAgIGlmIChub3RCZWZvcmUgPiAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm90IEJlZm9yZSB0aW1lIGhhcyBub3QgcGFzc2VkXCIpO1xuICAgIH1cbiAgfVxuICBpZiAobm9uY2UgJiYgc2l3ZU1lc3NhZ2VEYXRhLm5vbmNlICE9PSBub25jZSkge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIGBOb25jZSBtaXNtYXRjaC4gR290OiAke3Npd2VNZXNzYWdlRGF0YS5ub25jZX0sIEV4cGVjdGVkOiAke25vbmNlfWBcbiAgICApO1xuICB9XG4gIGlmIChzdGF0ZW1lbnQgJiYgc2l3ZU1lc3NhZ2VEYXRhLnN0YXRlbWVudCAhPT0gc3RhdGVtZW50KSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgYFN0YXRlbWVudCBtaXNtYXRjaC4gR290OiAke3Npd2VNZXNzYWdlRGF0YS5zdGF0ZW1lbnR9LCBFeHBlY3RlZDogJHtzdGF0ZW1lbnR9YFxuICAgICk7XG4gIH1cbiAgaWYgKHJlcXVlc3RJZCAmJiBzaXdlTWVzc2FnZURhdGEucmVxdWVzdF9pZCAhPT0gcmVxdWVzdElkKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgYFJlcXVlc3QgSUQgbWlzbWF0Y2guIEdvdDogJHtzaXdlTWVzc2FnZURhdGEucmVxdWVzdF9pZH0sIEV4cGVjdGVkOiAke3JlcXVlc3RJZH1gXG4gICAgKTtcbiAgfVxuICByZXR1cm4gdHJ1ZTtcbn07XG52YXIgdmVyaWZ5U2l3ZU1lc3NhZ2VWMSA9IGFzeW5jIChwYXlsb2FkLCBub25jZSwgc3RhdGVtZW50LCByZXF1ZXN0SWQsIHVzZXJQcm92aWRlcikgPT4ge1xuICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgIHRocm93IG5ldyBFcnJvcihcIldhbGxldCBhdXRoIHBheWxvYWQgY2FuIG9ubHkgYmUgdmVyaWZpZWQgaW4gdGhlIGJhY2tlbmRcIik7XG4gIH1cbiAgY29uc3QgeyBtZXNzYWdlLCBzaWduYXR1cmUsIGFkZHJlc3MgfSA9IHBheWxvYWQ7XG4gIGNvbnN0IHNpd2VNZXNzYWdlRGF0YSA9IHBhcnNlU2l3ZU1lc3NhZ2UobWVzc2FnZSk7XG4gIHZhbGlkYXRlTWVzc2FnZShzaXdlTWVzc2FnZURhdGEsIG5vbmNlLCBzdGF0ZW1lbnQsIHJlcXVlc3RJZCk7XG4gIGxldCBwcm92aWRlciA9IHVzZXJQcm92aWRlciB8fCBjcmVhdGVQdWJsaWNDbGllbnQoeyBjaGFpbjogd29ybGRjaGFpbiwgdHJhbnNwb3J0OiBodHRwKCkgfSk7XG4gIGNvbnN0IHNpZ25lZE1lc3NhZ2UgPSBgJHtFUkNfMTkxX1BSRUZJWH0ke21lc3NhZ2UubGVuZ3RofSR7bWVzc2FnZX1gO1xuICBjb25zdCBoYXNoZWRNZXNzYWdlID0gaGFzaE1lc3NhZ2Uoc2lnbmVkTWVzc2FnZSk7XG4gIGNvbnN0IGNvbnRyYWN0ID0gZ2V0Q29udHJhY3Qoe1xuICAgIGFkZHJlc3MsXG4gICAgYWJpOiBTQUZFX0NPTlRSQUNUX0FCSSxcbiAgICBjbGllbnQ6IHByb3ZpZGVyXG4gIH0pO1xuICB0cnkge1xuICAgIGNvbnN0IHJlY292ZXJlZEFkZHJlc3MgPSBhd2FpdCByZWNvdmVyQWRkcmVzcyh7XG4gICAgICBoYXNoOiBoYXNoZWRNZXNzYWdlLFxuICAgICAgc2lnbmF0dXJlOiBgMHgke3NpZ25hdHVyZX1gXG4gICAgfSk7XG4gICAgY29uc3QgaXNPd25lciA9IGF3YWl0IGNvbnRyYWN0LnJlYWQuaXNPd25lcihbcmVjb3ZlcmVkQWRkcmVzc10pO1xuICAgIGlmICghaXNPd25lcikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiU2lnbmF0dXJlIHZlcmlmaWNhdGlvbiBmYWlsZWQsIGludmFsaWQgb3duZXJcIik7XG4gICAgfVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHRocm93IG5ldyBFcnJvcihcIlNpZ25hdHVyZSB2ZXJpZmljYXRpb24gZmFpbGVkXCIpO1xuICB9XG4gIHJldHVybiB7IGlzVmFsaWQ6IHRydWUsIHNpd2VNZXNzYWdlRGF0YSB9O1xufTtcbnZhciB2ZXJpZnlTaXdlTWVzc2FnZVYyID0gYXN5bmMgKHBheWxvYWQsIG5vbmNlLCBzdGF0ZW1lbnQsIHJlcXVlc3RJZCwgdXNlclByb3ZpZGVyKSA9PiB7XG4gIGlmICh0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiV2FsbGV0IGF1dGggcGF5bG9hZCBjYW4gb25seSBiZSB2ZXJpZmllZCBpbiB0aGUgYmFja2VuZFwiKTtcbiAgfVxuICBjb25zdCB7IG1lc3NhZ2UsIHNpZ25hdHVyZSwgYWRkcmVzcyB9ID0gcGF5bG9hZDtcbiAgY29uc3Qgc2l3ZU1lc3NhZ2VEYXRhID0gcGFyc2VTaXdlTWVzc2FnZShtZXNzYWdlKTtcbiAgaWYgKCF2YWxpZGF0ZU1lc3NhZ2Uoc2l3ZU1lc3NhZ2VEYXRhLCBub25jZSwgc3RhdGVtZW50LCByZXF1ZXN0SWQpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiVmFsaWRhdGlvbiBmYWlsZWRcIik7XG4gIH1cbiAgdHJ5IHtcbiAgICBjb25zdCB3YWxsZXRDb250cmFjdCA9IGdldENvbnRyYWN0KHtcbiAgICAgIGFkZHJlc3MsXG4gICAgICBhYmk6IFNBRkVfQ09OVFJBQ1RfQUJJLFxuICAgICAgY2xpZW50OiB1c2VyUHJvdmlkZXIgfHwgY3JlYXRlUHVibGljQ2xpZW50KHsgY2hhaW46IHdvcmxkY2hhaW4sIHRyYW5zcG9ydDogaHR0cCgpIH0pXG4gICAgfSk7XG4gICAgY29uc3QgaGFzaGVkTWVzc2FnZSA9IGhhc2hNZXNzYWdlKG1lc3NhZ2UpO1xuICAgIGNvbnN0IHJlcyA9IGF3YWl0IHdhbGxldENvbnRyYWN0LnJlYWQuaXNWYWxpZFNpZ25hdHVyZShbXG4gICAgICBoYXNoZWRNZXNzYWdlLFxuICAgICAgc2lnbmF0dXJlXG4gICAgXSk7XG4gICAgcmV0dXJuIHtcbiAgICAgIGlzVmFsaWQ6IHJlcyA9PT0gRUlQMTI3MV9NQUdJQ1ZBTFVFLFxuICAgICAgc2l3ZU1lc3NhZ2VEYXRhXG4gICAgfTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmxvZyhlcnJvcik7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiU2lnbmF0dXJlIHZlcmlmaWNhdGlvbiBmYWlsZWRcIik7XG4gIH1cbn07XG5cbi8vIHR5cGVzL2NvbW1hbmRzLnRzXG52YXIgQ29tbWFuZCA9IC8qIEBfX1BVUkVfXyAqLyAoKENvbW1hbmQyKSA9PiB7XG4gIENvbW1hbmQyW1wiVmVyaWZ5XCJdID0gXCJ2ZXJpZnlcIjtcbiAgQ29tbWFuZDJbXCJQYXlcIl0gPSBcInBheVwiO1xuICBDb21tYW5kMltcIldhbGxldEF1dGhcIl0gPSBcIndhbGxldC1hdXRoXCI7XG4gIENvbW1hbmQyW1wiU2VuZFRyYW5zYWN0aW9uXCJdID0gXCJzZW5kLXRyYW5zYWN0aW9uXCI7XG4gIENvbW1hbmQyW1wiU2lnbk1lc3NhZ2VcIl0gPSBcInNpZ24tbWVzc2FnZVwiO1xuICBDb21tYW5kMltcIlNpZ25UeXBlZERhdGFcIl0gPSBcInNpZ24tdHlwZWQtZGF0YVwiO1xuICBDb21tYW5kMltcIlNoYXJlQ29udGFjdHNcIl0gPSBcInNoYXJlLWNvbnRhY3RzXCI7XG4gIENvbW1hbmQyW1wiUmVxdWVzdFBlcm1pc3Npb25cIl0gPSBcInJlcXVlc3QtcGVybWlzc2lvblwiO1xuICBDb21tYW5kMltcIkdldFBlcm1pc3Npb25zXCJdID0gXCJnZXQtcGVybWlzc2lvbnNcIjtcbiAgQ29tbWFuZDJbXCJTZW5kSGFwdGljRmVlZGJhY2tcIl0gPSBcInNlbmQtaGFwdGljLWZlZWRiYWNrXCI7XG4gIENvbW1hbmQyW1wiU2hhcmVcIl0gPSBcInNoYXJlXCI7XG4gIENvbW1hbmQyW1wiQ2hhdFwiXSA9IFwiY2hhdFwiO1xuICByZXR1cm4gQ29tbWFuZDI7XG59KShDb21tYW5kIHx8IHt9KTtcbnZhciBQZXJtaXNzaW9uID0gLyogQF9fUFVSRV9fICovICgoUGVybWlzc2lvbjIpID0+IHtcbiAgUGVybWlzc2lvbjJbXCJOb3RpZmljYXRpb25zXCJdID0gXCJub3RpZmljYXRpb25zXCI7XG4gIFBlcm1pc3Npb24yW1wiQ29udGFjdHNcIl0gPSBcImNvbnRhY3RzXCI7XG4gIFBlcm1pc3Npb24yW1wiTWljcm9waG9uZVwiXSA9IFwibWljcm9waG9uZVwiO1xuICByZXR1cm4gUGVybWlzc2lvbjI7XG59KShQZXJtaXNzaW9uIHx8IHt9KTtcblxuLy8gdHlwZXMvaW5pdC50c1xudmFyIE1pbmlBcHBMYXVuY2hMb2NhdGlvbiA9IC8qIEBfX1BVUkVfXyAqLyAoKE1pbmlBcHBMYXVuY2hMb2NhdGlvbjMpID0+IHtcbiAgTWluaUFwcExhdW5jaExvY2F0aW9uM1tcIkNoYXRcIl0gPSBcImNoYXRcIjtcbiAgTWluaUFwcExhdW5jaExvY2F0aW9uM1tcIkhvbWVcIl0gPSBcImhvbWVcIjtcbiAgTWluaUFwcExhdW5jaExvY2F0aW9uM1tcIkFwcFN0b3JlXCJdID0gXCJhcHAtc3RvcmVcIjtcbiAgTWluaUFwcExhdW5jaExvY2F0aW9uM1tcIkRlZXBMaW5rXCJdID0gXCJkZWVwLWxpbmtcIjtcbiAgTWluaUFwcExhdW5jaExvY2F0aW9uM1tcIldhbGxldFRhYlwiXSA9IFwid2FsbGV0LXRhYlwiO1xuICByZXR1cm4gTWluaUFwcExhdW5jaExvY2F0aW9uMztcbn0pKE1pbmlBcHBMYXVuY2hMb2NhdGlvbiB8fCB7fSk7XG52YXIgV09STERfQVBQX0xBVU5DSF9MT0NBVElPTl9NQVAgPSB7XG4gIFwiYXBwLXN0b3JlXCI6IFwiYXBwLXN0b3JlXCIgLyogQXBwU3RvcmUgKi8sXG4gIGNhcm91c2VsOiBcImFwcC1zdG9yZVwiIC8qIEFwcFN0b3JlICovLFxuICBleHBsb3JlOiBcImFwcC1zdG9yZVwiIC8qIEFwcFN0b3JlICovLFxuICBhcHBfZGV0YWlsczogXCJhcHAtc3RvcmVcIiAvKiBBcHBTdG9yZSAqLyxcbiAgZGVlcGxpbms6IFwiZGVlcC1saW5rXCIgLyogRGVlcExpbmsgKi8sXG4gIGhvbWVwYWdlOiBcImhvbWVcIiAvKiBIb21lICovLFxuICB3YWxsZXRfdGFiOiBcIndhbGxldC10YWJcIiAvKiBXYWxsZXRUYWIgKi8sXG4gIHdvcmxkX2NoYXQ6IFwiY2hhdFwiIC8qIENoYXQgKi9cbn07XG52YXIgbWFwV29ybGRBcHBMYXVuY2hMb2NhdGlvbiA9IChsb2NhdGlvbikgPT4ge1xuICBpZiAoIWxvY2F0aW9uIHx8IHR5cGVvZiBsb2NhdGlvbiAhPT0gXCJzdHJpbmdcIikgcmV0dXJuIG51bGw7XG4gIGNvbnNvbGUubG9nKFwiTWluaUtpdCBsYXVuY2ggbG9jYXRpb24gbWFwcGVkOlwiLCBsb2NhdGlvbik7XG4gIGNvbnN0IG5vcm1hbGl6ZWRMb2NhdGlvbiA9IGxvY2F0aW9uLnRvTG93ZXJDYXNlKCk7XG4gIHJldHVybiBXT1JMRF9BUFBfTEFVTkNIX0xPQ0FUSU9OX01BUFtub3JtYWxpemVkTG9jYXRpb25dID8/IG51bGw7XG59O1xuXG4vLyBtaW5pa2l0LnRzXG5pbXBvcnQgeyBWZXJpZmljYXRpb25MZXZlbCB9IGZyb20gXCJAd29ybGRjb2luL2lka2l0LWNvcmVcIjtcbmltcG9ydCB7IGVuY29kZUFjdGlvbiwgZ2VuZXJhdGVTaWduYWwgfSBmcm9tIFwiQHdvcmxkY29pbi9pZGtpdC1jb3JlL2hhc2hpbmdcIjtcblxuLy8gaGVscGVycy9zZW5kLXdlYnZpZXctZXZlbnQudHNcbnZhciBzZW5kV2Vidmlld0V2ZW50ID0gKHBheWxvYWQpID0+IHtcbiAgaWYgKHdpbmRvdy53ZWJraXQpIHtcbiAgICB3aW5kb3cud2Via2l0Py5tZXNzYWdlSGFuZGxlcnM/Lm1pbmlraXQ/LnBvc3RNZXNzYWdlPy4ocGF5bG9hZCk7XG4gIH0gZWxzZSBpZiAod2luZG93LkFuZHJvaWQpIHtcbiAgICB3aW5kb3cuQW5kcm9pZC5wb3N0TWVzc2FnZT8uKEpTT04uc3RyaW5naWZ5KHBheWxvYWQpKTtcbiAgfVxufTtcblxuLy8gaGVscGVycy9taWNyb3Bob25lL2luZGV4LnRzXG52YXIgbWljcm9waG9uZVNldHVwRG9uZSA9IGZhbHNlO1xudmFyIHNldHVwTWljcm9waG9uZSA9ICgpID0+IHtcbiAgaWYgKG1pY3JvcGhvbmVTZXR1cERvbmUpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgaWYgKHR5cGVvZiBuYXZpZ2F0b3IgIT09IFwidW5kZWZpbmVkXCIgJiYgIW5hdmlnYXRvci5tZWRpYURldmljZXM/LmdldFVzZXJNZWRpYSlcbiAgICByZXR1cm47XG4gIGNvbnN0IG9yaWdpbmFsU3RvcCA9IE1lZGlhU3RyZWFtVHJhY2sucHJvdG90eXBlLnN0b3A7XG4gIE1lZGlhU3RyZWFtVHJhY2sucHJvdG90eXBlLnN0b3AgPSBmdW5jdGlvbigpIHtcbiAgICBvcmlnaW5hbFN0b3AuY2FsbCh0aGlzKTtcbiAgICBpZiAodGhpcy5yZWFkeVN0YXRlID09PSBcImVuZGVkXCIpIHtcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4gdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudChcImVuZGVkXCIpKSwgMCk7XG4gICAgfVxuICB9O1xuICBjb25zdCByZWFsR1VNID0gbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEuYmluZChcbiAgICBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzXG4gICk7XG4gIGNvbnN0IGxpdmUgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpO1xuICBhc3luYyBmdW5jdGlvbiB3cmFwcGVkKGNvbnN0cmFpbnRzKSB7XG4gICAgY29uc3Qgc3RyZWFtID0gYXdhaXQgcmVhbEdVTShjb25zdHJhaW50cyk7XG4gICAgY29uc3QgaGFzQXVkaW9UcmFjayA9IHN0cmVhbS5nZXRBdWRpb1RyYWNrcygpLmxlbmd0aCA+IDA7XG4gICAgaWYgKGhhc0F1ZGlvVHJhY2spIHtcbiAgICAgIHNlbmRXZWJ2aWV3RXZlbnQoe1xuICAgICAgICBjb21tYW5kOiBcIm1pY3JvcGhvbmUtc3RyZWFtLXN0YXJ0ZWRcIixcbiAgICAgICAgdmVyc2lvbjogMSxcbiAgICAgICAgcGF5bG9hZDoge1xuICAgICAgICAgIHN0cmVhbUlkOiBzdHJlYW0uaWRcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBsaXZlLmFkZChzdHJlYW0pO1xuICAgICAgc3RyZWFtLmdldEF1ZGlvVHJhY2tzKCkuZm9yRWFjaCgodCkgPT4ge1xuICAgICAgICB0LmFkZEV2ZW50TGlzdGVuZXIoXCJlbmRlZFwiLCAoKSA9PiB7XG4gICAgICAgICAgY29uc3QgYWxsQXVkaW9UcmFja3NFbmRlZCA9IHN0cmVhbS5nZXRBdWRpb1RyYWNrcygpLmV2ZXJ5KCh0cmFjaykgPT4gdHJhY2sucmVhZHlTdGF0ZSA9PT0gXCJlbmRlZFwiKTtcbiAgICAgICAgICBpZiAoYWxsQXVkaW9UcmFja3NFbmRlZCkge1xuICAgICAgICAgICAgc2VuZFdlYnZpZXdFdmVudCh7XG4gICAgICAgICAgICAgIGNvbW1hbmQ6IFwibWljcm9waG9uZS1zdHJlYW0tZW5kZWRcIixcbiAgICAgICAgICAgICAgdmVyc2lvbjogMSxcbiAgICAgICAgICAgICAgcGF5bG9hZDoge1xuICAgICAgICAgICAgICAgIHN0cmVhbUlkOiBzdHJlYW0uaWRcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBsaXZlLmRlbGV0ZShzdHJlYW0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHN0cmVhbTtcbiAgfVxuICBPYmplY3QuZGVmaW5lUHJvcGVydHkobmF2aWdhdG9yLm1lZGlhRGV2aWNlcywgXCJnZXRVc2VyTWVkaWFcIiwge1xuICAgIHZhbHVlOiB3cmFwcGVkLFxuICAgIHdyaXRhYmxlOiBmYWxzZSxcbiAgICBjb25maWd1cmFibGU6IGZhbHNlLFxuICAgIGVudW1lcmFibGU6IHRydWVcbiAgfSk7XG4gIE9iamVjdC5mcmVlemUobmF2aWdhdG9yLm1lZGlhRGV2aWNlcyk7XG4gIGNvbnN0IHN0b3BBbGxNaW5pQXBwTWljcm9waG9uZVN0cmVhbXMgPSAoKSA9PiB7XG4gICAgbGl2ZS5mb3JFYWNoKChzKSA9PiB7XG4gICAgICBjb25zdCBhdWRpb1RyYWNrcyA9IHMuZ2V0QXVkaW9UcmFja3MoKTtcbiAgICAgIGlmIChhdWRpb1RyYWNrcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGF1ZGlvVHJhY2tzLmZvckVhY2goKHQpID0+IHtcbiAgICAgICAgICB0LnN0b3AoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHNlbmRXZWJ2aWV3RXZlbnQoe1xuICAgICAgICAgIGNvbW1hbmQ6IFwibWljcm9waG9uZS1zdHJlYW0tZW5kZWRcIixcbiAgICAgICAgICB2ZXJzaW9uOiAxLFxuICAgICAgICAgIHBheWxvYWQ6IHtcbiAgICAgICAgICAgIHN0cmVhbUlkOiBzLmlkXG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBsaXZlLmNsZWFyKCk7XG4gIH07XG4gIE1pbmlLaXQuc3Vic2NyaWJlKFwibWluaWFwcC1taWNyb3Bob25lXCIgLyogTWluaUFwcE1pY3JvcGhvbmUgKi8sIChwYXlsb2FkKSA9PiB7XG4gICAgaWYgKHBheWxvYWQuc3RhdHVzID09PSBcImVycm9yXCIgJiYgKHBheWxvYWQuZXJyb3JfY29kZSA9PT0gXCJtaW5pX2FwcF9wZXJtaXNzaW9uX25vdF9lbmFibGVkXCIgLyogTWluaUFwcFBlcm1pc3Npb25Ob3RFbmFibGVkICovIHx8IHBheWxvYWQuZXJyb3JfY29kZSA9PT0gXCJ3b3JsZF9hcHBfcGVybWlzc2lvbl9ub3RfZW5hYmxlZFwiIC8qIFdvcmxkQXBwUGVybWlzc2lvbk5vdEVuYWJsZWQgKi8pKSB7XG4gICAgICBjb25zb2xlLmxvZyhcInN0b3BwaW5nIGFsbCBtaWNyb3Bob25lIHN0cmVhbXNcIiwgcGF5bG9hZCk7XG4gICAgICBzdG9wQWxsTWluaUFwcE1pY3JvcGhvbmVTdHJlYW1zKCk7XG4gICAgfVxuICB9KTtcbiAgd2luZG93Ll9fc3RvcEFsbE1pbmlBcHBNaWNyb3Bob25lU3RyZWFtcyA9IHN0b3BBbGxNaW5pQXBwTWljcm9waG9uZVN0cmVhbXM7XG4gIG1pY3JvcGhvbmVTZXR1cERvbmUgPSB0cnVlO1xufTtcblxuLy8gaGVscGVycy9wcm9vZi9pbmRleC50c1xuaW1wb3J0IHtcbiAgY3JlYXRlUHVibGljQ2xpZW50IGFzIGNyZWF0ZVB1YmxpY0NsaWVudDIsXG4gIGRlY29kZUFiaVBhcmFtZXRlcnMsXG4gIGVuY29kZUFiaVBhcmFtZXRlcnMsXG4gIGh0dHAgYXMgaHR0cDJcbn0gZnJvbSBcInZpZW1cIjtcbmltcG9ydCB7IHdvcmxkY2hhaW4gYXMgd29ybGRjaGFpbjIgfSBmcm9tIFwidmllbS9jaGFpbnNcIjtcbnZhciBzZW1hcGhvcmVWZXJpZmllckFkZHJlc3MgPSBcIjB4NzlmNDZiOTRkMTM0MTA5RWJjYmJkZEJBZUQwRTg4NzkwNDA5QTBlNFwiO1xudmFyIHNlbWFwaG9yZVZlcmlmaWVyQWJpID0gW1xuICB7XG4gICAgaW5wdXRzOiBbXG4gICAgICB7XG4gICAgICAgIGludGVybmFsVHlwZTogXCJ1aW50MjU2WzhdXCIsXG4gICAgICAgIG5hbWU6IFwicHJvb2ZcIixcbiAgICAgICAgdHlwZTogXCJ1aW50MjU2WzhdXCJcbiAgICAgIH1cbiAgICBdLFxuICAgIG5hbWU6IFwiY29tcHJlc3NQcm9vZlwiLFxuICAgIG91dHB1dHM6IFtcbiAgICAgIHtcbiAgICAgICAgaW50ZXJuYWxUeXBlOiBcInVpbnQyNTZbNF1cIixcbiAgICAgICAgbmFtZTogXCJjb21wcmVzc2VkXCIsXG4gICAgICAgIHR5cGU6IFwidWludDI1Nls0XVwiXG4gICAgICB9XG4gICAgXSxcbiAgICBzdGF0ZU11dGFiaWxpdHk6IFwidmlld1wiLFxuICAgIHR5cGU6IFwiZnVuY3Rpb25cIlxuICB9XG5dO1xudmFyIGNvbXByZXNzQW5kUGFkUHJvb2YgPSBhc3luYyAocHJvb2YsIHJwY1VybCkgPT4ge1xuICB0cnkge1xuICAgIGNvbnN0IHB1YmxpY0NsaWVudCA9IGNyZWF0ZVB1YmxpY0NsaWVudDIoe1xuICAgICAgY2hhaW46IHdvcmxkY2hhaW4yLFxuICAgICAgdHJhbnNwb3J0OiBodHRwMihcbiAgICAgICAgcnBjVXJsIHx8IFwiaHR0cHM6Ly93b3JsZGNoYWluLW1haW5uZXQuZy5hbGNoZW15LmNvbS9wdWJsaWNcIlxuICAgICAgKVxuICAgIH0pO1xuICAgIGNvbnN0IGRlY29kZWRQcm9vZiA9IGRlY29kZUFiaVBhcmFtZXRlcnMoXG4gICAgICBbeyB0eXBlOiBcInVpbnQyNTZbOF1cIiB9XSxcbiAgICAgIHByb29mXG4gICAgKVswXTtcbiAgICBjb25zdCBjb21wcmVzc2VkUHJvb2YgPSBhd2FpdCBwdWJsaWNDbGllbnQucmVhZENvbnRyYWN0KHtcbiAgICAgIGFkZHJlc3M6IHNlbWFwaG9yZVZlcmlmaWVyQWRkcmVzcyxcbiAgICAgIGFiaTogc2VtYXBob3JlVmVyaWZpZXJBYmksXG4gICAgICBmdW5jdGlvbk5hbWU6IFwiY29tcHJlc3NQcm9vZlwiLFxuICAgICAgYXJnczogW2RlY29kZWRQcm9vZl1cbiAgICB9KTtcbiAgICBjb25zdCBwYWRkZWRQcm9vZiA9IFsuLi5jb21wcmVzc2VkUHJvb2YsIDBuLCAwbiwgMG4sIDBuXTtcbiAgICByZXR1cm4gZW5jb2RlQWJpUGFyYW1ldGVycyhbeyB0eXBlOiBcInVpbnQyNTZbOF1cIiB9XSwgW3BhZGRlZFByb29mXSk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZXR1cm4gcHJvb2Y7XG4gIH1cbn07XG5cbi8vIGhlbHBlcnMvc2hhcmUvaW5kZXgudHNcbnZhciBNQVhfRklMRVMgPSAxMDtcbnZhciBNQVhfVE9UQUxfU0laRV9NQiA9IDUwO1xudmFyIE1BWF9UT1RBTF9TSVpFX0JZVEVTID0gTUFYX1RPVEFMX1NJWkVfTUIgKiAxMDI0ICogMTAyNDtcbnZhciBwcm9jZXNzRmlsZSA9IGFzeW5jIChmaWxlKSA9PiB7XG4gIGNvbnN0IGJ1ZmZlciA9IGF3YWl0IGZpbGUuYXJyYXlCdWZmZXIoKTtcbiAgY29uc3QgdWludDhBcnJheSA9IG5ldyBVaW50OEFycmF5KGJ1ZmZlcik7XG4gIGxldCBiaW5hcnlTdHJpbmcgPSBcIlwiO1xuICBjb25zdCBLX0NIVU5LX1NJWkUgPSAzMjc2ODtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCB1aW50OEFycmF5Lmxlbmd0aDsgaSArPSBLX0NIVU5LX1NJWkUpIHtcbiAgICBjb25zdCBjaHVuayA9IHVpbnQ4QXJyYXkuc3ViYXJyYXkoXG4gICAgICBpLFxuICAgICAgTWF0aC5taW4oaSArIEtfQ0hVTktfU0laRSwgdWludDhBcnJheS5sZW5ndGgpXG4gICAgKTtcbiAgICBiaW5hcnlTdHJpbmcgKz0gU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShcbiAgICAgIG51bGwsXG4gICAgICBBcnJheS5mcm9tKGNodW5rKVxuICAgICAgLy8gQ29udmVydCBVaW50OEFycmF5IGNodW5rIHRvIG51bWJlcltdXG4gICAgKTtcbiAgfVxuICBjb25zdCBiYXNlNjREYXRhID0gYnRvYShiaW5hcnlTdHJpbmcpO1xuICByZXR1cm4ge1xuICAgIG5hbWU6IGZpbGUubmFtZSxcbiAgICB0eXBlOiBmaWxlLnR5cGUsXG4gICAgZGF0YTogYmFzZTY0RGF0YVxuICB9O1xufTtcbnZhciBmb3JtYXRTaGFyZUlucHV0ID0gYXN5bmMgKGlucHV0KSA9PiB7XG4gIGlmICghaW5wdXQuZmlsZXMpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdGl0bGU6IGlucHV0LnRpdGxlLFxuICAgICAgdGV4dDogaW5wdXQudGV4dCxcbiAgICAgIHVybDogaW5wdXQudXJsXG4gICAgfTtcbiAgfVxuICBpZiAoIUFycmF5LmlzQXJyYXkoaW5wdXQuZmlsZXMpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdUaGUgXCJmaWxlc1wiIHByb3BlcnR5IG11c3QgYmUgYW4gYXJyYXkuJyk7XG4gIH1cbiAgaWYgKGlucHV0LmZpbGVzLmxlbmd0aCA9PT0gMCkge1xuICB9IGVsc2Uge1xuICAgIGlmIChpbnB1dC5maWxlcy5sZW5ndGggPiBNQVhfRklMRVMpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgQ2Fubm90IHNoYXJlIG1vcmUgdGhhbiAke01BWF9GSUxFU30gZmlsZXMuYCk7XG4gICAgfVxuICAgIGxldCB0b3RhbFNpemUgPSAwO1xuICAgIGZvciAoY29uc3QgZmlsZSBvZiBpbnB1dC5maWxlcykge1xuICAgICAgaWYgKCEoZmlsZSBpbnN0YW5jZW9mIEZpbGUpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICBgRWFjaCBpdGVtIGluIHRoZSAnZmlsZXMnIGFycmF5IG11c3QgYmUgYSBGaWxlIG9iamVjdC4gUmVjZWl2ZWQ6ICR7dHlwZW9mIGZpbGV9YFxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgdG90YWxTaXplICs9IGZpbGUuc2l6ZTtcbiAgICB9XG4gICAgaWYgKHRvdGFsU2l6ZSA+IE1BWF9UT1RBTF9TSVpFX0JZVEVTKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYFRvdGFsIGZpbGUgc2l6ZSBjYW5ub3QgZXhjZWVkICR7TUFYX1RPVEFMX1NJWkVfTUJ9TUIuYCk7XG4gICAgfVxuICB9XG4gIGNvbnN0IGZpbGVQcm9jZXNzaW5nUHJvbWlzZXMgPSBpbnB1dC5maWxlcy5tYXAoKGZpbGUpID0+IHByb2Nlc3NGaWxlKGZpbGUpKTtcbiAgY29uc3QgcHJvY2Vzc2VkRmlsZXMgPSBhd2FpdCBQcm9taXNlLmFsbChmaWxlUHJvY2Vzc2luZ1Byb21pc2VzKTtcbiAgcmV0dXJuIHtcbiAgICBmaWxlczogcHJvY2Vzc2VkRmlsZXMsXG4gICAgdGl0bGU6IGlucHV0LnRpdGxlLFxuICAgIHRleHQ6IGlucHV0LnRleHQsXG4gICAgdXJsOiBpbnB1dC51cmxcbiAgfTtcbn07XG5cbi8vIGhlbHBlcnMvc2l3ZS92YWxpZGF0ZS13YWxsZXQtYXV0aC1jb21tYW5kLWlucHV0LnRzXG52YXIgdmFsaWRhdGVXYWxsZXRBdXRoQ29tbWFuZElucHV0ID0gKHBhcmFtcykgPT4ge1xuICBpZiAoIXBhcmFtcy5ub25jZSkge1xuICAgIHJldHVybiB7IHZhbGlkOiBmYWxzZSwgbWVzc2FnZTogXCInbm9uY2UnIGlzIHJlcXVpcmVkXCIgfTtcbiAgfVxuICBpZiAocGFyYW1zLm5vbmNlLmxlbmd0aCA8IDgpIHtcbiAgICByZXR1cm4geyB2YWxpZDogZmFsc2UsIG1lc3NhZ2U6IFwiJ25vbmNlJyBtdXN0IGJlIGF0IGxlYXN0IDggY2hhcmFjdGVyc1wiIH07XG4gIH1cbiAgaWYgKHBhcmFtcy5zdGF0ZW1lbnQgJiYgcGFyYW1zLnN0YXRlbWVudC5pbmNsdWRlcyhcIlxcblwiKSkge1xuICAgIHJldHVybiB7IHZhbGlkOiBmYWxzZSwgbWVzc2FnZTogXCInc3RhdGVtZW50JyBtdXN0IG5vdCBjb250YWluIG5ld2xpbmVzXCIgfTtcbiAgfVxuICBpZiAocGFyYW1zLmV4cGlyYXRpb25UaW1lICYmIG5ldyBEYXRlKHBhcmFtcy5leHBpcmF0aW9uVGltZSkgPCAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKSkge1xuICAgIHJldHVybiB7IHZhbGlkOiBmYWxzZSwgbWVzc2FnZTogXCInZXhwaXJhdGlvblRpbWUnIG11c3QgYmUgaW4gdGhlIGZ1dHVyZVwiIH07XG4gIH1cbiAgaWYgKHBhcmFtcy5leHBpcmF0aW9uVGltZSAmJiBuZXcgRGF0ZShwYXJhbXMuZXhwaXJhdGlvblRpbWUpID4gbmV3IERhdGUoRGF0ZS5ub3coKSArIDcgKiAyNCAqIDYwICogNjAgKiAxZTMpKSB7XG4gICAgcmV0dXJuIHsgdmFsaWQ6IGZhbHNlLCBtZXNzYWdlOiBcIidleHBpcmF0aW9uVGltZScgbXVzdCBiZSB3aXRoaW4gNyBkYXlzXCIgfTtcbiAgfVxuICBpZiAocGFyYW1zLm5vdEJlZm9yZSAmJiBuZXcgRGF0ZShwYXJhbXMubm90QmVmb3JlKSA+IG5ldyBEYXRlKERhdGUubm93KCkgKyA3ICogMjQgKiA2MCAqIDYwICogMWUzKSkge1xuICAgIHJldHVybiB7IHZhbGlkOiBmYWxzZSwgbWVzc2FnZTogXCInbm90QmVmb3JlJyBtdXN0IGJlIHdpdGhpbiA3IGRheXNcIiB9O1xuICB9XG4gIHJldHVybiB7IHZhbGlkOiB0cnVlIH07XG59O1xuXG4vLyBoZWxwZXJzL3RyYW5zYWN0aW9uL3ZhbGlkYXRlLXBheWxvYWQudHNcbnZhciBpc1ZhbGlkSGV4ID0gKHN0cikgPT4ge1xuICByZXR1cm4gL14weFswLTlBLUZhLWZdKyQvLnRlc3Qoc3RyKTtcbn07XG52YXIgb2JqZWN0VmFsdWVzVG9BcnJheVJlY3Vyc2l2ZSA9IChpbnB1dCkgPT4ge1xuICBpZiAoaW5wdXQgPT09IG51bGwgfHwgdHlwZW9mIGlucHV0ICE9PSBcIm9iamVjdFwiKSB7XG4gICAgcmV0dXJuIGlucHV0O1xuICB9XG4gIGlmIChBcnJheS5pc0FycmF5KGlucHV0KSkge1xuICAgIHJldHVybiBpbnB1dC5tYXAoKGl0ZW0pID0+IG9iamVjdFZhbHVlc1RvQXJyYXlSZWN1cnNpdmUoaXRlbSkpO1xuICB9XG4gIGNvbnN0IHZhbHVlcyA9IE9iamVjdC52YWx1ZXMoaW5wdXQpO1xuICByZXR1cm4gdmFsdWVzLm1hcCgodmFsdWUpID0+IG9iamVjdFZhbHVlc1RvQXJyYXlSZWN1cnNpdmUodmFsdWUpKTtcbn07XG52YXIgcHJvY2Vzc1BheWxvYWQgPSAocGF5bG9hZCkgPT4ge1xuICBpZiAodHlwZW9mIHBheWxvYWQgPT09IFwiYm9vbGVhblwiIHx8IHR5cGVvZiBwYXlsb2FkID09PSBcInN0cmluZ1wiIHx8IHBheWxvYWQgPT09IG51bGwgfHwgcGF5bG9hZCA9PT0gdm9pZCAwKSB7XG4gICAgcmV0dXJuIHBheWxvYWQ7XG4gIH1cbiAgaWYgKHR5cGVvZiBwYXlsb2FkID09PSBcIm51bWJlclwiIHx8IHR5cGVvZiBwYXlsb2FkID09PSBcImJpZ2ludFwiKSB7XG4gICAgcmV0dXJuIFN0cmluZyhwYXlsb2FkKTtcbiAgfVxuICBpZiAoQXJyYXkuaXNBcnJheShwYXlsb2FkKSkge1xuICAgIHJldHVybiBwYXlsb2FkLm1hcCgodmFsdWUpID0+IHByb2Nlc3NQYXlsb2FkKHZhbHVlKSk7XG4gIH1cbiAgaWYgKHR5cGVvZiBwYXlsb2FkID09PSBcIm9iamVjdFwiKSB7XG4gICAgY29uc3QgcmVzdWx0ID0geyAuLi5wYXlsb2FkIH07XG4gICAgaWYgKFwidmFsdWVcIiBpbiByZXN1bHQgJiYgcmVzdWx0LnZhbHVlICE9PSB2b2lkIDApIHtcbiAgICAgIGlmICh0eXBlb2YgcmVzdWx0LnZhbHVlICE9PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIHJlc3VsdC52YWx1ZSA9IFN0cmluZyhyZXN1bHQudmFsdWUpO1xuICAgICAgfVxuICAgICAgaWYgKCFpc1ZhbGlkSGV4KHJlc3VsdC52YWx1ZSkpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcbiAgICAgICAgICBcIlRyYW5zYWN0aW9uIHZhbHVlIG11c3QgYmUgYSB2YWxpZCBoZXggc3RyaW5nXCIsXG4gICAgICAgICAgcmVzdWx0LnZhbHVlXG4gICAgICAgICk7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICBgVHJhbnNhY3Rpb24gdmFsdWUgbXVzdCBiZSBhIHZhbGlkIGhleCBzdHJpbmc6ICR7cmVzdWx0LnZhbHVlfWBcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG4gICAgZm9yIChjb25zdCBrZXkgaW4gcmVzdWx0KSB7XG4gICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHJlc3VsdCwga2V5KSkge1xuICAgICAgICByZXN1bHRba2V5XSA9IHByb2Nlc3NQYXlsb2FkKHJlc3VsdFtrZXldKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuICByZXR1cm4gcGF5bG9hZDtcbn07XG52YXIgdmFsaWRhdGVTZW5kVHJhbnNhY3Rpb25QYXlsb2FkID0gKHBheWxvYWQpID0+IHtcbiAgaWYgKHBheWxvYWQuZm9ybWF0UGF5bG9hZCkge1xuICAgIGNvbnN0IGZvcm1hdHRlZFBheWxvYWQgPSBwcm9jZXNzUGF5bG9hZChwYXlsb2FkKTtcbiAgICBmb3JtYXR0ZWRQYXlsb2FkLnRyYW5zYWN0aW9uID0gZm9ybWF0dGVkUGF5bG9hZC50cmFuc2FjdGlvbi5tYXAoKHR4KSA9PiB7XG4gICAgICBjb25zdCBhcmdzID0gb2JqZWN0VmFsdWVzVG9BcnJheVJlY3Vyc2l2ZSh0eC5hcmdzKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIC4uLnR4LFxuICAgICAgICBhcmdzXG4gICAgICB9O1xuICAgIH0pO1xuICAgIHJldHVybiBmb3JtYXR0ZWRQYXlsb2FkO1xuICB9XG4gIHJldHVybiBwYXlsb2FkO1xufTtcblxuLy8gaGVscGVycy91c2VybmFtZXMvaW5kZXgudHNcbnZhciBnZXRVc2VyUHJvZmlsZSA9IGFzeW5jIChhZGRyZXNzKSA9PiB7XG4gIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKFwiaHR0cHM6Ly91c2VybmFtZXMud29ybGRjb2luLm9yZy9hcGkvdjEvcXVlcnlcIiwge1xuICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgaGVhZGVyczoge1xuICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICB9LFxuICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgIGFkZHJlc3NlczogW2FkZHJlc3NdXG4gICAgfSlcbiAgfSk7XG4gIGNvbnN0IHVzZXJuYW1lcyA9IGF3YWl0IHJlcy5qc29uKCk7XG4gIHJldHVybiB1c2VybmFtZXM/LlswXSA/PyB7IHVzZXJuYW1lOiBudWxsLCBwcm9maWxlX3BpY3R1cmVfdXJsOiBudWxsIH07XG59O1xuXG4vLyBtaW5pa2l0LnRzXG52YXIgc2VuZE1pbmlLaXRFdmVudCA9IChwYXlsb2FkKSA9PiB7XG4gIHNlbmRXZWJ2aWV3RXZlbnQocGF5bG9hZCk7XG59O1xudmFyIF9NaW5pS2l0ID0gY2xhc3MgX01pbmlLaXQge1xuICBzdGF0aWMgc2VuZEluaXQoKSB7XG4gICAgc2VuZFdlYnZpZXdFdmVudCh7XG4gICAgICBjb21tYW5kOiBcImluaXRcIixcbiAgICAgIHBheWxvYWQ6IHtcbiAgICAgICAgdmVyc2lvbjogdGhpcy5NSU5JS0lUX1ZFUlNJT04sXG4gICAgICAgIG1pbm9yVmVyc2lvbjogdGhpcy5NSU5JS0lUX01JTk9SX1ZFUlNJT05cbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuICBzdGF0aWMgc3Vic2NyaWJlKGV2ZW50LCBoYW5kbGVyKSB7XG4gICAgaWYgKGV2ZW50ID09PSBcIm1pbmlhcHAtd2FsbGV0LWF1dGhcIiAvKiBNaW5pQXBwV2FsbGV0QXV0aCAqLykge1xuICAgICAgY29uc3Qgb3JpZ2luYWxIYW5kbGVyID0gaGFuZGxlcjtcbiAgICAgIGNvbnN0IHdyYXBwZWRIYW5kbGVyID0gYXN5bmMgKHBheWxvYWQpID0+IHtcbiAgICAgICAgaWYgKHBheWxvYWQuc3RhdHVzID09PSBcInN1Y2Nlc3NcIikge1xuICAgICAgICAgIF9NaW5pS2l0LnVzZXIud2FsbGV0QWRkcmVzcyA9IHBheWxvYWQuYWRkcmVzcztcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgdXNlciA9IGF3YWl0IF9NaW5pS2l0LmdldFVzZXJCeUFkZHJlc3MocGF5bG9hZC5hZGRyZXNzKTtcbiAgICAgICAgICAgIF9NaW5pS2l0LnVzZXIgPSB7IC4uLl9NaW5pS2l0LnVzZXIsIC4uLnVzZXIgfTtcbiAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkZhaWxlZCB0byBmZXRjaCB1c2VyIHByb2ZpbGU6XCIsIGVycm9yKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgb3JpZ2luYWxIYW5kbGVyKHBheWxvYWQpO1xuICAgICAgfTtcbiAgICAgIHRoaXMubGlzdGVuZXJzW2V2ZW50XSA9IHdyYXBwZWRIYW5kbGVyO1xuICAgIH0gZWxzZSBpZiAoZXZlbnQgPT09IFwibWluaWFwcC12ZXJpZnktYWN0aW9uXCIgLyogTWluaUFwcFZlcmlmeUFjdGlvbiAqLykge1xuICAgICAgY29uc3Qgb3JpZ2luYWxIYW5kbGVyID0gaGFuZGxlcjtcbiAgICAgIGNvbnN0IHdyYXBwZWRIYW5kbGVyID0gKHBheWxvYWQpID0+IHtcbiAgICAgICAgaWYgKHBheWxvYWQuc3RhdHVzID09PSBcImVycm9yXCIgJiYgcGF5bG9hZC5lcnJvcl9jb2RlID09IFwidXNlcl9yZWplY3RlZFwiKSB7XG4gICAgICAgICAgcGF5bG9hZC5lcnJvcl9jb2RlID0gQXBwRXJyb3JDb2RlczIuVmVyaWZpY2F0aW9uUmVqZWN0ZWQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBheWxvYWQuc3RhdHVzID09PSBcInN1Y2Nlc3NcIiAmJiBwYXlsb2FkLnZlcmlmaWNhdGlvbl9sZXZlbCA9PT0gVmVyaWZpY2F0aW9uTGV2ZWwuT3JiKSB7XG4gICAgICAgICAgY29tcHJlc3NBbmRQYWRQcm9vZihwYXlsb2FkLnByb29mKS50aGVuKFxuICAgICAgICAgICAgKGNvbXByZXNzZWRQcm9vZikgPT4ge1xuICAgICAgICAgICAgICBwYXlsb2FkLnByb29mID0gY29tcHJlc3NlZFByb29mO1xuICAgICAgICAgICAgICBvcmlnaW5hbEhhbmRsZXIocGF5bG9hZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBvcmlnaW5hbEhhbmRsZXIocGF5bG9hZCk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICB0aGlzLmxpc3RlbmVyc1tldmVudF0gPSB3cmFwcGVkSGFuZGxlcjtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5saXN0ZW5lcnNbZXZlbnRdID0gaGFuZGxlcjtcbiAgICB9XG4gIH1cbiAgc3RhdGljIHVuc3Vic2NyaWJlKGV2ZW50KSB7XG4gICAgZGVsZXRlIHRoaXMubGlzdGVuZXJzW2V2ZW50XTtcbiAgfVxuICBzdGF0aWMgdHJpZ2dlcihldmVudCwgcGF5bG9hZCkge1xuICAgIGlmICghdGhpcy5saXN0ZW5lcnNbZXZlbnRdKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICBgTm8gaGFuZGxlciBmb3IgZXZlbnQgJHtldmVudH0sIHBheWxvYWQ6ICR7SlNPTi5zdHJpbmdpZnkocGF5bG9hZCl9YFxuICAgICAgKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5saXN0ZW5lcnNbZXZlbnRdKHBheWxvYWQpO1xuICB9XG4gIHN0YXRpYyBhc3luYyBhd2FpdENvbW1hbmQoZXZlbnQsIGNvbW1hbmQsIGV4ZWN1dG9yKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICBsZXQgY29tbWFuZFBheWxvYWQgPSBudWxsO1xuICAgICAgY29uc3QgaGFuZGxlQW5kVW5zdWJzY3JpYmUgPSAocGF5bG9hZCkgPT4ge1xuICAgICAgICB0aGlzLnVuc3Vic2NyaWJlKGV2ZW50KTtcbiAgICAgICAgcmVzb2x2ZSh7IGNvbW1hbmRQYXlsb2FkLCBmaW5hbFBheWxvYWQ6IHBheWxvYWQgfSk7XG4gICAgICB9O1xuICAgICAgdGhpcy5zdWJzY3JpYmUoZXZlbnQsIGhhbmRsZUFuZFVuc3Vic2NyaWJlKTtcbiAgICAgIGNvbW1hbmRQYXlsb2FkID0gZXhlY3V0b3IoKTtcbiAgICB9KTtcbiAgfVxuICBzdGF0aWMgY29tbWFuZHNWYWxpZCh3b3JsZEFwcFN1cHBvcnRlZENvbW1hbmRzKSB7XG4gICAgbGV0IGFsbENvbW1hbmRzVmFsaWQgPSB0cnVlO1xuICAgIE9iamVjdC5lbnRyaWVzKHRoaXMubWluaUtpdENvbW1hbmRWZXJzaW9uKS5mb3JFYWNoKFxuICAgICAgKFttaW5pa2l0Q29tbWFuZE5hbWUsIHZlcnNpb25dKSA9PiB7XG4gICAgICAgIGNvbnN0IGNvbW1hbmRJbnB1dCA9IHdvcmxkQXBwU3VwcG9ydGVkQ29tbWFuZHMuZmluZChcbiAgICAgICAgICAoY29tbWFuZCkgPT4gY29tbWFuZC5uYW1lID09PSBtaW5pa2l0Q29tbWFuZE5hbWVcbiAgICAgICAgKTtcbiAgICAgICAgbGV0IGlzQ29tbWFuZFZhbGlkID0gZmFsc2U7XG4gICAgICAgIGlmICghY29tbWFuZElucHV0KSB7XG4gICAgICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAgICAgYENvbW1hbmQgJHttaW5pa2l0Q29tbWFuZE5hbWV9IGlzIG5vdCBzdXBwb3J0ZWQgYnkgdGhlIGFwcC4gVHJ5IHVwZGF0aW5nIHRoZSBhcHAgdmVyc2lvbmBcbiAgICAgICAgICApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmIChjb21tYW5kSW5wdXQuc3VwcG9ydGVkX3ZlcnNpb25zLmluY2x1ZGVzKHZlcnNpb24pKSB7XG4gICAgICAgICAgICBfTWluaUtpdC5pc0NvbW1hbmRBdmFpbGFibGVbbWluaWtpdENvbW1hbmROYW1lXSA9IHRydWU7XG4gICAgICAgICAgICBpc0NvbW1hbmRWYWxpZCA9IHRydWU7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlzQ29tbWFuZFZhbGlkID0gdHJ1ZTtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgICAgICAgYENvbW1hbmQgJHttaW5pa2l0Q29tbWFuZE5hbWV9IHZlcnNpb24gJHt2ZXJzaW9ufSBpcyBub3Qgc3VwcG9ydGVkIGJ5IHRoZSBhcHAuIFN1cHBvcnRlZCB2ZXJzaW9uczogJHtjb21tYW5kSW5wdXQuc3VwcG9ydGVkX3ZlcnNpb25zLmpvaW4oXCIsIFwiKX0uIFRoaXMgaXMgbm90IGFuIGVycm9yLCBidXQgaXQgaXMgcmVjb21tZW5kZWQgdG8gdXBkYXRlIHRoZSBXb3JsZCBBcHAgdmVyc2lvbi5gXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgX01pbmlLaXQuaXNDb21tYW5kQXZhaWxhYmxlW21pbmlraXRDb21tYW5kTmFtZV0gPSBpc0NvbW1hbmRWYWxpZDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFpc0NvbW1hbmRWYWxpZCkge1xuICAgICAgICAgIGFsbENvbW1hbmRzVmFsaWQgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICk7XG4gICAgcmV0dXJuIGFsbENvbW1hbmRzVmFsaWQ7XG4gIH1cbiAgc3RhdGljIGluc3RhbGwoYXBwSWQpIHtcbiAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gXCJ1bmRlZmluZWRcIiB8fCBCb29sZWFuKHdpbmRvdy5NaW5pS2l0KSkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIGVycm9yQ29kZTogXCJhbHJlYWR5X2luc3RhbGxlZFwiIC8qIEFscmVhZHlJbnN0YWxsZWQgKi8sXG4gICAgICAgIGVycm9yTWVzc2FnZTogTWluaUtpdEluc3RhbGxFcnJvck1lc3NhZ2VbXCJhbHJlYWR5X2luc3RhbGxlZFwiIC8qIEFscmVhZHlJbnN0YWxsZWQgKi9dXG4gICAgICB9O1xuICAgIH1cbiAgICBpZiAoIWFwcElkKSB7XG4gICAgICBjb25zb2xlLndhcm4oXCJBcHAgSUQgbm90IHByb3ZpZGVkIGR1cmluZyBpbnN0YWxsXCIpO1xuICAgIH0gZWxzZSB7XG4gICAgICBfTWluaUtpdC5hcHBJZCA9IGFwcElkO1xuICAgIH1cbiAgICBpZiAoIXdpbmRvdy5Xb3JsZEFwcCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIGVycm9yQ29kZTogXCJvdXRzaWRlX29mX3dvcmxkYXBwXCIgLyogT3V0c2lkZU9mV29ybGRBcHAgKi8sXG4gICAgICAgIGVycm9yTWVzc2FnZTogTWluaUtpdEluc3RhbGxFcnJvck1lc3NhZ2VbXCJvdXRzaWRlX29mX3dvcmxkYXBwXCIgLyogT3V0c2lkZU9mV29ybGRBcHAgKi9dXG4gICAgICB9O1xuICAgIH1cbiAgICBfTWluaUtpdC51c2VyLm9wdGVkSW50b09wdGlvbmFsQW5hbHl0aWNzID0gd2luZG93LldvcmxkQXBwLmlzX29wdGlvbmFsX2FuYWx5dGljcztcbiAgICBfTWluaUtpdC51c2VyLmRldmljZU9TID0gd2luZG93LldvcmxkQXBwLmRldmljZV9vcztcbiAgICBfTWluaUtpdC51c2VyLndvcmxkQXBwVmVyc2lvbiA9IHdpbmRvdy5Xb3JsZEFwcC53b3JsZF9hcHBfdmVyc2lvbjtcbiAgICBfTWluaUtpdC5kZXZpY2VQcm9wZXJ0aWVzLnNhZmVBcmVhSW5zZXRzID0gd2luZG93LldvcmxkQXBwLnNhZmVfYXJlYV9pbnNldHM7XG4gICAgX01pbmlLaXQuZGV2aWNlUHJvcGVydGllcy5kZXZpY2VPUyA9IHdpbmRvdy5Xb3JsZEFwcC5kZXZpY2Vfb3M7XG4gICAgX01pbmlLaXQuZGV2aWNlUHJvcGVydGllcy53b3JsZEFwcFZlcnNpb24gPSB3aW5kb3cuV29ybGRBcHAud29ybGRfYXBwX3ZlcnNpb247XG4gICAgX01pbmlLaXQubG9jYXRpb24gPSBtYXBXb3JsZEFwcExhdW5jaExvY2F0aW9uKHdpbmRvdy5Xb3JsZEFwcC5sb2NhdGlvbik7XG4gICAgdHJ5IHtcbiAgICAgIHdpbmRvdy5NaW5pS2l0ID0gX01pbmlLaXQ7XG4gICAgICB0aGlzLnNlbmRJbml0KCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgIE1pbmlLaXRJbnN0YWxsRXJyb3JNZXNzYWdlW1widW5rbm93blwiIC8qIFVua25vd24gKi9dLFxuICAgICAgICBlcnJvclxuICAgICAgKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvckNvZGU6IFwidW5rbm93blwiIC8qIFVua25vd24gKi8sXG4gICAgICAgIGVycm9yTWVzc2FnZTogTWluaUtpdEluc3RhbGxFcnJvck1lc3NhZ2VbXCJ1bmtub3duXCIgLyogVW5rbm93biAqL11cbiAgICAgIH07XG4gICAgfVxuICAgIF9NaW5pS2l0LmlzUmVhZHkgPSB0cnVlO1xuICAgIHNldHVwTWljcm9waG9uZSgpO1xuICAgIGlmICghdGhpcy5jb21tYW5kc1ZhbGlkKHdpbmRvdy5Xb3JsZEFwcC5zdXBwb3J0ZWRfY29tbWFuZHMpKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3JDb2RlOiBcImFwcF9vdXRfb2ZfZGF0ZVwiIC8qIEFwcE91dE9mRGF0ZSAqLyxcbiAgICAgICAgZXJyb3JNZXNzYWdlOiBNaW5pS2l0SW5zdGFsbEVycm9yTWVzc2FnZVtcImFwcF9vdXRfb2ZfZGF0ZVwiIC8qIEFwcE91dE9mRGF0ZSAqL11cbiAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfTtcbiAgfVxuICBzdGF0aWMgaXNJbnN0YWxsZWQoZGVidWcpIHtcbiAgICBjb25zdCBpc0luc3RhbGxlZCA9IF9NaW5pS2l0LmlzUmVhZHkgJiYgQm9vbGVhbih3aW5kb3cuTWluaUtpdCk7XG4gICAgaWYgKCFpc0luc3RhbGxlZClcbiAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgIFwiTWluaUtpdCBpcyBub3QgaW5zdGFsbGVkLiBNYWtlIHN1cmUgeW91J3JlIHJ1bm5pbmcgdGhlIGFwcGxpY2F0aW9uIGluc2lkZSBvZiBXb3JsZCBBcHBcIlxuICAgICAgKTtcbiAgICBpZiAoZGVidWcgJiYgaXNJbnN0YWxsZWQpIGNvbnNvbGUubG9nKFwiTWluaUtpdCBpcyBhbGl2ZSFcIik7XG4gICAgcmV0dXJuIGlzSW5zdGFsbGVkO1xuICB9XG59O1xuX01pbmlLaXQuTUlOSUtJVF9WRVJTSU9OID0gMTtcbl9NaW5pS2l0Lk1JTklLSVRfTUlOT1JfVkVSU0lPTiA9IDk2O1xuX01pbmlLaXQubWluaUtpdENvbW1hbmRWZXJzaW9uID0ge1xuICBbXCJ2ZXJpZnlcIiAvKiBWZXJpZnkgKi9dOiAxLFxuICBbXCJwYXlcIiAvKiBQYXkgKi9dOiAxLFxuICBbXCJ3YWxsZXQtYXV0aFwiIC8qIFdhbGxldEF1dGggKi9dOiAyLFxuICBbXCJzZW5kLXRyYW5zYWN0aW9uXCIgLyogU2VuZFRyYW5zYWN0aW9uICovXTogMSxcbiAgW1wic2lnbi1tZXNzYWdlXCIgLyogU2lnbk1lc3NhZ2UgKi9dOiAxLFxuICBbXCJzaWduLXR5cGVkLWRhdGFcIiAvKiBTaWduVHlwZWREYXRhICovXTogMSxcbiAgW1wic2hhcmUtY29udGFjdHNcIiAvKiBTaGFyZUNvbnRhY3RzICovXTogMSxcbiAgW1wicmVxdWVzdC1wZXJtaXNzaW9uXCIgLyogUmVxdWVzdFBlcm1pc3Npb24gKi9dOiAxLFxuICBbXCJnZXQtcGVybWlzc2lvbnNcIiAvKiBHZXRQZXJtaXNzaW9ucyAqL106IDEsXG4gIFtcInNlbmQtaGFwdGljLWZlZWRiYWNrXCIgLyogU2VuZEhhcHRpY0ZlZWRiYWNrICovXTogMSxcbiAgW1wic2hhcmVcIiAvKiBTaGFyZSAqL106IDEsXG4gIFtcImNoYXRcIiAvKiBDaGF0ICovXTogMVxufTtcbl9NaW5pS2l0LmlzQ29tbWFuZEF2YWlsYWJsZSA9IHtcbiAgW1widmVyaWZ5XCIgLyogVmVyaWZ5ICovXTogZmFsc2UsXG4gIFtcInBheVwiIC8qIFBheSAqL106IGZhbHNlLFxuICBbXCJ3YWxsZXQtYXV0aFwiIC8qIFdhbGxldEF1dGggKi9dOiBmYWxzZSxcbiAgW1wic2VuZC10cmFuc2FjdGlvblwiIC8qIFNlbmRUcmFuc2FjdGlvbiAqL106IGZhbHNlLFxuICBbXCJzaWduLW1lc3NhZ2VcIiAvKiBTaWduTWVzc2FnZSAqL106IGZhbHNlLFxuICBbXCJzaWduLXR5cGVkLWRhdGFcIiAvKiBTaWduVHlwZWREYXRhICovXTogZmFsc2UsXG4gIFtcInNoYXJlLWNvbnRhY3RzXCIgLyogU2hhcmVDb250YWN0cyAqL106IGZhbHNlLFxuICBbXCJyZXF1ZXN0LXBlcm1pc3Npb25cIiAvKiBSZXF1ZXN0UGVybWlzc2lvbiAqL106IGZhbHNlLFxuICBbXCJnZXQtcGVybWlzc2lvbnNcIiAvKiBHZXRQZXJtaXNzaW9ucyAqL106IGZhbHNlLFxuICBbXCJzZW5kLWhhcHRpYy1mZWVkYmFja1wiIC8qIFNlbmRIYXB0aWNGZWVkYmFjayAqL106IGZhbHNlLFxuICBbXCJzaGFyZVwiIC8qIFNoYXJlICovXTogZmFsc2UsXG4gIFtcImNoYXRcIiAvKiBDaGF0ICovXTogZmFsc2Vcbn07XG5fTWluaUtpdC5saXN0ZW5lcnMgPSB7XG4gIFtcIm1pbmlhcHAtdmVyaWZ5LWFjdGlvblwiIC8qIE1pbmlBcHBWZXJpZnlBY3Rpb24gKi9dOiAoKSA9PiB7XG4gIH0sXG4gIFtcIm1pbmlhcHAtcGF5bWVudFwiIC8qIE1pbmlBcHBQYXltZW50ICovXTogKCkgPT4ge1xuICB9LFxuICBbXCJtaW5pYXBwLXdhbGxldC1hdXRoXCIgLyogTWluaUFwcFdhbGxldEF1dGggKi9dOiAoKSA9PiB7XG4gIH0sXG4gIFtcIm1pbmlhcHAtc2VuZC10cmFuc2FjdGlvblwiIC8qIE1pbmlBcHBTZW5kVHJhbnNhY3Rpb24gKi9dOiAoKSA9PiB7XG4gIH0sXG4gIFtcIm1pbmlhcHAtc2lnbi1tZXNzYWdlXCIgLyogTWluaUFwcFNpZ25NZXNzYWdlICovXTogKCkgPT4ge1xuICB9LFxuICBbXCJtaW5pYXBwLXNpZ24tdHlwZWQtZGF0YVwiIC8qIE1pbmlBcHBTaWduVHlwZWREYXRhICovXTogKCkgPT4ge1xuICB9LFxuICBbXCJtaW5pYXBwLXNoYXJlLWNvbnRhY3RzXCIgLyogTWluaUFwcFNoYXJlQ29udGFjdHMgKi9dOiAoKSA9PiB7XG4gIH0sXG4gIFtcIm1pbmlhcHAtcmVxdWVzdC1wZXJtaXNzaW9uXCIgLyogTWluaUFwcFJlcXVlc3RQZXJtaXNzaW9uICovXTogKCkgPT4ge1xuICB9LFxuICBbXCJtaW5pYXBwLWdldC1wZXJtaXNzaW9uc1wiIC8qIE1pbmlBcHBHZXRQZXJtaXNzaW9ucyAqL106ICgpID0+IHtcbiAgfSxcbiAgW1wibWluaWFwcC1zZW5kLWhhcHRpYy1mZWVkYmFja1wiIC8qIE1pbmlBcHBTZW5kSGFwdGljRmVlZGJhY2sgKi9dOiAoKSA9PiB7XG4gIH0sXG4gIFtcIm1pbmlhcHAtc2hhcmVcIiAvKiBNaW5pQXBwU2hhcmUgKi9dOiAoKSA9PiB7XG4gIH0sXG4gIFtcIm1pbmlhcHAtbWljcm9waG9uZVwiIC8qIE1pbmlBcHBNaWNyb3Bob25lICovXTogKCkgPT4ge1xuICB9LFxuICBbXCJtaW5pYXBwLWNoYXRcIiAvKiBNaW5pQXBwQ2hhdCAqL106ICgpID0+IHtcbiAgfVxufTtcbl9NaW5pS2l0LmFwcElkID0gbnVsbDtcbl9NaW5pS2l0LnVzZXIgPSB7fTtcbl9NaW5pS2l0LmRldmljZVByb3BlcnRpZXMgPSB7fTtcbl9NaW5pS2l0LmxvY2F0aW9uID0gbnVsbDtcbl9NaW5pS2l0LmlzUmVhZHkgPSBmYWxzZTtcbl9NaW5pS2l0LmdldFVzZXJCeUFkZHJlc3MgPSBhc3luYyAoYWRkcmVzcykgPT4ge1xuICBjb25zdCB1c2VyUHJvZmlsZSA9IGF3YWl0IGdldFVzZXJQcm9maWxlKFxuICAgIGFkZHJlc3MgPz8gX01pbmlLaXQudXNlci53YWxsZXRBZGRyZXNzXG4gICk7XG4gIHJldHVybiB7XG4gICAgd2FsbGV0QWRkcmVzczogYWRkcmVzcyA/PyBfTWluaUtpdC51c2VyLndhbGxldEFkZHJlc3MsXG4gICAgdXNlcm5hbWU6IHVzZXJQcm9maWxlLnVzZXJuYW1lLFxuICAgIHByb2ZpbGVQaWN0dXJlVXJsOiB1c2VyUHJvZmlsZS5wcm9maWxlX3BpY3R1cmVfdXJsXG4gIH07XG59O1xuX01pbmlLaXQuZ2V0VXNlckJ5VXNlcm5hbWUgPSBhc3luYyAodXNlcm5hbWUpID0+IHtcbiAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goXG4gICAgYGh0dHBzOi8vdXNlcm5hbWVzLndvcmxkY29pbi5vcmcvYXBpL3YxLyR7dXNlcm5hbWV9YCxcbiAgICB7XG4gICAgICBtZXRob2Q6IFwiR0VUXCIsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiXG4gICAgICB9XG4gICAgfVxuICApO1xuICBjb25zdCB1c2VyID0gYXdhaXQgcmVzLmpzb24oKTtcbiAgcmV0dXJuIHtcbiAgICB3YWxsZXRBZGRyZXNzOiB1c2VyLmFkZHJlc3MsXG4gICAgdXNlcm5hbWU6IHVzZXIudXNlcm5hbWUsXG4gICAgcHJvZmlsZVBpY3R1cmVVcmw6IHVzZXIucHJvZmlsZV9waWN0dXJlX3VybFxuICB9O1xufTtcbi8vIFRoaXMgaXMgYSBoZWxwZXIgZnVuY3Rpb24gZm9yIGRldmVsb3BlcnMgdG8gZ2VuZXJhdGUgTWluaUFwcCBVUkxzXG5fTWluaUtpdC5nZXRNaW5pQXBwVXJsID0gKGFwcElkLCBwYXRoKSA9PiB7XG4gIGNvbnN0IGJhc2VVcmwgPSBuZXcgVVJMKFwiaHR0cHM6Ly93b3JsZC5vcmcvbWluaS1hcHBcIik7XG4gIGJhc2VVcmwuc2VhcmNoUGFyYW1zLmFwcGVuZChcImFwcF9pZFwiLCBhcHBJZCk7XG4gIGlmIChwYXRoKSB7XG4gICAgY29uc3QgZnVsbFBhdGggPSBwYXRoLnN0YXJ0c1dpdGgoXCIvXCIpID8gcGF0aCA6IGAvJHtwYXRofWA7XG4gICAgYmFzZVVybC5zZWFyY2hQYXJhbXMuYXBwZW5kKFwicGF0aFwiLCBlbmNvZGVVUklDb21wb25lbnQoZnVsbFBhdGgpKTtcbiAgfVxuICByZXR1cm4gYmFzZVVybC50b1N0cmluZygpO1xufTtcbi8vIE9wZW5zIHRoZSBwcm9maWxlIGNhcmQgZm9yIGEgZ2l2ZW4gdXNlcm5hbWUgb3Igd2FsbGV0IGFkZHJlc3Ncbl9NaW5pS2l0LnNob3dQcm9maWxlQ2FyZCA9ICh1c2VybmFtZSwgd2FsbGV0QWRkcmVzcykgPT4ge1xuICBpZiAoIXVzZXJuYW1lICYmICF3YWxsZXRBZGRyZXNzKSB7XG4gICAgY29uc29sZS5lcnJvcihcbiAgICAgIFwiRWl0aGVyIHVzZXJuYW1lIG9yIHdhbGxldEFkZHJlc3MgbXVzdCBiZSBwcm92aWRlZCB0byBzaG93IHByb2ZpbGUgY2FyZFwiXG4gICAgKTtcbiAgICByZXR1cm47XG4gIH1cbiAgaWYgKHVzZXJuYW1lKSB7XG4gICAgd2luZG93Lm9wZW4oXG4gICAgICBgd29ybGRhcHA6Ly9wcm9maWxlP3VzZXJuYW1lPSR7ZW5jb2RlVVJJQ29tcG9uZW50KHVzZXJuYW1lKX1gXG4gICAgKTtcbiAgICByZXR1cm47XG4gIH0gZWxzZSB7XG4gICAgd2luZG93Lm9wZW4oXG4gICAgICBgd29ybGRhcHA6Ly9wcm9maWxlP2FkZHJlc3M9JHtlbmNvZGVVUklDb21wb25lbnQod2FsbGV0QWRkcmVzcyB8fCBcIlwiKX1gXG4gICAgKTtcbiAgfVxufTtcbi8vIFNpbXBseSByZS1leHBvcnRpbmcgdGhlIGV4aXN0aW5nIGZ1bmN0aW9uXG5fTWluaUtpdC5nZXRVc2VySW5mbyA9IF9NaW5pS2l0LmdldFVzZXJCeUFkZHJlc3M7XG5fTWluaUtpdC5jb21tYW5kcyA9IHtcbiAgdmVyaWZ5OiAocGF5bG9hZCkgPT4ge1xuICAgIGlmICh0eXBlb2Ygd2luZG93ID09PSBcInVuZGVmaW5lZFwiIHx8ICFfTWluaUtpdC5pc0NvbW1hbmRBdmFpbGFibGVbXCJ2ZXJpZnlcIiAvKiBWZXJpZnkgKi9dKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICBcIid2ZXJpZnknIGNvbW1hbmQgaXMgdW5hdmFpbGFibGUuIENoZWNrIE1pbmlLaXQuaW5zdGFsbCgpIG9yIHVwZGF0ZSB0aGUgYXBwIHZlcnNpb25cIlxuICAgICAgKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBjb25zdCB0aW1lc3RhbXAgPSAoLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCkpLnRvSVNPU3RyaW5nKCk7XG4gICAgY29uc3QgZXZlbnRQYXlsb2FkID0ge1xuICAgICAgYWN0aW9uOiBlbmNvZGVBY3Rpb24ocGF5bG9hZC5hY3Rpb24pLFxuICAgICAgc2lnbmFsOiBnZW5lcmF0ZVNpZ25hbChwYXlsb2FkLnNpZ25hbCkuZGlnZXN0LFxuICAgICAgdmVyaWZpY2F0aW9uX2xldmVsOiBwYXlsb2FkLnZlcmlmaWNhdGlvbl9sZXZlbCB8fCBWZXJpZmljYXRpb25MZXZlbC5PcmIsXG4gICAgICB0aW1lc3RhbXBcbiAgICB9O1xuICAgIHNlbmRNaW5pS2l0RXZlbnQoe1xuICAgICAgY29tbWFuZDogXCJ2ZXJpZnlcIiAvKiBWZXJpZnkgKi8sXG4gICAgICB2ZXJzaW9uOiBfTWluaUtpdC5taW5pS2l0Q29tbWFuZFZlcnNpb25bXCJ2ZXJpZnlcIiAvKiBWZXJpZnkgKi9dLFxuICAgICAgcGF5bG9hZDogZXZlbnRQYXlsb2FkXG4gICAgfSk7XG4gICAgcmV0dXJuIGV2ZW50UGF5bG9hZDtcbiAgfSxcbiAgcGF5OiAocGF5bG9hZCkgPT4ge1xuICAgIGlmICh0eXBlb2Ygd2luZG93ID09PSBcInVuZGVmaW5lZFwiIHx8ICFfTWluaUtpdC5pc0NvbW1hbmRBdmFpbGFibGVbXCJwYXlcIiAvKiBQYXkgKi9dKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICBcIidwYXknIGNvbW1hbmQgaXMgdW5hdmFpbGFibGUuIENoZWNrIE1pbmlLaXQuaW5zdGFsbCgpIG9yIHVwZGF0ZSB0aGUgYXBwIHZlcnNpb25cIlxuICAgICAgKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBpZiAoIXZhbGlkYXRlUGF5bWVudFBheWxvYWQocGF5bG9hZCkpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBjb25zdCBldmVudFBheWxvYWQgPSB7XG4gICAgICAuLi5wYXlsb2FkLFxuICAgICAgbmV0d29yazogXCJ3b3JsZGNoYWluXCIgLyogV29ybGRDaGFpbiAqL1xuICAgIH07XG4gICAgc2VuZE1pbmlLaXRFdmVudCh7XG4gICAgICBjb21tYW5kOiBcInBheVwiIC8qIFBheSAqLyxcbiAgICAgIHZlcnNpb246IF9NaW5pS2l0Lm1pbmlLaXRDb21tYW5kVmVyc2lvbltcInBheVwiIC8qIFBheSAqL10sXG4gICAgICBwYXlsb2FkOiBldmVudFBheWxvYWRcbiAgICB9KTtcbiAgICByZXR1cm4gZXZlbnRQYXlsb2FkO1xuICB9LFxuICB3YWxsZXRBdXRoOiAocGF5bG9hZCkgPT4ge1xuICAgIGlmICh0eXBlb2Ygd2luZG93ID09PSBcInVuZGVmaW5lZFwiIHx8ICFfTWluaUtpdC5pc0NvbW1hbmRBdmFpbGFibGVbXCJ3YWxsZXQtYXV0aFwiIC8qIFdhbGxldEF1dGggKi9dKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICBcIid3YWxsZXRBdXRoJyBjb21tYW5kIGlzIHVuYXZhaWxhYmxlLiBDaGVjayBNaW5pS2l0Lmluc3RhbGwoKSBvciB1cGRhdGUgdGhlIGFwcCB2ZXJzaW9uXCJcbiAgICAgICk7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgY29uc3QgdmFsaWRhdGlvblJlc3VsdCA9IHZhbGlkYXRlV2FsbGV0QXV0aENvbW1hbmRJbnB1dChwYXlsb2FkKTtcbiAgICBpZiAoIXZhbGlkYXRpb25SZXN1bHQudmFsaWQpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgIFwiRmFpbGVkIHRvIHZhbGlkYXRlIHdhbGxldCBhdXRoIGlucHV0OlxcblxcbiAtLT5cIixcbiAgICAgICAgdmFsaWRhdGlvblJlc3VsdC5tZXNzYWdlXG4gICAgICApO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGxldCBwcm90b2NvbCA9IG51bGw7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGN1cnJlbnRVcmwgPSBuZXcgVVJMKHdpbmRvdy5sb2NhdGlvbi5ocmVmKTtcbiAgICAgIHByb3RvY29sID0gY3VycmVudFVybC5wcm90b2NvbC5zcGxpdChcIjpcIilbMF07XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJGYWlsZWQgdG8gZ2V0IGN1cnJlbnQgVVJMXCIsIGVycm9yKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBjb25zdCBzaXdlTWVzc2FnZSA9IGdlbmVyYXRlU2l3ZU1lc3NhZ2Uoe1xuICAgICAgc2NoZW1lOiBwcm90b2NvbCxcbiAgICAgIGRvbWFpbjogd2luZG93LmxvY2F0aW9uLmhvc3QsXG4gICAgICBzdGF0ZW1lbnQ6IHBheWxvYWQuc3RhdGVtZW50ID8/IHZvaWQgMCxcbiAgICAgIHVyaTogd2luZG93LmxvY2F0aW9uLmhyZWYsXG4gICAgICB2ZXJzaW9uOiBcIjFcIixcbiAgICAgIGNoYWluX2lkOiA0ODAsXG4gICAgICBub25jZTogcGF5bG9hZC5ub25jZSxcbiAgICAgIGlzc3VlZF9hdDogKC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpKS50b0lTT1N0cmluZygpLFxuICAgICAgZXhwaXJhdGlvbl90aW1lOiBwYXlsb2FkLmV4cGlyYXRpb25UaW1lPy50b0lTT1N0cmluZygpID8/IHZvaWQgMCxcbiAgICAgIG5vdF9iZWZvcmU6IHBheWxvYWQubm90QmVmb3JlPy50b0lTT1N0cmluZygpID8/IHZvaWQgMCxcbiAgICAgIHJlcXVlc3RfaWQ6IHBheWxvYWQucmVxdWVzdElkID8/IHZvaWQgMFxuICAgIH0pO1xuICAgIGNvbnN0IHdhbGxldEF1dGhQYXlsb2FkID0geyBzaXdlTWVzc2FnZSB9O1xuICAgIGNvbnN0IHdhbGxldEF1dGhWZXJzaW9uID0gX01pbmlLaXQudXNlci53b3JsZEFwcFZlcnNpb24gJiYgX01pbmlLaXQudXNlci53b3JsZEFwcFZlcnNpb24gPiAyMDg3OTAwID8gX01pbmlLaXQubWluaUtpdENvbW1hbmRWZXJzaW9uW1wid2FsbGV0LWF1dGhcIiAvKiBXYWxsZXRBdXRoICovXSA6IDE7XG4gICAgc2VuZE1pbmlLaXRFdmVudCh7XG4gICAgICBjb21tYW5kOiBcIndhbGxldC1hdXRoXCIgLyogV2FsbGV0QXV0aCAqLyxcbiAgICAgIHZlcnNpb246IHdhbGxldEF1dGhWZXJzaW9uLFxuICAgICAgcGF5bG9hZDogd2FsbGV0QXV0aFBheWxvYWRcbiAgICB9KTtcbiAgICByZXR1cm4gd2FsbGV0QXV0aFBheWxvYWQ7XG4gIH0sXG4gIHNlbmRUcmFuc2FjdGlvbjogKHBheWxvYWQpID0+IHtcbiAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gXCJ1bmRlZmluZWRcIiB8fCAhX01pbmlLaXQuaXNDb21tYW5kQXZhaWxhYmxlW1wic2VuZC10cmFuc2FjdGlvblwiIC8qIFNlbmRUcmFuc2FjdGlvbiAqL10pIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgIFwiJ3NlbmRUcmFuc2FjdGlvbicgY29tbWFuZCBpcyB1bmF2YWlsYWJsZS4gQ2hlY2sgTWluaUtpdC5pbnN0YWxsKCkgb3IgdXBkYXRlIHRoZSBhcHAgdmVyc2lvblwiXG4gICAgICApO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHBheWxvYWQuZm9ybWF0UGF5bG9hZCA9IHBheWxvYWQuZm9ybWF0UGF5bG9hZCAhPT0gZmFsc2U7XG4gICAgY29uc3QgdmFsaWRhdGVkUGF5bG9hZCA9IHZhbGlkYXRlU2VuZFRyYW5zYWN0aW9uUGF5bG9hZChwYXlsb2FkKTtcbiAgICBzZW5kTWluaUtpdEV2ZW50KHtcbiAgICAgIGNvbW1hbmQ6IFwic2VuZC10cmFuc2FjdGlvblwiIC8qIFNlbmRUcmFuc2FjdGlvbiAqLyxcbiAgICAgIHZlcnNpb246IF9NaW5pS2l0Lm1pbmlLaXRDb21tYW5kVmVyc2lvbltcInNlbmQtdHJhbnNhY3Rpb25cIiAvKiBTZW5kVHJhbnNhY3Rpb24gKi9dLFxuICAgICAgcGF5bG9hZDogdmFsaWRhdGVkUGF5bG9hZFxuICAgIH0pO1xuICAgIHJldHVybiB2YWxpZGF0ZWRQYXlsb2FkO1xuICB9LFxuICBzaWduTWVzc2FnZTogKHBheWxvYWQpID0+IHtcbiAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gXCJ1bmRlZmluZWRcIiB8fCAhX01pbmlLaXQuaXNDb21tYW5kQXZhaWxhYmxlW1wic2lnbi1tZXNzYWdlXCIgLyogU2lnbk1lc3NhZ2UgKi9dKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICBcIidzaWduTWVzc2FnZScgY29tbWFuZCBpcyB1bmF2YWlsYWJsZS4gQ2hlY2sgTWluaUtpdC5pbnN0YWxsKCkgb3IgdXBkYXRlIHRoZSBhcHAgdmVyc2lvblwiXG4gICAgICApO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHNlbmRNaW5pS2l0RXZlbnQoe1xuICAgICAgY29tbWFuZDogXCJzaWduLW1lc3NhZ2VcIiAvKiBTaWduTWVzc2FnZSAqLyxcbiAgICAgIHZlcnNpb246IF9NaW5pS2l0Lm1pbmlLaXRDb21tYW5kVmVyc2lvbltcInNpZ24tbWVzc2FnZVwiIC8qIFNpZ25NZXNzYWdlICovXSxcbiAgICAgIHBheWxvYWRcbiAgICB9KTtcbiAgICByZXR1cm4gcGF5bG9hZDtcbiAgfSxcbiAgc2lnblR5cGVkRGF0YTogKHBheWxvYWQpID0+IHtcbiAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gXCJ1bmRlZmluZWRcIiB8fCAhX01pbmlLaXQuaXNDb21tYW5kQXZhaWxhYmxlW1wic2lnbi10eXBlZC1kYXRhXCIgLyogU2lnblR5cGVkRGF0YSAqL10pIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgIFwiJ3NpZ25UeXBlZERhdGEnIGNvbW1hbmQgaXMgdW5hdmFpbGFibGUuIENoZWNrIE1pbmlLaXQuaW5zdGFsbCgpIG9yIHVwZGF0ZSB0aGUgYXBwIHZlcnNpb25cIlxuICAgICAgKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBpZiAoIXBheWxvYWQuY2hhaW5JZCkge1xuICAgICAgcGF5bG9hZC5jaGFpbklkID0gNDgwO1xuICAgIH1cbiAgICBzZW5kTWluaUtpdEV2ZW50KHtcbiAgICAgIGNvbW1hbmQ6IFwic2lnbi10eXBlZC1kYXRhXCIgLyogU2lnblR5cGVkRGF0YSAqLyxcbiAgICAgIHZlcnNpb246IF9NaW5pS2l0Lm1pbmlLaXRDb21tYW5kVmVyc2lvbltcInNpZ24tdHlwZWQtZGF0YVwiIC8qIFNpZ25UeXBlZERhdGEgKi9dLFxuICAgICAgcGF5bG9hZFxuICAgIH0pO1xuICAgIHJldHVybiBwYXlsb2FkO1xuICB9LFxuICBzaGFyZUNvbnRhY3RzOiAocGF5bG9hZCkgPT4ge1xuICAgIGlmICh0eXBlb2Ygd2luZG93ID09PSBcInVuZGVmaW5lZFwiIHx8ICFfTWluaUtpdC5pc0NvbW1hbmRBdmFpbGFibGVbXCJzaGFyZS1jb250YWN0c1wiIC8qIFNoYXJlQ29udGFjdHMgKi9dKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICBcIidzaGFyZUNvbnRhY3RzJyBjb21tYW5kIGlzIHVuYXZhaWxhYmxlLiBDaGVjayBNaW5pS2l0Lmluc3RhbGwoKSBvciB1cGRhdGUgdGhlIGFwcCB2ZXJzaW9uXCJcbiAgICAgICk7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgc2VuZE1pbmlLaXRFdmVudCh7XG4gICAgICBjb21tYW5kOiBcInNoYXJlLWNvbnRhY3RzXCIgLyogU2hhcmVDb250YWN0cyAqLyxcbiAgICAgIHZlcnNpb246IF9NaW5pS2l0Lm1pbmlLaXRDb21tYW5kVmVyc2lvbltcInNoYXJlLWNvbnRhY3RzXCIgLyogU2hhcmVDb250YWN0cyAqL10sXG4gICAgICBwYXlsb2FkXG4gICAgfSk7XG4gICAgcmV0dXJuIHBheWxvYWQ7XG4gIH0sXG4gIHJlcXVlc3RQZXJtaXNzaW9uOiAocGF5bG9hZCkgPT4ge1xuICAgIGlmICh0eXBlb2Ygd2luZG93ID09PSBcInVuZGVmaW5lZFwiIHx8ICFfTWluaUtpdC5pc0NvbW1hbmRBdmFpbGFibGVbXCJyZXF1ZXN0LXBlcm1pc3Npb25cIiAvKiBSZXF1ZXN0UGVybWlzc2lvbiAqL10pIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgIFwiJ3JlcXVlc3RQZXJtaXNzaW9uJyBjb21tYW5kIGlzIHVuYXZhaWxhYmxlLiBDaGVjayBNaW5pS2l0Lmluc3RhbGwoKSBvciB1cGRhdGUgdGhlIGFwcCB2ZXJzaW9uXCJcbiAgICAgICk7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgc2VuZE1pbmlLaXRFdmVudCh7XG4gICAgICBjb21tYW5kOiBcInJlcXVlc3QtcGVybWlzc2lvblwiIC8qIFJlcXVlc3RQZXJtaXNzaW9uICovLFxuICAgICAgdmVyc2lvbjogX01pbmlLaXQubWluaUtpdENvbW1hbmRWZXJzaW9uW1wicmVxdWVzdC1wZXJtaXNzaW9uXCIgLyogUmVxdWVzdFBlcm1pc3Npb24gKi9dLFxuICAgICAgcGF5bG9hZFxuICAgIH0pO1xuICAgIHJldHVybiBwYXlsb2FkO1xuICB9LFxuICBnZXRQZXJtaXNzaW9uczogKCkgPT4ge1xuICAgIGlmICh0eXBlb2Ygd2luZG93ID09PSBcInVuZGVmaW5lZFwiIHx8ICFfTWluaUtpdC5pc0NvbW1hbmRBdmFpbGFibGVbXCJnZXQtcGVybWlzc2lvbnNcIiAvKiBHZXRQZXJtaXNzaW9ucyAqL10pIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgIFwiJ2dldFBlcm1pc3Npb25zJyBjb21tYW5kIGlzIHVuYXZhaWxhYmxlLiBDaGVjayBNaW5pS2l0Lmluc3RhbGwoKSBvciB1cGRhdGUgdGhlIGFwcCB2ZXJzaW9uXCJcbiAgICAgICk7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgc2VuZE1pbmlLaXRFdmVudCh7XG4gICAgICBjb21tYW5kOiBcImdldC1wZXJtaXNzaW9uc1wiIC8qIEdldFBlcm1pc3Npb25zICovLFxuICAgICAgdmVyc2lvbjogX01pbmlLaXQubWluaUtpdENvbW1hbmRWZXJzaW9uW1wiZ2V0LXBlcm1pc3Npb25zXCIgLyogR2V0UGVybWlzc2lvbnMgKi9dLFxuICAgICAgcGF5bG9hZDoge31cbiAgICB9KTtcbiAgICByZXR1cm4ge1xuICAgICAgc3RhdHVzOiBcInNlbnRcIlxuICAgIH07XG4gIH0sXG4gIHNlbmRIYXB0aWNGZWVkYmFjazogKHBheWxvYWQpID0+IHtcbiAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gXCJ1bmRlZmluZWRcIiB8fCAhX01pbmlLaXQuaXNDb21tYW5kQXZhaWxhYmxlW1wic2VuZC1oYXB0aWMtZmVlZGJhY2tcIiAvKiBTZW5kSGFwdGljRmVlZGJhY2sgKi9dKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICBcIidzZW5kSGFwdGljRmVlZGJhY2snIGNvbW1hbmQgaXMgdW5hdmFpbGFibGUuIENoZWNrIE1pbmlLaXQuaW5zdGFsbCgpIG9yIHVwZGF0ZSB0aGUgYXBwIHZlcnNpb25cIlxuICAgICAgKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBzZW5kTWluaUtpdEV2ZW50KHtcbiAgICAgIGNvbW1hbmQ6IFwic2VuZC1oYXB0aWMtZmVlZGJhY2tcIiAvKiBTZW5kSGFwdGljRmVlZGJhY2sgKi8sXG4gICAgICB2ZXJzaW9uOiBfTWluaUtpdC5taW5pS2l0Q29tbWFuZFZlcnNpb25bXCJzZW5kLWhhcHRpYy1mZWVkYmFja1wiIC8qIFNlbmRIYXB0aWNGZWVkYmFjayAqL10sXG4gICAgICBwYXlsb2FkXG4gICAgfSk7XG4gICAgcmV0dXJuIHBheWxvYWQ7XG4gIH0sXG4gIC8vIFdlIHJldHVybiBzaGFyZSBpbnB1dCBoZXJlIGJlY2F1c2UgdGhlIHBheWxvYWQgaXMgZm9ybWF0dGVkIGFzeW5jaHJvbm91c2x5XG4gIHNoYXJlOiAocGF5bG9hZCkgPT4ge1xuICAgIGlmICh0eXBlb2Ygd2luZG93ID09PSBcInVuZGVmaW5lZFwiIHx8ICFfTWluaUtpdC5pc0NvbW1hbmRBdmFpbGFibGVbXCJzaGFyZVwiIC8qIFNoYXJlICovXSkge1xuICAgICAgY29uc29sZS5lcnJvcihcbiAgICAgICAgXCInc2hhcmUnIGNvbW1hbmQgaXMgdW5hdmFpbGFibGUuIENoZWNrIE1pbmlLaXQuaW5zdGFsbCgpIG9yIHVwZGF0ZSB0aGUgYXBwIHZlcnNpb25cIlxuICAgICAgKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBpZiAoX01pbmlLaXQuZGV2aWNlUHJvcGVydGllcy5kZXZpY2VPUyA9PT0gXCJpb3NcIiAmJiB0eXBlb2YgbmF2aWdhdG9yICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICBzZW5kTWluaUtpdEV2ZW50KHtcbiAgICAgICAgY29tbWFuZDogXCJzaGFyZVwiIC8qIFNoYXJlICovLFxuICAgICAgICB2ZXJzaW9uOiBfTWluaUtpdC5taW5pS2l0Q29tbWFuZFZlcnNpb25bXCJzaGFyZVwiIC8qIFNoYXJlICovXSxcbiAgICAgICAgcGF5bG9hZFxuICAgICAgfSk7XG4gICAgICBuYXZpZ2F0b3Iuc2hhcmUocGF5bG9hZCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZvcm1hdFNoYXJlSW5wdXQocGF5bG9hZCkudGhlbigoZm9ybWF0dGVkUmVzdWx0KSA9PiB7XG4gICAgICAgIHNlbmRNaW5pS2l0RXZlbnQoe1xuICAgICAgICAgIGNvbW1hbmQ6IFwic2hhcmVcIiAvKiBTaGFyZSAqLyxcbiAgICAgICAgICB2ZXJzaW9uOiBfTWluaUtpdC5taW5pS2l0Q29tbWFuZFZlcnNpb25bXCJzaGFyZVwiIC8qIFNoYXJlICovXSxcbiAgICAgICAgICBwYXlsb2FkOiBmb3JtYXR0ZWRSZXN1bHRcbiAgICAgICAgfSk7XG4gICAgICB9KS5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkZhaWxlZCB0byBmb3JtYXQgc2hhcmUgaW5wdXRcIiwgZXJyb3IpO1xuICAgICAgfSk7XG4gICAgICBfTWluaUtpdC5zdWJzY3JpYmUoXCJtaW5pYXBwLXNoYXJlXCIgLyogTWluaUFwcFNoYXJlICovLCAocGF5bG9hZDIpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coXCJTaGFyZSBSZXNwb25zZVwiLCBwYXlsb2FkMik7XG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHBheWxvYWQ7XG4gIH0sXG4gIGNoYXQ6IChwYXlsb2FkKSA9PiB7XG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgPT09IFwidW5kZWZpbmVkXCIgfHwgIV9NaW5pS2l0LmlzQ29tbWFuZEF2YWlsYWJsZVtcImNoYXRcIiAvKiBDaGF0ICovXSkge1xuICAgICAgY29uc29sZS5lcnJvcihcbiAgICAgICAgXCInY2hhdCcgY29tbWFuZCBpcyB1bmF2YWlsYWJsZS4gQ2hlY2sgTWluaUtpdC5pbnN0YWxsKCkgb3IgdXBkYXRlIHRoZSBhcHAgdmVyc2lvblwiXG4gICAgICApO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGlmIChwYXlsb2FkLm1lc3NhZ2UubGVuZ3RoID09PSAwKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiJ2NoYXQnIGNvbW1hbmQgcmVxdWlyZXMgYSBub24tZW1wdHkgbWVzc2FnZVwiKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBzZW5kTWluaUtpdEV2ZW50KHtcbiAgICAgIGNvbW1hbmQ6IFwiY2hhdFwiIC8qIENoYXQgKi8sXG4gICAgICB2ZXJzaW9uOiBfTWluaUtpdC5taW5pS2l0Q29tbWFuZFZlcnNpb25bXCJjaGF0XCIgLyogQ2hhdCAqL10sXG4gICAgICBwYXlsb2FkXG4gICAgfSk7XG4gICAgcmV0dXJuIHBheWxvYWQ7XG4gIH1cbn07XG4vKipcbiAqIFRoaXMgb2JqZWN0IGNvbnRhaW5zIGFzeW5jIHZlcnNpb25zIG9mIGFsbCB0aGUgY29tbWFuZHMuXG4gKiBJbnN0ZWFkIG9mIHVzaW5nIGV2ZW50IGxpc3RlbmVycywgeW91IGNhbiBqdXN0IGBhd2FpdGAgdGhlc2UuXG4gKlxuICogVGhleSByZXR1cm4gYSBzdGFuZGFyZGl6ZWQgb2JqZWN0XG4gKlxuICogY29tbWFuZFBheWxvYWQgLSBvYmplY3QgcmV0dXJuZWQgYnkgdGhlIGNvbW1hbmQgZnVuY3Rpb25cbiAqXG4gKiBmaW5hbFBheWxvYWQgLSBvYmplY3QgcmV0dXJuZWQgYnkgdGhlIGV2ZW50IGxpc3RlbmVyLCBvciBpbiBvdGhlciB3b3JkcywgV29ybGRBcHAgcmVzcG9uc2VcbiAqL1xuX01pbmlLaXQuY29tbWFuZHNBc3luYyA9IHtcbiAgdmVyaWZ5OiBhc3luYyAocGF5bG9hZCkgPT4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShhc3luYyAocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IF9NaW5pS2l0LmF3YWl0Q29tbWFuZChcbiAgICAgICAgICBcIm1pbmlhcHAtdmVyaWZ5LWFjdGlvblwiIC8qIE1pbmlBcHBWZXJpZnlBY3Rpb24gKi8sXG4gICAgICAgICAgXCJ2ZXJpZnlcIiAvKiBWZXJpZnkgKi8sXG4gICAgICAgICAgKCkgPT4gX01pbmlLaXQuY29tbWFuZHMudmVyaWZ5KHBheWxvYWQpXG4gICAgICAgICk7XG4gICAgICAgIGlmIChyZXNwb25zZS5maW5hbFBheWxvYWQuc3RhdHVzID09PSBcInN1Y2Nlc3NcIiAmJiByZXNwb25zZS5maW5hbFBheWxvYWQudmVyaWZpY2F0aW9uX2xldmVsID09PSBWZXJpZmljYXRpb25MZXZlbC5PcmIpIHtcbiAgICAgICAgICByZXNwb25zZS5maW5hbFBheWxvYWQucHJvb2YgPSBhd2FpdCBjb21wcmVzc0FuZFBhZFByb29mKFxuICAgICAgICAgICAgcmVzcG9uc2UuZmluYWxQYXlsb2FkLnByb29mXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICByZXNvbHZlKHJlc3BvbnNlKTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICB9XG4gICAgfSk7XG4gIH0sXG4gIHBheTogYXN5bmMgKHBheWxvYWQpID0+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoYXN5bmMgKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBfTWluaUtpdC5hd2FpdENvbW1hbmQoXG4gICAgICAgICAgXCJtaW5pYXBwLXBheW1lbnRcIiAvKiBNaW5pQXBwUGF5bWVudCAqLyxcbiAgICAgICAgICBcInBheVwiIC8qIFBheSAqLyxcbiAgICAgICAgICAoKSA9PiBfTWluaUtpdC5jb21tYW5kcy5wYXkocGF5bG9hZClcbiAgICAgICAgKTtcbiAgICAgICAgcmVzb2x2ZShyZXNwb25zZSk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgfVxuICAgIH0pO1xuICB9LFxuICB3YWxsZXRBdXRoOiBhc3luYyAocGF5bG9hZCkgPT4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShhc3luYyAocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IF9NaW5pS2l0LmF3YWl0Q29tbWFuZChcbiAgICAgICAgICBcIm1pbmlhcHAtd2FsbGV0LWF1dGhcIiAvKiBNaW5pQXBwV2FsbGV0QXV0aCAqLyxcbiAgICAgICAgICBcIndhbGxldC1hdXRoXCIgLyogV2FsbGV0QXV0aCAqLyxcbiAgICAgICAgICAoKSA9PiBfTWluaUtpdC5jb21tYW5kcy53YWxsZXRBdXRoKHBheWxvYWQpXG4gICAgICAgICk7XG4gICAgICAgIHJldHVybiByZXNvbHZlKHJlc3BvbnNlKTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICB9XG4gICAgfSk7XG4gIH0sXG4gIHNlbmRUcmFuc2FjdGlvbjogYXN5bmMgKHBheWxvYWQpID0+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoYXN5bmMgKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBfTWluaUtpdC5hd2FpdENvbW1hbmQoXG4gICAgICAgICAgXCJtaW5pYXBwLXNlbmQtdHJhbnNhY3Rpb25cIiAvKiBNaW5pQXBwU2VuZFRyYW5zYWN0aW9uICovLFxuICAgICAgICAgIFwic2VuZC10cmFuc2FjdGlvblwiIC8qIFNlbmRUcmFuc2FjdGlvbiAqLyxcbiAgICAgICAgICAoKSA9PiBfTWluaUtpdC5jb21tYW5kcy5zZW5kVHJhbnNhY3Rpb24ocGF5bG9hZClcbiAgICAgICAgKTtcbiAgICAgICAgcmV0dXJuIHJlc29sdmUocmVzcG9uc2UpO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSxcbiAgc2lnbk1lc3NhZ2U6IGFzeW5jIChwYXlsb2FkKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGFzeW5jIChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgX01pbmlLaXQuYXdhaXRDb21tYW5kKFxuICAgICAgICAgIFwibWluaWFwcC1zaWduLW1lc3NhZ2VcIiAvKiBNaW5pQXBwU2lnbk1lc3NhZ2UgKi8sXG4gICAgICAgICAgXCJzaWduLW1lc3NhZ2VcIiAvKiBTaWduTWVzc2FnZSAqLyxcbiAgICAgICAgICAoKSA9PiBfTWluaUtpdC5jb21tYW5kcy5zaWduTWVzc2FnZShwYXlsb2FkKVxuICAgICAgICApO1xuICAgICAgICByZXR1cm4gcmVzb2x2ZShyZXNwb25zZSk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgfVxuICAgIH0pO1xuICB9LFxuICBzaWduVHlwZWREYXRhOiBhc3luYyAocGF5bG9hZCkgPT4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShhc3luYyAocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IF9NaW5pS2l0LmF3YWl0Q29tbWFuZChcbiAgICAgICAgICBcIm1pbmlhcHAtc2lnbi10eXBlZC1kYXRhXCIgLyogTWluaUFwcFNpZ25UeXBlZERhdGEgKi8sXG4gICAgICAgICAgXCJzaWduLXR5cGVkLWRhdGFcIiAvKiBTaWduVHlwZWREYXRhICovLFxuICAgICAgICAgICgpID0+IF9NaW5pS2l0LmNvbW1hbmRzLnNpZ25UeXBlZERhdGEocGF5bG9hZClcbiAgICAgICAgKTtcbiAgICAgICAgcmV0dXJuIHJlc29sdmUocmVzcG9uc2UpO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSxcbiAgc2hhcmVDb250YWN0czogYXN5bmMgKHBheWxvYWQpID0+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoYXN5bmMgKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBfTWluaUtpdC5hd2FpdENvbW1hbmQoXG4gICAgICAgICAgXCJtaW5pYXBwLXNoYXJlLWNvbnRhY3RzXCIgLyogTWluaUFwcFNoYXJlQ29udGFjdHMgKi8sXG4gICAgICAgICAgXCJzaGFyZS1jb250YWN0c1wiIC8qIFNoYXJlQ29udGFjdHMgKi8sXG4gICAgICAgICAgKCkgPT4gX01pbmlLaXQuY29tbWFuZHMuc2hhcmVDb250YWN0cyhwYXlsb2FkKVxuICAgICAgICApO1xuICAgICAgICByZXR1cm4gcmVzb2x2ZShyZXNwb25zZSk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgfVxuICAgIH0pO1xuICB9LFxuICByZXF1ZXN0UGVybWlzc2lvbjogYXN5bmMgKHBheWxvYWQpID0+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoYXN5bmMgKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBfTWluaUtpdC5hd2FpdENvbW1hbmQoXG4gICAgICAgICAgXCJtaW5pYXBwLXJlcXVlc3QtcGVybWlzc2lvblwiIC8qIE1pbmlBcHBSZXF1ZXN0UGVybWlzc2lvbiAqLyxcbiAgICAgICAgICBcInJlcXVlc3QtcGVybWlzc2lvblwiIC8qIFJlcXVlc3RQZXJtaXNzaW9uICovLFxuICAgICAgICAgICgpID0+IF9NaW5pS2l0LmNvbW1hbmRzLnJlcXVlc3RQZXJtaXNzaW9uKHBheWxvYWQpXG4gICAgICAgICk7XG4gICAgICAgIHJlc29sdmUocmVzcG9uc2UpO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSxcbiAgZ2V0UGVybWlzc2lvbnM6IGFzeW5jICgpID0+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoYXN5bmMgKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBfTWluaUtpdC5hd2FpdENvbW1hbmQoXG4gICAgICAgICAgXCJtaW5pYXBwLWdldC1wZXJtaXNzaW9uc1wiIC8qIE1pbmlBcHBHZXRQZXJtaXNzaW9ucyAqLyxcbiAgICAgICAgICBcImdldC1wZXJtaXNzaW9uc1wiIC8qIEdldFBlcm1pc3Npb25zICovLFxuICAgICAgICAgICgpID0+IF9NaW5pS2l0LmNvbW1hbmRzLmdldFBlcm1pc3Npb25zKClcbiAgICAgICAgKTtcbiAgICAgICAgcmVzb2x2ZShyZXNwb25zZSk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgfVxuICAgIH0pO1xuICB9LFxuICBzZW5kSGFwdGljRmVlZGJhY2s6IGFzeW5jIChwYXlsb2FkKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGFzeW5jIChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgX01pbmlLaXQuYXdhaXRDb21tYW5kKFxuICAgICAgICAgIFwibWluaWFwcC1zZW5kLWhhcHRpYy1mZWVkYmFja1wiIC8qIE1pbmlBcHBTZW5kSGFwdGljRmVlZGJhY2sgKi8sXG4gICAgICAgICAgXCJzZW5kLWhhcHRpYy1mZWVkYmFja1wiIC8qIFNlbmRIYXB0aWNGZWVkYmFjayAqLyxcbiAgICAgICAgICAoKSA9PiBfTWluaUtpdC5jb21tYW5kcy5zZW5kSGFwdGljRmVlZGJhY2socGF5bG9hZClcbiAgICAgICAgKTtcbiAgICAgICAgcmVzb2x2ZShyZXNwb25zZSk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgfVxuICAgIH0pO1xuICB9LFxuICBzaGFyZTogYXN5bmMgKHBheWxvYWQpID0+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoYXN5bmMgKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBfTWluaUtpdC5hd2FpdENvbW1hbmQoXG4gICAgICAgICAgXCJtaW5pYXBwLXNoYXJlXCIgLyogTWluaUFwcFNoYXJlICovLFxuICAgICAgICAgIFwic2hhcmVcIiAvKiBTaGFyZSAqLyxcbiAgICAgICAgICAoKSA9PiBfTWluaUtpdC5jb21tYW5kcy5zaGFyZShwYXlsb2FkKVxuICAgICAgICApO1xuICAgICAgICByZXNvbHZlKHtcbiAgICAgICAgICBjb21tYW5kUGF5bG9hZDogcmVzcG9uc2UuY29tbWFuZFBheWxvYWQsXG4gICAgICAgICAgZmluYWxQYXlsb2FkOiByZXNwb25zZS5maW5hbFBheWxvYWRcbiAgICAgICAgfSk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgfVxuICAgIH0pO1xuICB9LFxuICBjaGF0OiBhc3luYyAocGF5bG9hZCkgPT4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShhc3luYyAocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IF9NaW5pS2l0LmF3YWl0Q29tbWFuZChcbiAgICAgICAgICBcIm1pbmlhcHAtY2hhdFwiIC8qIE1pbmlBcHBDaGF0ICovLFxuICAgICAgICAgIFwiY2hhdFwiIC8qIENoYXQgKi8sXG4gICAgICAgICAgKCkgPT4gX01pbmlLaXQuY29tbWFuZHMuY2hhdChwYXlsb2FkKVxuICAgICAgICApO1xuICAgICAgICByZXNvbHZlKHtcbiAgICAgICAgICBjb21tYW5kUGF5bG9hZDogcmVzcG9uc2UuY29tbWFuZFBheWxvYWQsXG4gICAgICAgICAgZmluYWxQYXlsb2FkOiByZXNwb25zZS5maW5hbFBheWxvYWRcbiAgICAgICAgfSk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59O1xudmFyIE1pbmlLaXQgPSBfTWluaUtpdDtcblxuZXhwb3J0IHtcbiAgVmVyaWZpY2F0aW9uRXJyb3JNZXNzYWdlLFxuICBQYXltZW50RXJyb3JDb2RlcyxcbiAgUGF5bWVudEVycm9yTWVzc2FnZSxcbiAgUGF5bWVudFZhbGlkYXRpb25FcnJvcnMsXG4gIFdhbGxldEF1dGhFcnJvckNvZGVzLFxuICBXYWxsZXRBdXRoRXJyb3JNZXNzYWdlLFxuICBTZW5kVHJhbnNhY3Rpb25FcnJvckNvZGVzLFxuICBTZW5kVHJhbnNhY3Rpb25FcnJvck1lc3NhZ2UsXG4gIFNpZ25NZXNzYWdlRXJyb3JDb2RlcyxcbiAgU2lnbk1lc3NhZ2VFcnJvck1lc3NhZ2UsXG4gIFNpZ25UeXBlZERhdGFFcnJvckNvZGVzLFxuICBTaWduVHlwZWREYXRhRXJyb3JNZXNzYWdlLFxuICBNaW5pS2l0SW5zdGFsbEVycm9yQ29kZXMsXG4gIE1pbmlLaXRJbnN0YWxsRXJyb3JNZXNzYWdlLFxuICBTaGFyZUNvbnRhY3RzRXJyb3JDb2RlcyxcbiAgU2hhcmVDb250YWN0c0Vycm9yTWVzc2FnZSxcbiAgUmVxdWVzdFBlcm1pc3Npb25FcnJvckNvZGVzLFxuICBSZXF1ZXN0UGVybWlzc2lvbkVycm9yTWVzc2FnZSxcbiAgR2V0UGVybWlzc2lvbnNFcnJvckNvZGVzLFxuICBHZXRQZXJtaXNzaW9uc0Vycm9yTWVzc2FnZSxcbiAgU2VuZEhhcHRpY0ZlZWRiYWNrRXJyb3JDb2RlcyxcbiAgU2VuZEhhcHRpY0ZlZWRiYWNrRXJyb3JNZXNzYWdlLFxuICBTaGFyZUZpbGVzRXJyb3JDb2RlcyxcbiAgU2hhcmVGaWxlc0Vycm9yTWVzc2FnZSxcbiAgTWljcm9waG9uZUVycm9yQ29kZXMsXG4gIE1pY3JvcGhvbmVFcnJvck1lc3NhZ2UsXG4gIENoYXRFcnJvckNvZGVzLFxuICBDaGF0RXJyb3JNZXNzYWdlLFxuICBBcHBFcnJvckNvZGVzMiBhcyBBcHBFcnJvckNvZGVzLFxuICBSZXNwb25zZUV2ZW50LFxuICBUb2tlbnMsXG4gIFRva2VuRGVjaW1hbHMsXG4gIE5ldHdvcmssXG4gIHRva2VuVG9EZWNpbWFscyxcbiAgcGFyc2VTaXdlTWVzc2FnZSxcbiAgdmVyaWZ5U2l3ZU1lc3NhZ2UsXG4gIENvbW1hbmQsXG4gIFBlcm1pc3Npb24sXG4gIE1pbmlBcHBMYXVuY2hMb2NhdGlvbixcbiAgbWFwV29ybGRBcHBMYXVuY2hMb2NhdGlvbixcbiAgTWluaUtpdFxufTtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@worldcoin+minikit-js@1.9.9_@types+react@19.2.9_react@19.2.3_typescript@5.9.3_viem@2.23.5_typescript@5.9.3_/node_modules/@worldcoin/minikit-js/build/chunk-VWX7SELF.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@worldcoin+minikit-js@1.9.9_@types+react@19.2.9_react@19.2.3_typescript@5.9.3_viem@2.23.5_typescript@5.9.3_/node_modules/@worldcoin/minikit-js/build/index.js":
/*!******************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@worldcoin+minikit-js@1.9.9_@types+react@19.2.9_react@19.2.3_typescript@5.9.3_viem@2.23.5_typescript@5.9.3_/node_modules/@worldcoin/minikit-js/build/index.js ***!
  \******************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ChatErrorCodes: () => (/* reexport safe */ _chunk_VWX7SELF_js__WEBPACK_IMPORTED_MODULE_0__.ChatErrorCodes),\n/* harmony export */   ChatErrorMessage: () => (/* reexport safe */ _chunk_VWX7SELF_js__WEBPACK_IMPORTED_MODULE_0__.ChatErrorMessage),\n/* harmony export */   Command: () => (/* reexport safe */ _chunk_VWX7SELF_js__WEBPACK_IMPORTED_MODULE_0__.Command),\n/* harmony export */   GetPermissionsErrorCodes: () => (/* reexport safe */ _chunk_VWX7SELF_js__WEBPACK_IMPORTED_MODULE_0__.GetPermissionsErrorCodes),\n/* harmony export */   GetPermissionsErrorMessage: () => (/* reexport safe */ _chunk_VWX7SELF_js__WEBPACK_IMPORTED_MODULE_0__.GetPermissionsErrorMessage),\n/* harmony export */   MicrophoneErrorCodes: () => (/* reexport safe */ _chunk_VWX7SELF_js__WEBPACK_IMPORTED_MODULE_0__.MicrophoneErrorCodes),\n/* harmony export */   MicrophoneErrorMessage: () => (/* reexport safe */ _chunk_VWX7SELF_js__WEBPACK_IMPORTED_MODULE_0__.MicrophoneErrorMessage),\n/* harmony export */   MiniAppLaunchLocation: () => (/* reexport safe */ _chunk_VWX7SELF_js__WEBPACK_IMPORTED_MODULE_0__.MiniAppLaunchLocation),\n/* harmony export */   MiniKit: () => (/* reexport safe */ _chunk_VWX7SELF_js__WEBPACK_IMPORTED_MODULE_0__.MiniKit),\n/* harmony export */   MiniKitInstallErrorCodes: () => (/* reexport safe */ _chunk_VWX7SELF_js__WEBPACK_IMPORTED_MODULE_0__.MiniKitInstallErrorCodes),\n/* harmony export */   MiniKitInstallErrorMessage: () => (/* reexport safe */ _chunk_VWX7SELF_js__WEBPACK_IMPORTED_MODULE_0__.MiniKitInstallErrorMessage),\n/* harmony export */   Network: () => (/* reexport safe */ _chunk_VWX7SELF_js__WEBPACK_IMPORTED_MODULE_0__.Network),\n/* harmony export */   PaymentErrorCodes: () => (/* reexport safe */ _chunk_VWX7SELF_js__WEBPACK_IMPORTED_MODULE_0__.PaymentErrorCodes),\n/* harmony export */   PaymentErrorMessage: () => (/* reexport safe */ _chunk_VWX7SELF_js__WEBPACK_IMPORTED_MODULE_0__.PaymentErrorMessage),\n/* harmony export */   PaymentValidationErrors: () => (/* reexport safe */ _chunk_VWX7SELF_js__WEBPACK_IMPORTED_MODULE_0__.PaymentValidationErrors),\n/* harmony export */   Permission: () => (/* reexport safe */ _chunk_VWX7SELF_js__WEBPACK_IMPORTED_MODULE_0__.Permission),\n/* harmony export */   RequestPermissionErrorCodes: () => (/* reexport safe */ _chunk_VWX7SELF_js__WEBPACK_IMPORTED_MODULE_0__.RequestPermissionErrorCodes),\n/* harmony export */   RequestPermissionErrorMessage: () => (/* reexport safe */ _chunk_VWX7SELF_js__WEBPACK_IMPORTED_MODULE_0__.RequestPermissionErrorMessage),\n/* harmony export */   ResponseEvent: () => (/* reexport safe */ _chunk_VWX7SELF_js__WEBPACK_IMPORTED_MODULE_0__.ResponseEvent),\n/* harmony export */   SendHapticFeedbackErrorCodes: () => (/* reexport safe */ _chunk_VWX7SELF_js__WEBPACK_IMPORTED_MODULE_0__.SendHapticFeedbackErrorCodes),\n/* harmony export */   SendHapticFeedbackErrorMessage: () => (/* reexport safe */ _chunk_VWX7SELF_js__WEBPACK_IMPORTED_MODULE_0__.SendHapticFeedbackErrorMessage),\n/* harmony export */   SendTransactionErrorCodes: () => (/* reexport safe */ _chunk_VWX7SELF_js__WEBPACK_IMPORTED_MODULE_0__.SendTransactionErrorCodes),\n/* harmony export */   SendTransactionErrorMessage: () => (/* reexport safe */ _chunk_VWX7SELF_js__WEBPACK_IMPORTED_MODULE_0__.SendTransactionErrorMessage),\n/* harmony export */   ShareContactsErrorCodes: () => (/* reexport safe */ _chunk_VWX7SELF_js__WEBPACK_IMPORTED_MODULE_0__.ShareContactsErrorCodes),\n/* harmony export */   ShareContactsErrorMessage: () => (/* reexport safe */ _chunk_VWX7SELF_js__WEBPACK_IMPORTED_MODULE_0__.ShareContactsErrorMessage),\n/* harmony export */   ShareFilesErrorCodes: () => (/* reexport safe */ _chunk_VWX7SELF_js__WEBPACK_IMPORTED_MODULE_0__.ShareFilesErrorCodes),\n/* harmony export */   ShareFilesErrorMessage: () => (/* reexport safe */ _chunk_VWX7SELF_js__WEBPACK_IMPORTED_MODULE_0__.ShareFilesErrorMessage),\n/* harmony export */   SignMessageErrorCodes: () => (/* reexport safe */ _chunk_VWX7SELF_js__WEBPACK_IMPORTED_MODULE_0__.SignMessageErrorCodes),\n/* harmony export */   SignMessageErrorMessage: () => (/* reexport safe */ _chunk_VWX7SELF_js__WEBPACK_IMPORTED_MODULE_0__.SignMessageErrorMessage),\n/* harmony export */   SignTypedDataErrorCodes: () => (/* reexport safe */ _chunk_VWX7SELF_js__WEBPACK_IMPORTED_MODULE_0__.SignTypedDataErrorCodes),\n/* harmony export */   SignTypedDataErrorMessage: () => (/* reexport safe */ _chunk_VWX7SELF_js__WEBPACK_IMPORTED_MODULE_0__.SignTypedDataErrorMessage),\n/* harmony export */   TokenDecimals: () => (/* reexport safe */ _chunk_VWX7SELF_js__WEBPACK_IMPORTED_MODULE_0__.TokenDecimals),\n/* harmony export */   Tokens: () => (/* reexport safe */ _chunk_VWX7SELF_js__WEBPACK_IMPORTED_MODULE_0__.Tokens),\n/* harmony export */   VerificationErrorCodes: () => (/* reexport safe */ _chunk_VWX7SELF_js__WEBPACK_IMPORTED_MODULE_0__.AppErrorCodes),\n/* harmony export */   VerificationErrorMessage: () => (/* reexport safe */ _chunk_VWX7SELF_js__WEBPACK_IMPORTED_MODULE_0__.VerificationErrorMessage),\n/* harmony export */   VerificationLevel: () => (/* reexport safe */ _worldcoin_idkit_core__WEBPACK_IMPORTED_MODULE_1__.VerificationLevel),\n/* harmony export */   WalletAuthErrorCodes: () => (/* reexport safe */ _chunk_VWX7SELF_js__WEBPACK_IMPORTED_MODULE_0__.WalletAuthErrorCodes),\n/* harmony export */   WalletAuthErrorMessage: () => (/* reexport safe */ _chunk_VWX7SELF_js__WEBPACK_IMPORTED_MODULE_0__.WalletAuthErrorMessage),\n/* harmony export */   getIsUserVerified: () => (/* binding */ getIsUserVerified),\n/* harmony export */   mapWorldAppLaunchLocation: () => (/* reexport safe */ _chunk_VWX7SELF_js__WEBPACK_IMPORTED_MODULE_0__.mapWorldAppLaunchLocation),\n/* harmony export */   parseSiweMessage: () => (/* reexport safe */ _chunk_VWX7SELF_js__WEBPACK_IMPORTED_MODULE_0__.parseSiweMessage),\n/* harmony export */   tokenToDecimals: () => (/* reexport safe */ _chunk_VWX7SELF_js__WEBPACK_IMPORTED_MODULE_0__.tokenToDecimals),\n/* harmony export */   verifyCloudProof: () => (/* reexport safe */ _worldcoin_idkit_core_backend__WEBPACK_IMPORTED_MODULE_2__.verifyCloudProof),\n/* harmony export */   verifySiweMessage: () => (/* reexport safe */ _chunk_VWX7SELF_js__WEBPACK_IMPORTED_MODULE_0__.verifySiweMessage)\n/* harmony export */ });\n/* harmony import */ var _chunk_VWX7SELF_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./chunk-VWX7SELF.js */ \"(rsc)/./node_modules/.pnpm/@worldcoin+minikit-js@1.9.9_@types+react@19.2.9_react@19.2.3_typescript@5.9.3_viem@2.23.5_typescript@5.9.3_/node_modules/@worldcoin/minikit-js/build/chunk-VWX7SELF.js\");\n/* harmony import */ var _worldcoin_idkit_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @worldcoin/idkit-core */ \"(rsc)/./node_modules/.pnpm/@worldcoin+idkit-core@2.1.0_@types+react@19.2.9_react@19.2.3_typescript@5.9.3/node_modules/@worldcoin/idkit-core/build/index.js\");\n/* harmony import */ var _worldcoin_idkit_core_backend__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @worldcoin/idkit-core/backend */ \"(rsc)/./node_modules/.pnpm/@worldcoin+idkit-core@2.1.0_@types+react@19.2.9_react@19.2.3_typescript@5.9.3/node_modules/@worldcoin/idkit-core/build/lib/backend.js\");\n/* harmony import */ var viem__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! viem */ \"(rsc)/./node_modules/.pnpm/viem@2.23.5_typescript@5.9.3/node_modules/viem/_esm/clients/createPublicClient.js\");\n/* harmony import */ var viem__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! viem */ \"(rsc)/./node_modules/.pnpm/viem@2.23.5_typescript@5.9.3/node_modules/viem/_esm/clients/transports/http.js\");\n/* harmony import */ var viem_chains__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! viem/chains */ \"(rsc)/./node_modules/.pnpm/viem@2.23.5_typescript@5.9.3/node_modules/viem/_esm/chains/definitions/worldchain.js\");\n\n\n// index.ts\n\n\n\n// helpers/address-book/index.ts\n\n\nvar worldIdAddressBookContractAddress = \"0x57b930D551e677CC36e2fA036Ae2fe8FdaE0330D\";\nvar addressVerifiedUntilAbi = [\n  {\n    inputs: [\n      {\n        internalType: \"address\",\n        name: \"\",\n        type: \"address\"\n      }\n    ],\n    name: \"addressVerifiedUntil\",\n    outputs: [\n      {\n        internalType: \"uint256\",\n        name: \"\",\n        type: \"uint256\"\n      }\n    ],\n    stateMutability: \"view\",\n    type: \"function\"\n  }\n];\nvar getIsUserVerified = async (walletAddress, rpcUrl) => {\n  const publicClient = (0,viem__WEBPACK_IMPORTED_MODULE_3__.createPublicClient)({\n    chain: viem_chains__WEBPACK_IMPORTED_MODULE_4__.worldchain,\n    transport: (0,viem__WEBPACK_IMPORTED_MODULE_5__.http)(\n      rpcUrl || \"https://worldchain-mainnet.g.alchemy.com/public\"\n    )\n  });\n  try {\n    const verifiedUntilResponse = await publicClient.readContract({\n      address: worldIdAddressBookContractAddress,\n      abi: addressVerifiedUntilAbi,\n      functionName: \"addressVerifiedUntil\",\n      args: [walletAddress]\n    });\n    const verifiedUntil = Number(verifiedUntilResponse.toString());\n    if (!Number.isFinite(verifiedUntil)) {\n      console.warn(\"Invalid verifiedUntil value:\", verifiedUntil);\n      return false;\n    }\n    const currentTime = Math.floor(Date.now() / 1e3);\n    return verifiedUntil > currentTime;\n  } catch (error) {\n    console.error(\"Error verifying user:\", error);\n    return false;\n  }\n};\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHdvcmxkY29pbittaW5pa2l0LWpzQDEuOS45X0B0eXBlcytyZWFjdEAxOS4yLjlfcmVhY3RAMTkuMi4zX3R5cGVzY3JpcHRANS45LjNfdmllbUAyLjIzLjVfdHlwZXNjcmlwdEA1LjkuM18vbm9kZV9tb2R1bGVzL0B3b3JsZGNvaW4vbWluaWtpdC1qcy9idWlsZC9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQTBDNkI7O0FBRTdCO0FBQzBEO0FBR25COztBQUV2QztBQUNnRDtBQUNQO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsd0RBQWtCO0FBQ3pDLFdBQVcsbURBQVU7QUFDckIsZUFBZSwwQ0FBSTtBQUNuQjtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQThDRSIsInNvdXJjZXMiOlsiL1VzZXJzL2pvbmd3b29ra2ltL0Rlc2t0b3Avd29ybGQtY29tbXVuaXR5L2Zyb250ZW5kL25vZGVfbW9kdWxlcy8ucG5wbS9Ad29ybGRjb2luK21pbmlraXQtanNAMS45LjlfQHR5cGVzK3JlYWN0QDE5LjIuOV9yZWFjdEAxOS4yLjNfdHlwZXNjcmlwdEA1LjkuM192aWVtQDIuMjMuNV90eXBlc2NyaXB0QDUuOS4zXy9ub2RlX21vZHVsZXMvQHdvcmxkY29pbi9taW5pa2l0LWpzL2J1aWxkL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIEFwcEVycm9yQ29kZXMsXG4gIENoYXRFcnJvckNvZGVzLFxuICBDaGF0RXJyb3JNZXNzYWdlLFxuICBDb21tYW5kLFxuICBHZXRQZXJtaXNzaW9uc0Vycm9yQ29kZXMsXG4gIEdldFBlcm1pc3Npb25zRXJyb3JNZXNzYWdlLFxuICBNaWNyb3Bob25lRXJyb3JDb2RlcyxcbiAgTWljcm9waG9uZUVycm9yTWVzc2FnZSxcbiAgTWluaUFwcExhdW5jaExvY2F0aW9uLFxuICBNaW5pS2l0LFxuICBNaW5pS2l0SW5zdGFsbEVycm9yQ29kZXMsXG4gIE1pbmlLaXRJbnN0YWxsRXJyb3JNZXNzYWdlLFxuICBOZXR3b3JrLFxuICBQYXltZW50RXJyb3JDb2RlcyxcbiAgUGF5bWVudEVycm9yTWVzc2FnZSxcbiAgUGF5bWVudFZhbGlkYXRpb25FcnJvcnMsXG4gIFBlcm1pc3Npb24sXG4gIFJlcXVlc3RQZXJtaXNzaW9uRXJyb3JDb2RlcyxcbiAgUmVxdWVzdFBlcm1pc3Npb25FcnJvck1lc3NhZ2UsXG4gIFJlc3BvbnNlRXZlbnQsXG4gIFNlbmRIYXB0aWNGZWVkYmFja0Vycm9yQ29kZXMsXG4gIFNlbmRIYXB0aWNGZWVkYmFja0Vycm9yTWVzc2FnZSxcbiAgU2VuZFRyYW5zYWN0aW9uRXJyb3JDb2RlcyxcbiAgU2VuZFRyYW5zYWN0aW9uRXJyb3JNZXNzYWdlLFxuICBTaGFyZUNvbnRhY3RzRXJyb3JDb2RlcyxcbiAgU2hhcmVDb250YWN0c0Vycm9yTWVzc2FnZSxcbiAgU2hhcmVGaWxlc0Vycm9yQ29kZXMsXG4gIFNoYXJlRmlsZXNFcnJvck1lc3NhZ2UsXG4gIFNpZ25NZXNzYWdlRXJyb3JDb2RlcyxcbiAgU2lnbk1lc3NhZ2VFcnJvck1lc3NhZ2UsXG4gIFNpZ25UeXBlZERhdGFFcnJvckNvZGVzLFxuICBTaWduVHlwZWREYXRhRXJyb3JNZXNzYWdlLFxuICBUb2tlbkRlY2ltYWxzLFxuICBUb2tlbnMsXG4gIFZlcmlmaWNhdGlvbkVycm9yTWVzc2FnZSxcbiAgV2FsbGV0QXV0aEVycm9yQ29kZXMsXG4gIFdhbGxldEF1dGhFcnJvck1lc3NhZ2UsXG4gIG1hcFdvcmxkQXBwTGF1bmNoTG9jYXRpb24sXG4gIHBhcnNlU2l3ZU1lc3NhZ2UsXG4gIHRva2VuVG9EZWNpbWFscyxcbiAgdmVyaWZ5U2l3ZU1lc3NhZ2Vcbn0gZnJvbSBcIi4vY2h1bmstVldYN1NFTEYuanNcIjtcblxuLy8gaW5kZXgudHNcbmltcG9ydCB7IFZlcmlmaWNhdGlvbkxldmVsIH0gZnJvbSBcIkB3b3JsZGNvaW4vaWRraXQtY29yZVwiO1xuaW1wb3J0IHtcbiAgdmVyaWZ5Q2xvdWRQcm9vZlxufSBmcm9tIFwiQHdvcmxkY29pbi9pZGtpdC1jb3JlL2JhY2tlbmRcIjtcblxuLy8gaGVscGVycy9hZGRyZXNzLWJvb2svaW5kZXgudHNcbmltcG9ydCB7IGNyZWF0ZVB1YmxpY0NsaWVudCwgaHR0cCB9IGZyb20gXCJ2aWVtXCI7XG5pbXBvcnQgeyB3b3JsZGNoYWluIH0gZnJvbSBcInZpZW0vY2hhaW5zXCI7XG52YXIgd29ybGRJZEFkZHJlc3NCb29rQ29udHJhY3RBZGRyZXNzID0gXCIweDU3YjkzMEQ1NTFlNjc3Q0MzNmUyZkEwMzZBZTJmZThGZGFFMDMzMERcIjtcbnZhciBhZGRyZXNzVmVyaWZpZWRVbnRpbEFiaSA9IFtcbiAge1xuICAgIGlucHV0czogW1xuICAgICAge1xuICAgICAgICBpbnRlcm5hbFR5cGU6IFwiYWRkcmVzc1wiLFxuICAgICAgICBuYW1lOiBcIlwiLFxuICAgICAgICB0eXBlOiBcImFkZHJlc3NcIlxuICAgICAgfVxuICAgIF0sXG4gICAgbmFtZTogXCJhZGRyZXNzVmVyaWZpZWRVbnRpbFwiLFxuICAgIG91dHB1dHM6IFtcbiAgICAgIHtcbiAgICAgICAgaW50ZXJuYWxUeXBlOiBcInVpbnQyNTZcIixcbiAgICAgICAgbmFtZTogXCJcIixcbiAgICAgICAgdHlwZTogXCJ1aW50MjU2XCJcbiAgICAgIH1cbiAgICBdLFxuICAgIHN0YXRlTXV0YWJpbGl0eTogXCJ2aWV3XCIsXG4gICAgdHlwZTogXCJmdW5jdGlvblwiXG4gIH1cbl07XG52YXIgZ2V0SXNVc2VyVmVyaWZpZWQgPSBhc3luYyAod2FsbGV0QWRkcmVzcywgcnBjVXJsKSA9PiB7XG4gIGNvbnN0IHB1YmxpY0NsaWVudCA9IGNyZWF0ZVB1YmxpY0NsaWVudCh7XG4gICAgY2hhaW46IHdvcmxkY2hhaW4sXG4gICAgdHJhbnNwb3J0OiBodHRwKFxuICAgICAgcnBjVXJsIHx8IFwiaHR0cHM6Ly93b3JsZGNoYWluLW1haW5uZXQuZy5hbGNoZW15LmNvbS9wdWJsaWNcIlxuICAgIClcbiAgfSk7XG4gIHRyeSB7XG4gICAgY29uc3QgdmVyaWZpZWRVbnRpbFJlc3BvbnNlID0gYXdhaXQgcHVibGljQ2xpZW50LnJlYWRDb250cmFjdCh7XG4gICAgICBhZGRyZXNzOiB3b3JsZElkQWRkcmVzc0Jvb2tDb250cmFjdEFkZHJlc3MsXG4gICAgICBhYmk6IGFkZHJlc3NWZXJpZmllZFVudGlsQWJpLFxuICAgICAgZnVuY3Rpb25OYW1lOiBcImFkZHJlc3NWZXJpZmllZFVudGlsXCIsXG4gICAgICBhcmdzOiBbd2FsbGV0QWRkcmVzc11cbiAgICB9KTtcbiAgICBjb25zdCB2ZXJpZmllZFVudGlsID0gTnVtYmVyKHZlcmlmaWVkVW50aWxSZXNwb25zZS50b1N0cmluZygpKTtcbiAgICBpZiAoIU51bWJlci5pc0Zpbml0ZSh2ZXJpZmllZFVudGlsKSkge1xuICAgICAgY29uc29sZS53YXJuKFwiSW52YWxpZCB2ZXJpZmllZFVudGlsIHZhbHVlOlwiLCB2ZXJpZmllZFVudGlsKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgY29uc3QgY3VycmVudFRpbWUgPSBNYXRoLmZsb29yKERhdGUubm93KCkgLyAxZTMpO1xuICAgIHJldHVybiB2ZXJpZmllZFVudGlsID4gY3VycmVudFRpbWU7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIHZlcmlmeWluZyB1c2VyOlwiLCBlcnJvcik7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59O1xuZXhwb3J0IHtcbiAgQ2hhdEVycm9yQ29kZXMsXG4gIENoYXRFcnJvck1lc3NhZ2UsXG4gIENvbW1hbmQsXG4gIEdldFBlcm1pc3Npb25zRXJyb3JDb2RlcyxcbiAgR2V0UGVybWlzc2lvbnNFcnJvck1lc3NhZ2UsXG4gIE1pY3JvcGhvbmVFcnJvckNvZGVzLFxuICBNaWNyb3Bob25lRXJyb3JNZXNzYWdlLFxuICBNaW5pQXBwTGF1bmNoTG9jYXRpb24sXG4gIE1pbmlLaXQsXG4gIE1pbmlLaXRJbnN0YWxsRXJyb3JDb2RlcyxcbiAgTWluaUtpdEluc3RhbGxFcnJvck1lc3NhZ2UsXG4gIE5ldHdvcmssXG4gIFBheW1lbnRFcnJvckNvZGVzLFxuICBQYXltZW50RXJyb3JNZXNzYWdlLFxuICBQYXltZW50VmFsaWRhdGlvbkVycm9ycyxcbiAgUGVybWlzc2lvbixcbiAgUmVxdWVzdFBlcm1pc3Npb25FcnJvckNvZGVzLFxuICBSZXF1ZXN0UGVybWlzc2lvbkVycm9yTWVzc2FnZSxcbiAgUmVzcG9uc2VFdmVudCxcbiAgU2VuZEhhcHRpY0ZlZWRiYWNrRXJyb3JDb2RlcyxcbiAgU2VuZEhhcHRpY0ZlZWRiYWNrRXJyb3JNZXNzYWdlLFxuICBTZW5kVHJhbnNhY3Rpb25FcnJvckNvZGVzLFxuICBTZW5kVHJhbnNhY3Rpb25FcnJvck1lc3NhZ2UsXG4gIFNoYXJlQ29udGFjdHNFcnJvckNvZGVzLFxuICBTaGFyZUNvbnRhY3RzRXJyb3JNZXNzYWdlLFxuICBTaGFyZUZpbGVzRXJyb3JDb2RlcyxcbiAgU2hhcmVGaWxlc0Vycm9yTWVzc2FnZSxcbiAgU2lnbk1lc3NhZ2VFcnJvckNvZGVzLFxuICBTaWduTWVzc2FnZUVycm9yTWVzc2FnZSxcbiAgU2lnblR5cGVkRGF0YUVycm9yQ29kZXMsXG4gIFNpZ25UeXBlZERhdGFFcnJvck1lc3NhZ2UsXG4gIFRva2VuRGVjaW1hbHMsXG4gIFRva2VucyxcbiAgQXBwRXJyb3JDb2RlcyBhcyBWZXJpZmljYXRpb25FcnJvckNvZGVzLFxuICBWZXJpZmljYXRpb25FcnJvck1lc3NhZ2UsXG4gIFZlcmlmaWNhdGlvbkxldmVsLFxuICBXYWxsZXRBdXRoRXJyb3JDb2RlcyxcbiAgV2FsbGV0QXV0aEVycm9yTWVzc2FnZSxcbiAgZ2V0SXNVc2VyVmVyaWZpZWQsXG4gIG1hcFdvcmxkQXBwTGF1bmNoTG9jYXRpb24sXG4gIHBhcnNlU2l3ZU1lc3NhZ2UsXG4gIHRva2VuVG9EZWNpbWFscyxcbiAgdmVyaWZ5Q2xvdWRQcm9vZixcbiAgdmVyaWZ5U2l3ZU1lc3NhZ2Vcbn07XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@worldcoin+minikit-js@1.9.9_@types+react@19.2.9_react@19.2.3_typescript@5.9.3_viem@2.23.5_typescript@5.9.3_/node_modules/@worldcoin/minikit-js/build/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/@worldcoin+minikit-js@1.9.9_@types+react@19.2.9_react@19.2.3_typescript@5.9.3_viem@2.23.5_typescript@5.9.3_/node_modules/@worldcoin/minikit-js/build/chunk-VWX7SELF.js":
/*!***************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@worldcoin+minikit-js@1.9.9_@types+react@19.2.9_react@19.2.3_typescript@5.9.3_viem@2.23.5_typescript@5.9.3_/node_modules/@worldcoin/minikit-js/build/chunk-VWX7SELF.js ***!
  \***************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AppErrorCodes: () => (/* reexport safe */ _worldcoin_idkit_core__WEBPACK_IMPORTED_MODULE_0__.AppErrorCodes),\n/* harmony export */   ChatErrorCodes: () => (/* binding */ ChatErrorCodes),\n/* harmony export */   ChatErrorMessage: () => (/* binding */ ChatErrorMessage),\n/* harmony export */   Command: () => (/* binding */ Command),\n/* harmony export */   GetPermissionsErrorCodes: () => (/* binding */ GetPermissionsErrorCodes),\n/* harmony export */   GetPermissionsErrorMessage: () => (/* binding */ GetPermissionsErrorMessage),\n/* harmony export */   MicrophoneErrorCodes: () => (/* binding */ MicrophoneErrorCodes),\n/* harmony export */   MicrophoneErrorMessage: () => (/* binding */ MicrophoneErrorMessage),\n/* harmony export */   MiniAppLaunchLocation: () => (/* binding */ MiniAppLaunchLocation),\n/* harmony export */   MiniKit: () => (/* binding */ MiniKit),\n/* harmony export */   MiniKitInstallErrorCodes: () => (/* binding */ MiniKitInstallErrorCodes),\n/* harmony export */   MiniKitInstallErrorMessage: () => (/* binding */ MiniKitInstallErrorMessage),\n/* harmony export */   Network: () => (/* binding */ Network),\n/* harmony export */   PaymentErrorCodes: () => (/* binding */ PaymentErrorCodes),\n/* harmony export */   PaymentErrorMessage: () => (/* binding */ PaymentErrorMessage),\n/* harmony export */   PaymentValidationErrors: () => (/* binding */ PaymentValidationErrors),\n/* harmony export */   Permission: () => (/* binding */ Permission),\n/* harmony export */   RequestPermissionErrorCodes: () => (/* binding */ RequestPermissionErrorCodes),\n/* harmony export */   RequestPermissionErrorMessage: () => (/* binding */ RequestPermissionErrorMessage),\n/* harmony export */   ResponseEvent: () => (/* binding */ ResponseEvent),\n/* harmony export */   SendHapticFeedbackErrorCodes: () => (/* binding */ SendHapticFeedbackErrorCodes),\n/* harmony export */   SendHapticFeedbackErrorMessage: () => (/* binding */ SendHapticFeedbackErrorMessage),\n/* harmony export */   SendTransactionErrorCodes: () => (/* binding */ SendTransactionErrorCodes),\n/* harmony export */   SendTransactionErrorMessage: () => (/* binding */ SendTransactionErrorMessage),\n/* harmony export */   ShareContactsErrorCodes: () => (/* binding */ ShareContactsErrorCodes),\n/* harmony export */   ShareContactsErrorMessage: () => (/* binding */ ShareContactsErrorMessage),\n/* harmony export */   ShareFilesErrorCodes: () => (/* binding */ ShareFilesErrorCodes),\n/* harmony export */   ShareFilesErrorMessage: () => (/* binding */ ShareFilesErrorMessage),\n/* harmony export */   SignMessageErrorCodes: () => (/* binding */ SignMessageErrorCodes),\n/* harmony export */   SignMessageErrorMessage: () => (/* binding */ SignMessageErrorMessage),\n/* harmony export */   SignTypedDataErrorCodes: () => (/* binding */ SignTypedDataErrorCodes),\n/* harmony export */   SignTypedDataErrorMessage: () => (/* binding */ SignTypedDataErrorMessage),\n/* harmony export */   TokenDecimals: () => (/* binding */ TokenDecimals),\n/* harmony export */   Tokens: () => (/* binding */ Tokens),\n/* harmony export */   VerificationErrorMessage: () => (/* binding */ VerificationErrorMessage),\n/* harmony export */   WalletAuthErrorCodes: () => (/* binding */ WalletAuthErrorCodes),\n/* harmony export */   WalletAuthErrorMessage: () => (/* binding */ WalletAuthErrorMessage),\n/* harmony export */   mapWorldAppLaunchLocation: () => (/* binding */ mapWorldAppLaunchLocation),\n/* harmony export */   parseSiweMessage: () => (/* binding */ parseSiweMessage),\n/* harmony export */   tokenToDecimals: () => (/* binding */ tokenToDecimals),\n/* harmony export */   verifySiweMessage: () => (/* binding */ verifySiweMessage)\n/* harmony export */ });\n/* harmony import */ var _worldcoin_idkit_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @worldcoin/idkit-core */ \"(ssr)/./node_modules/.pnpm/@worldcoin+idkit-core@2.1.0_@types+react@19.2.9_react@19.2.3_typescript@5.9.3/node_modules/@worldcoin/idkit-core/build/index.js\");\n/* harmony import */ var viem__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! viem */ \"(ssr)/./node_modules/.pnpm/viem@2.23.5_typescript@5.9.3/node_modules/viem/_esm/clients/createPublicClient.js\");\n/* harmony import */ var viem__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! viem */ \"(ssr)/./node_modules/.pnpm/viem@2.23.5_typescript@5.9.3/node_modules/viem/_esm/clients/transports/http.js\");\n/* harmony import */ var viem__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! viem */ \"(ssr)/./node_modules/.pnpm/viem@2.23.5_typescript@5.9.3/node_modules/viem/_esm/utils/signature/hashMessage.js\");\n/* harmony import */ var viem__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! viem */ \"(ssr)/./node_modules/.pnpm/viem@2.23.5_typescript@5.9.3/node_modules/viem/_esm/actions/getContract.js\");\n/* harmony import */ var viem__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! viem */ \"(ssr)/./node_modules/.pnpm/viem@2.23.5_typescript@5.9.3/node_modules/viem/_esm/utils/signature/recoverAddress.js\");\n/* harmony import */ var viem_chains__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! viem/chains */ \"(ssr)/./node_modules/.pnpm/viem@2.23.5_typescript@5.9.3/node_modules/viem/_esm/chains/definitions/worldchain.js\");\n/* harmony import */ var _worldcoin_idkit_core_hashing__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @worldcoin/idkit-core/hashing */ \"(ssr)/./node_modules/.pnpm/@worldcoin+idkit-core@2.1.0_@types+react@19.2.9_react@19.2.3_typescript@5.9.3/node_modules/@worldcoin/idkit-core/build/lib/hashing.js\");\n/* harmony import */ var viem__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! viem */ \"(ssr)/./node_modules/.pnpm/viem@2.23.5_typescript@5.9.3/node_modules/viem/_esm/utils/abi/decodeAbiParameters.js\");\n/* harmony import */ var viem__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! viem */ \"(ssr)/./node_modules/.pnpm/viem@2.23.5_typescript@5.9.3/node_modules/viem/_esm/utils/abi/encodeAbiParameters.js\");\n// types/errors.ts\n\n\nvar VerificationErrorMessage = {\n  [_worldcoin_idkit_core__WEBPACK_IMPORTED_MODULE_0__.AppErrorCodes.VerificationRejected]: \"You've cancelled the request in World App.\",\n  [_worldcoin_idkit_core__WEBPACK_IMPORTED_MODULE_0__.AppErrorCodes.MaxVerificationsReached]: \"You have already verified the maximum number of times for this action.\",\n  [_worldcoin_idkit_core__WEBPACK_IMPORTED_MODULE_0__.AppErrorCodes.CredentialUnavailable]: \"It seems you do not have the verification level required by this app.\",\n  [_worldcoin_idkit_core__WEBPACK_IMPORTED_MODULE_0__.AppErrorCodes.MalformedRequest]: \"There was a problem with this request. Please try again or contact the app owner.\",\n  [_worldcoin_idkit_core__WEBPACK_IMPORTED_MODULE_0__.AppErrorCodes.InvalidNetwork]: \"Invalid network. If you are the app owner, visit docs.worldcoin.org/test for details.\",\n  [_worldcoin_idkit_core__WEBPACK_IMPORTED_MODULE_0__.AppErrorCodes.InclusionProofFailed]: \"There was an issue fetching your credential. Please try again.\",\n  [_worldcoin_idkit_core__WEBPACK_IMPORTED_MODULE_0__.AppErrorCodes.InclusionProofPending]: \"Your identity is still being registered. Please wait a few minutes and try again.\",\n  [_worldcoin_idkit_core__WEBPACK_IMPORTED_MODULE_0__.AppErrorCodes.UnexpectedResponse]: \"Unexpected response from your wallet. Please try again.\",\n  [_worldcoin_idkit_core__WEBPACK_IMPORTED_MODULE_0__.AppErrorCodes.FailedByHostApp]: \"Verification failed by the app. Please contact the app owner for details.\",\n  [_worldcoin_idkit_core__WEBPACK_IMPORTED_MODULE_0__.AppErrorCodes.GenericError]: \"Something unexpected went wrong. Please try again.\",\n  [_worldcoin_idkit_core__WEBPACK_IMPORTED_MODULE_0__.AppErrorCodes.ConnectionFailed]: \"Connection to your wallet failed. Please try again.\"\n};\nvar PaymentErrorCodes = /* @__PURE__ */ ((PaymentErrorCodes2) => {\n  PaymentErrorCodes2[\"InputError\"] = \"input_error\";\n  PaymentErrorCodes2[\"UserRejected\"] = \"user_rejected\";\n  PaymentErrorCodes2[\"PaymentRejected\"] = \"payment_rejected\";\n  PaymentErrorCodes2[\"InvalidReceiver\"] = \"invalid_receiver\";\n  PaymentErrorCodes2[\"InsufficientBalance\"] = \"insufficient_balance\";\n  PaymentErrorCodes2[\"TransactionFailed\"] = \"transaction_failed\";\n  PaymentErrorCodes2[\"GenericError\"] = \"generic_error\";\n  PaymentErrorCodes2[\"UserBlocked\"] = \"user_blocked\";\n  return PaymentErrorCodes2;\n})(PaymentErrorCodes || {});\nvar PaymentErrorMessage = {\n  [\"input_error\" /* InputError */]: \"There was a problem with this request. Please try again or contact the app owner.\",\n  [\"user_rejected\" /* UserRejected */]: \"You have cancelled the payment in World App.\",\n  [\"payment_rejected\" /* PaymentRejected */]: \"You've cancelled the payment in World App.\",\n  [\"invalid_receiver\" /* InvalidReceiver */]: \"The receiver address is invalid. Please contact the app owner.\",\n  [\"insufficient_balance\" /* InsufficientBalance */]: \"You do not have enough balance to complete this transaction.\",\n  [\"transaction_failed\" /* TransactionFailed */]: \"The transaction failed. Please try again.\",\n  [\"generic_error\" /* GenericError */]: \"Something unexpected went wrong. Please try again.\",\n  [\"user_blocked\" /* UserBlocked */]: \"User's region is blocked from making payments.\"\n};\nvar PaymentValidationErrors = /* @__PURE__ */ ((PaymentValidationErrors2) => {\n  PaymentValidationErrors2[\"MalformedRequest\"] = \"There was a problem with this request. Please try again or contact the app owner.\";\n  PaymentValidationErrors2[\"InvalidTokenAddress\"] = \"The token address is invalid. Please contact the app owner.\";\n  PaymentValidationErrors2[\"InvalidAppId\"] = \"The app ID is invalid. Please contact the app owner.\";\n  PaymentValidationErrors2[\"DuplicateReference\"] = \"This reference ID already exists please generate a new one and try again.\";\n  return PaymentValidationErrors2;\n})(PaymentValidationErrors || {});\nvar WalletAuthErrorCodes = /* @__PURE__ */ ((WalletAuthErrorCodes2) => {\n  WalletAuthErrorCodes2[\"MalformedRequest\"] = \"malformed_request\";\n  WalletAuthErrorCodes2[\"UserRejected\"] = \"user_rejected\";\n  WalletAuthErrorCodes2[\"GenericError\"] = \"generic_error\";\n  return WalletAuthErrorCodes2;\n})(WalletAuthErrorCodes || {});\nvar WalletAuthErrorMessage = {\n  [\"malformed_request\" /* MalformedRequest */]: \"Provided parameters in the request are invalid.\",\n  [\"user_rejected\" /* UserRejected */]: \"User rejected the request.\",\n  [\"generic_error\" /* GenericError */]: \"Something unexpected went wrong.\"\n};\nvar SendTransactionErrorCodes = /* @__PURE__ */ ((SendTransactionErrorCodes2) => {\n  SendTransactionErrorCodes2[\"InvalidOperation\"] = \"invalid_operation\";\n  SendTransactionErrorCodes2[\"UserRejected\"] = \"user_rejected\";\n  SendTransactionErrorCodes2[\"InputError\"] = \"input_error\";\n  SendTransactionErrorCodes2[\"SimulationFailed\"] = \"simulation_failed\";\n  SendTransactionErrorCodes2[\"TransactionFailed\"] = \"transaction_failed\";\n  SendTransactionErrorCodes2[\"GenericError\"] = \"generic_error\";\n  SendTransactionErrorCodes2[\"DisallowedOperation\"] = \"disallowed_operation\";\n  SendTransactionErrorCodes2[\"ValidationError\"] = \"validation_error\";\n  SendTransactionErrorCodes2[\"InvalidContract\"] = \"invalid_contract\";\n  SendTransactionErrorCodes2[\"MaliciousOperation\"] = \"malicious_operation\";\n  SendTransactionErrorCodes2[\"DailyTxLimitReached\"] = \"daily_tx_limit_reached\";\n  SendTransactionErrorCodes2[\"PermittedAmountExceedsSlippage\"] = \"permitted_amount_exceeds_slippage\";\n  SendTransactionErrorCodes2[\"PermittedAmountNotFound\"] = \"permitted_amount_not_found\";\n  return SendTransactionErrorCodes2;\n})(SendTransactionErrorCodes || {});\nvar SendTransactionErrorMessage = {\n  [\"invalid_operation\" /* InvalidOperation */]: \"Transaction included an operation that was invalid\",\n  [\"user_rejected\" /* UserRejected */]: \"User rejected the request.\",\n  [\"input_error\" /* InputError */]: \"Invalid payload.\",\n  [\"simulation_failed\" /* SimulationFailed */]: \"The transaction simulation failed.\",\n  [\"validation_error\" /* ValidationError */]: \"The transaction validation failed. Please try again.\",\n  [\"transaction_failed\" /* TransactionFailed */]: \"The transaction failed. Please try again later.\",\n  [\"generic_error\" /* GenericError */]: \"Something unexpected went wrong. Please try again.\",\n  [\"disallowed_operation\" /* DisallowedOperation */]: \"The operation requested is not allowed. Please refer to the docs.\",\n  [\"invalid_contract\" /* InvalidContract */]: \"The contract address is not allowed for your application. Please check your developer portal configurations\",\n  [\"malicious_operation\" /* MaliciousOperation */]: \"The operation requested is considered malicious.\",\n  [\"daily_tx_limit_reached\" /* DailyTxLimitReached */]: \"Daily transaction limit reached. Max 100 transactions per day. Wait until the next day.\",\n  [\"permitted_amount_exceeds_slippage\" /* PermittedAmountExceedsSlippage */]: \"Permitted amount exceeds slippage. You must spend at least 90% of the permitted amount.\",\n  [\"permitted_amount_not_found\" /* PermittedAmountNotFound */]: \"Permitted amount not found in permit2 payload.\"\n};\nvar SignMessageErrorCodes = /* @__PURE__ */ ((SignMessageErrorCodes2) => {\n  SignMessageErrorCodes2[\"InvalidMessage\"] = \"invalid_message\";\n  SignMessageErrorCodes2[\"UserRejected\"] = \"user_rejected\";\n  SignMessageErrorCodes2[\"GenericError\"] = \"generic_error\";\n  return SignMessageErrorCodes2;\n})(SignMessageErrorCodes || {});\nvar SignMessageErrorMessage = {\n  [\"invalid_message\" /* InvalidMessage */]: \"Invalid message requested\",\n  [\"user_rejected\" /* UserRejected */]: \"User rejected the request.\",\n  [\"generic_error\" /* GenericError */]: \"Something unexpected went wrong.\"\n};\nvar SignTypedDataErrorCodes = /* @__PURE__ */ ((SignTypedDataErrorCodes2) => {\n  SignTypedDataErrorCodes2[\"InvalidOperation\"] = \"invalid_operation\";\n  SignTypedDataErrorCodes2[\"UserRejected\"] = \"user_rejected\";\n  SignTypedDataErrorCodes2[\"InputError\"] = \"input_error\";\n  SignTypedDataErrorCodes2[\"SimulationFailed\"] = \"simulation_failed\";\n  SignTypedDataErrorCodes2[\"GenericError\"] = \"generic_error\";\n  SignTypedDataErrorCodes2[\"DisallowedOperation\"] = \"disallowed_operation\";\n  SignTypedDataErrorCodes2[\"InvalidContract\"] = \"invalid_contract\";\n  SignTypedDataErrorCodes2[\"MaliciousOperation\"] = \"malicious_operation\";\n  return SignTypedDataErrorCodes2;\n})(SignTypedDataErrorCodes || {});\nvar SignTypedDataErrorMessage = {\n  [\"invalid_operation\" /* InvalidOperation */]: \"Transaction included an operation that was invalid\",\n  [\"user_rejected\" /* UserRejected */]: \"User rejected the request.\",\n  [\"input_error\" /* InputError */]: \"Invalid payload.\",\n  [\"simulation_failed\" /* SimulationFailed */]: \"The transaction simulation failed.\",\n  [\"generic_error\" /* GenericError */]: \"Something unexpected went wrong. Please try again.\",\n  [\"disallowed_operation\" /* DisallowedOperation */]: \"The operation requested is not allowed. Please refer to the docs.\",\n  [\"invalid_contract\" /* InvalidContract */]: \"The contract address is not allowed for your application. Please check your developer portal configurations\",\n  [\"malicious_operation\" /* MaliciousOperation */]: \"The operation requested is considered malicious.\"\n};\nvar MiniKitInstallErrorCodes = /* @__PURE__ */ ((MiniKitInstallErrorCodes2) => {\n  MiniKitInstallErrorCodes2[\"Unknown\"] = \"unknown\";\n  MiniKitInstallErrorCodes2[\"AlreadyInstalled\"] = \"already_installed\";\n  MiniKitInstallErrorCodes2[\"OutsideOfWorldApp\"] = \"outside_of_worldapp\";\n  MiniKitInstallErrorCodes2[\"NotOnClient\"] = \"not_on_client\";\n  MiniKitInstallErrorCodes2[\"AppOutOfDate\"] = \"app_out_of_date\";\n  return MiniKitInstallErrorCodes2;\n})(MiniKitInstallErrorCodes || {});\nvar MiniKitInstallErrorMessage = {\n  [\"unknown\" /* Unknown */]: \"Failed to install MiniKit.\",\n  [\"already_installed\" /* AlreadyInstalled */]: \"MiniKit is already installed.\",\n  [\"outside_of_worldapp\" /* OutsideOfWorldApp */]: \"MiniApp launched outside of WorldApp.\",\n  [\"not_on_client\" /* NotOnClient */]: \"Window object is not available.\",\n  [\"app_out_of_date\" /* AppOutOfDate */]: \"WorldApp is out of date. Please update the app.\"\n};\nvar ShareContactsErrorCodes = /* @__PURE__ */ ((ShareContactsErrorCodes2) => {\n  ShareContactsErrorCodes2[\"UserRejected\"] = \"user_rejected\";\n  ShareContactsErrorCodes2[\"GenericError\"] = \"generic_error\";\n  return ShareContactsErrorCodes2;\n})(ShareContactsErrorCodes || {});\nvar ShareContactsErrorMessage = {\n  [\"user_rejected\" /* UserRejected */]: \"User rejected the request.\",\n  [\"generic_error\" /* GenericError */]: \"Something unexpected went wrong.\"\n};\nvar RequestPermissionErrorCodes = /* @__PURE__ */ ((RequestPermissionErrorCodes2) => {\n  RequestPermissionErrorCodes2[\"UserRejected\"] = \"user_rejected\";\n  RequestPermissionErrorCodes2[\"GenericError\"] = \"generic_error\";\n  RequestPermissionErrorCodes2[\"AlreadyRequested\"] = \"already_requested\";\n  RequestPermissionErrorCodes2[\"PermissionDisabled\"] = \"permission_disabled\";\n  RequestPermissionErrorCodes2[\"AlreadyGranted\"] = \"already_granted\";\n  RequestPermissionErrorCodes2[\"UnsupportedPermission\"] = \"unsupported_permission\";\n  return RequestPermissionErrorCodes2;\n})(RequestPermissionErrorCodes || {});\nvar RequestPermissionErrorMessage = {\n  [\"user_rejected\" /* UserRejected */]: \"User declined sharing contacts\",\n  [\"generic_error\" /* GenericError */]: \"Request failed for unknown reason.\",\n  [\"already_requested\" /* AlreadyRequested */]: \"User has already declined turning on notifications once\",\n  [\"permission_disabled\" /* PermissionDisabled */]: \"User does not have this permission enabled in World App\",\n  [\"already_granted\" /* AlreadyGranted */]: \"If the user has already granted this mini app permission\",\n  [\"unsupported_permission\" /* UnsupportedPermission */]: \"The permission requested is not supported by this mini app\"\n};\nvar GetPermissionsErrorCodes = /* @__PURE__ */ ((GetPermissionsErrorCodes2) => {\n  GetPermissionsErrorCodes2[\"GenericError\"] = \"generic_error\";\n  return GetPermissionsErrorCodes2;\n})(GetPermissionsErrorCodes || {});\nvar GetPermissionsErrorMessage = {\n  [\"generic_error\" /* GenericError */]: \"Something unexpected went wrong. Please try again.\"\n};\nvar SendHapticFeedbackErrorCodes = /* @__PURE__ */ ((SendHapticFeedbackErrorCodes2) => {\n  SendHapticFeedbackErrorCodes2[\"GenericError\"] = \"generic_error\";\n  SendHapticFeedbackErrorCodes2[\"UserRejected\"] = \"user_rejected\";\n  return SendHapticFeedbackErrorCodes2;\n})(SendHapticFeedbackErrorCodes || {});\nvar SendHapticFeedbackErrorMessage = {\n  [\"generic_error\" /* GenericError */]: \"Something unexpected went wrong.\",\n  [\"user_rejected\" /* UserRejected */]: \"User rejected the request.\"\n};\nvar ShareFilesErrorCodes = /* @__PURE__ */ ((ShareFilesErrorCodes2) => {\n  ShareFilesErrorCodes2[\"UserRejected\"] = \"user_rejected\";\n  ShareFilesErrorCodes2[\"GenericError\"] = \"generic_error\";\n  ShareFilesErrorCodes2[\"InvalidFileName\"] = \"invalid_file_name\";\n  return ShareFilesErrorCodes2;\n})(ShareFilesErrorCodes || {});\nvar ShareFilesErrorMessage = {\n  [\"user_rejected\" /* UserRejected */]: \"User rejected the request.\",\n  [\"generic_error\" /* GenericError */]: \"Something unexpected went wrong.\",\n  [\"invalid_file_name\" /* InvalidFileName */]: \"Invalid file name. Make sure you include the extension\"\n};\nvar MicrophoneErrorCodes = /* @__PURE__ */ ((MicrophoneErrorCodes2) => {\n  MicrophoneErrorCodes2[\"MiniAppPermissionNotEnabled\"] = \"mini_app_permission_not_enabled\";\n  MicrophoneErrorCodes2[\"WorldAppPermissionNotEnabled\"] = \"world_app_permission_not_enabled\";\n  return MicrophoneErrorCodes2;\n})(MicrophoneErrorCodes || {});\nvar MicrophoneErrorMessage = {\n  [\"mini_app_permission_not_enabled\" /* MiniAppPermissionNotEnabled */]: \"Microphone permission not enabled for your Mini App\",\n  [\"world_app_permission_not_enabled\" /* WorldAppPermissionNotEnabled */]: \"Microphone permission not enabled in World App\"\n};\nvar ChatErrorCodes = /* @__PURE__ */ ((ChatErrorCodes2) => {\n  ChatErrorCodes2[\"UserRejected\"] = \"user_rejected\";\n  ChatErrorCodes2[\"SendFailed\"] = \"send_failed\";\n  ChatErrorCodes2[\"GenericError\"] = \"generic_error\";\n  return ChatErrorCodes2;\n})(ChatErrorCodes || {});\nvar ChatErrorMessage = {\n  [\"user_rejected\" /* UserRejected */]: \"User rejected the request.\",\n  [\"send_failed\" /* SendFailed */]: \"Failed to send the message.\",\n  [\"generic_error\" /* GenericError */]: \"Something unexpected went wrong.\"\n};\n\n// types/responses.ts\nvar ResponseEvent = /* @__PURE__ */ ((ResponseEvent2) => {\n  ResponseEvent2[\"MiniAppVerifyAction\"] = \"miniapp-verify-action\";\n  ResponseEvent2[\"MiniAppPayment\"] = \"miniapp-payment\";\n  ResponseEvent2[\"MiniAppWalletAuth\"] = \"miniapp-wallet-auth\";\n  ResponseEvent2[\"MiniAppSendTransaction\"] = \"miniapp-send-transaction\";\n  ResponseEvent2[\"MiniAppSignMessage\"] = \"miniapp-sign-message\";\n  ResponseEvent2[\"MiniAppSignTypedData\"] = \"miniapp-sign-typed-data\";\n  ResponseEvent2[\"MiniAppShareContacts\"] = \"miniapp-share-contacts\";\n  ResponseEvent2[\"MiniAppRequestPermission\"] = \"miniapp-request-permission\";\n  ResponseEvent2[\"MiniAppGetPermissions\"] = \"miniapp-get-permissions\";\n  ResponseEvent2[\"MiniAppSendHapticFeedback\"] = \"miniapp-send-haptic-feedback\";\n  ResponseEvent2[\"MiniAppShare\"] = \"miniapp-share\";\n  ResponseEvent2[\"MiniAppMicrophone\"] = \"miniapp-microphone\";\n  ResponseEvent2[\"MiniAppChat\"] = \"miniapp-chat\";\n  return ResponseEvent2;\n})(ResponseEvent || {});\n\n// types/payment.ts\nvar Tokens = /* @__PURE__ */ ((Tokens2) => {\n  Tokens2[\"USDC\"] = \"USDCE\";\n  Tokens2[\"WLD\"] = \"WLD\";\n  return Tokens2;\n})(Tokens || {});\nvar TokenDecimals = {\n  [\"USDCE\" /* USDC */]: 6,\n  [\"WLD\" /* WLD */]: 18\n};\nvar Network = /* @__PURE__ */ ((Network2) => {\n  Network2[\"Optimism\"] = \"optimism\";\n  Network2[\"WorldChain\"] = \"worldchain\";\n  return Network2;\n})(Network || {});\n\n// helpers/payment/client.ts\nvar tokenToDecimals = (amount, token) => {\n  const decimals = TokenDecimals[token];\n  if (decimals === void 0) {\n    throw new Error(`Invalid token: ${token}`);\n  }\n  const factor = 10 ** decimals;\n  const result = amount * factor;\n  if (!Number.isInteger(result)) {\n    throw new Error(`The resulting amount is not a whole number: ${result}`);\n  }\n  return result;\n};\nvar validatePaymentPayload = (payload) => {\n  if (payload.tokens.some(\n    (token) => token.symbol == \"USDCE\" /* USDC */ && parseFloat(token.token_amount) < 0.1\n  )) {\n    console.error(\"USDC amount should be greater than $0.1\");\n    return false;\n  }\n  if (payload.reference.length > 36) {\n    console.error(\"Reference must not exceed 36 characters\");\n    return false;\n  }\n  if (typeof payload.reference !== \"string\") {\n    throw new Error(\"Reference must be a string\");\n  }\n  return true;\n};\n\n// helpers/siwe/siwe.ts\n\n\nvar PREAMBLE = \" wants you to sign in with your Ethereum account:\";\nvar URI_TAG = \"URI: \";\nvar VERSION_TAG = \"Version: \";\nvar CHAIN_TAG = \"Chain ID: \";\nvar NONCE_TAG = \"Nonce: \";\nvar IAT_TAG = \"Issued At: \";\nvar EXP_TAG = \"Expiration Time: \";\nvar NBF_TAG = \"Not Before: \";\nvar RID_TAG = \"Request ID: \";\nvar ERC_191_PREFIX = \"\u0019Ethereum Signed Message:\\n\";\nvar EIP1271_MAGICVALUE = \"0x1626ba7e\";\nvar SAFE_CONTRACT_ABI = [\n  {\n    inputs: [\n      {\n        internalType: \"address\",\n        name: \"owner\",\n        type: \"address\"\n      }\n    ],\n    name: \"isOwner\",\n    outputs: [\n      {\n        internalType: \"bool\",\n        name: \"\",\n        type: \"bool\"\n      }\n    ],\n    stateMutability: \"view\",\n    type: \"function\"\n  },\n  {\n    inputs: [\n      {\n        internalType: \"bytes32\",\n        name: \"_message\",\n        type: \"bytes32\"\n      },\n      {\n        internalType: \"bytes\",\n        name: \"_signature\",\n        type: \"bytes\"\n      }\n    ],\n    name: \"isValidSignature\",\n    outputs: [\n      {\n        internalType: \"bytes4\",\n        name: \"\",\n        type: \"bytes4\"\n      }\n    ],\n    stateMutability: \"view\",\n    type: \"function\"\n  }\n];\nvar tagged = (line, tag) => {\n  if (line && line.includes(tag)) {\n    return line.replace(tag, \"\");\n  } else {\n    throw new Error(`Missing '${tag}'`);\n  }\n};\nvar parseSiweMessage = (inputString) => {\n  const lines = inputString.split(\"\\n\")[Symbol.iterator]();\n  const domain = tagged(lines.next()?.value, PREAMBLE);\n  const address = lines.next()?.value;\n  lines.next();\n  const nextValue = lines.next()?.value;\n  let statement;\n  if (nextValue) {\n    statement = nextValue;\n    lines.next();\n  }\n  const uri = tagged(lines.next()?.value, URI_TAG);\n  const version = tagged(lines.next()?.value, VERSION_TAG);\n  const chain_id = tagged(lines.next()?.value, CHAIN_TAG);\n  const nonce = tagged(lines.next()?.value, NONCE_TAG);\n  const issued_at = tagged(lines.next()?.value, IAT_TAG);\n  let expiration_time, not_before, request_id;\n  for (let line of lines) {\n    if (line.startsWith(EXP_TAG)) {\n      expiration_time = tagged(line, EXP_TAG);\n    } else if (line.startsWith(NBF_TAG)) {\n      not_before = tagged(line, NBF_TAG);\n    } else if (line.startsWith(RID_TAG)) {\n      request_id = tagged(line, RID_TAG);\n    }\n  }\n  if (lines.next().done === false) {\n    throw new Error(\"Extra lines in the input\");\n  }\n  const siweMessageData = {\n    domain,\n    address,\n    statement,\n    uri,\n    version,\n    chain_id,\n    nonce,\n    issued_at,\n    expiration_time,\n    not_before,\n    request_id\n  };\n  return siweMessageData;\n};\nvar generateSiweMessage = (siweMessageData) => {\n  let siweMessage = \"\";\n  if (siweMessageData.scheme) {\n    siweMessage += `${siweMessageData.scheme}://${siweMessageData.domain} wants you to sign in with your Ethereum account:\n`;\n  } else {\n    siweMessage += `${siweMessageData.domain} wants you to sign in with your Ethereum account:\n`;\n  }\n  if (siweMessageData.address) {\n    siweMessage += `${siweMessageData.address}\n`;\n  } else {\n    siweMessage += \"{address}\\n\";\n  }\n  siweMessage += \"\\n\";\n  if (siweMessageData.statement) {\n    siweMessage += `${siweMessageData.statement}\n`;\n  }\n  siweMessage += \"\\n\";\n  siweMessage += `URI: ${siweMessageData.uri}\n`;\n  siweMessage += `Version: ${siweMessageData.version}\n`;\n  siweMessage += `Chain ID: ${siweMessageData.chain_id}\n`;\n  siweMessage += `Nonce: ${siweMessageData.nonce}\n`;\n  siweMessage += `Issued At: ${siweMessageData.issued_at}\n`;\n  if (siweMessageData.expiration_time) {\n    siweMessage += `Expiration Time: ${siweMessageData.expiration_time}\n`;\n  }\n  if (siweMessageData.not_before) {\n    siweMessage += `Not Before: ${siweMessageData.not_before}\n`;\n  }\n  if (siweMessageData.request_id) {\n    siweMessage += `Request ID: ${siweMessageData.request_id}\n`;\n  }\n  return siweMessage;\n};\nvar verifySiweMessage = (payload, nonce, statement, requestId, userProvider) => {\n  if (payload.version === 1) {\n    return verifySiweMessageV1(\n      payload,\n      nonce,\n      statement,\n      requestId,\n      userProvider\n    );\n  } else {\n    return verifySiweMessageV2(\n      payload,\n      nonce,\n      statement,\n      requestId,\n      userProvider\n    );\n  }\n};\nvar validateMessage = (siweMessageData, nonce, statement, requestId) => {\n  if (siweMessageData.expiration_time) {\n    const expirationTime = new Date(siweMessageData.expiration_time);\n    if (expirationTime < /* @__PURE__ */ new Date()) {\n      throw new Error(\"Expired message\");\n    }\n  }\n  if (siweMessageData.not_before) {\n    const notBefore = new Date(siweMessageData.not_before);\n    if (notBefore > /* @__PURE__ */ new Date()) {\n      throw new Error(\"Not Before time has not passed\");\n    }\n  }\n  if (nonce && siweMessageData.nonce !== nonce) {\n    throw new Error(\n      `Nonce mismatch. Got: ${siweMessageData.nonce}, Expected: ${nonce}`\n    );\n  }\n  if (statement && siweMessageData.statement !== statement) {\n    throw new Error(\n      `Statement mismatch. Got: ${siweMessageData.statement}, Expected: ${statement}`\n    );\n  }\n  if (requestId && siweMessageData.request_id !== requestId) {\n    throw new Error(\n      `Request ID mismatch. Got: ${siweMessageData.request_id}, Expected: ${requestId}`\n    );\n  }\n  return true;\n};\nvar verifySiweMessageV1 = async (payload, nonce, statement, requestId, userProvider) => {\n  if (typeof window !== \"undefined\") {\n    throw new Error(\"Wallet auth payload can only be verified in the backend\");\n  }\n  const { message, signature, address } = payload;\n  const siweMessageData = parseSiweMessage(message);\n  validateMessage(siweMessageData, nonce, statement, requestId);\n  let provider = userProvider || (0,viem__WEBPACK_IMPORTED_MODULE_1__.createPublicClient)({ chain: viem_chains__WEBPACK_IMPORTED_MODULE_2__.worldchain, transport: (0,viem__WEBPACK_IMPORTED_MODULE_3__.http)() });\n  const signedMessage = `${ERC_191_PREFIX}${message.length}${message}`;\n  const hashedMessage = (0,viem__WEBPACK_IMPORTED_MODULE_4__.hashMessage)(signedMessage);\n  const contract = (0,viem__WEBPACK_IMPORTED_MODULE_5__.getContract)({\n    address,\n    abi: SAFE_CONTRACT_ABI,\n    client: provider\n  });\n  try {\n    const recoveredAddress = await (0,viem__WEBPACK_IMPORTED_MODULE_6__.recoverAddress)({\n      hash: hashedMessage,\n      signature: `0x${signature}`\n    });\n    const isOwner = await contract.read.isOwner([recoveredAddress]);\n    if (!isOwner) {\n      throw new Error(\"Signature verification failed, invalid owner\");\n    }\n  } catch (error) {\n    throw new Error(\"Signature verification failed\");\n  }\n  return { isValid: true, siweMessageData };\n};\nvar verifySiweMessageV2 = async (payload, nonce, statement, requestId, userProvider) => {\n  if (typeof window !== \"undefined\") {\n    throw new Error(\"Wallet auth payload can only be verified in the backend\");\n  }\n  const { message, signature, address } = payload;\n  const siweMessageData = parseSiweMessage(message);\n  if (!validateMessage(siweMessageData, nonce, statement, requestId)) {\n    throw new Error(\"Validation failed\");\n  }\n  try {\n    const walletContract = (0,viem__WEBPACK_IMPORTED_MODULE_5__.getContract)({\n      address,\n      abi: SAFE_CONTRACT_ABI,\n      client: userProvider || (0,viem__WEBPACK_IMPORTED_MODULE_1__.createPublicClient)({ chain: viem_chains__WEBPACK_IMPORTED_MODULE_2__.worldchain, transport: (0,viem__WEBPACK_IMPORTED_MODULE_3__.http)() })\n    });\n    const hashedMessage = (0,viem__WEBPACK_IMPORTED_MODULE_4__.hashMessage)(message);\n    const res = await walletContract.read.isValidSignature([\n      hashedMessage,\n      signature\n    ]);\n    return {\n      isValid: res === EIP1271_MAGICVALUE,\n      siweMessageData\n    };\n  } catch (error) {\n    console.log(error);\n    throw new Error(\"Signature verification failed\");\n  }\n};\n\n// types/commands.ts\nvar Command = /* @__PURE__ */ ((Command2) => {\n  Command2[\"Verify\"] = \"verify\";\n  Command2[\"Pay\"] = \"pay\";\n  Command2[\"WalletAuth\"] = \"wallet-auth\";\n  Command2[\"SendTransaction\"] = \"send-transaction\";\n  Command2[\"SignMessage\"] = \"sign-message\";\n  Command2[\"SignTypedData\"] = \"sign-typed-data\";\n  Command2[\"ShareContacts\"] = \"share-contacts\";\n  Command2[\"RequestPermission\"] = \"request-permission\";\n  Command2[\"GetPermissions\"] = \"get-permissions\";\n  Command2[\"SendHapticFeedback\"] = \"send-haptic-feedback\";\n  Command2[\"Share\"] = \"share\";\n  Command2[\"Chat\"] = \"chat\";\n  return Command2;\n})(Command || {});\nvar Permission = /* @__PURE__ */ ((Permission2) => {\n  Permission2[\"Notifications\"] = \"notifications\";\n  Permission2[\"Contacts\"] = \"contacts\";\n  Permission2[\"Microphone\"] = \"microphone\";\n  return Permission2;\n})(Permission || {});\n\n// types/init.ts\nvar MiniAppLaunchLocation = /* @__PURE__ */ ((MiniAppLaunchLocation3) => {\n  MiniAppLaunchLocation3[\"Chat\"] = \"chat\";\n  MiniAppLaunchLocation3[\"Home\"] = \"home\";\n  MiniAppLaunchLocation3[\"AppStore\"] = \"app-store\";\n  MiniAppLaunchLocation3[\"DeepLink\"] = \"deep-link\";\n  MiniAppLaunchLocation3[\"WalletTab\"] = \"wallet-tab\";\n  return MiniAppLaunchLocation3;\n})(MiniAppLaunchLocation || {});\nvar WORLD_APP_LAUNCH_LOCATION_MAP = {\n  \"app-store\": \"app-store\" /* AppStore */,\n  carousel: \"app-store\" /* AppStore */,\n  explore: \"app-store\" /* AppStore */,\n  app_details: \"app-store\" /* AppStore */,\n  deeplink: \"deep-link\" /* DeepLink */,\n  homepage: \"home\" /* Home */,\n  wallet_tab: \"wallet-tab\" /* WalletTab */,\n  world_chat: \"chat\" /* Chat */\n};\nvar mapWorldAppLaunchLocation = (location) => {\n  if (!location || typeof location !== \"string\") return null;\n  console.log(\"MiniKit launch location mapped:\", location);\n  const normalizedLocation = location.toLowerCase();\n  return WORLD_APP_LAUNCH_LOCATION_MAP[normalizedLocation] ?? null;\n};\n\n// minikit.ts\n\n\n\n// helpers/send-webview-event.ts\nvar sendWebviewEvent = (payload) => {\n  if (window.webkit) {\n    window.webkit?.messageHandlers?.minikit?.postMessage?.(payload);\n  } else if (window.Android) {\n    window.Android.postMessage?.(JSON.stringify(payload));\n  }\n};\n\n// helpers/microphone/index.ts\nvar microphoneSetupDone = false;\nvar setupMicrophone = () => {\n  if (microphoneSetupDone) {\n    return;\n  }\n  if (typeof navigator !== \"undefined\" && !navigator.mediaDevices?.getUserMedia)\n    return;\n  const originalStop = MediaStreamTrack.prototype.stop;\n  MediaStreamTrack.prototype.stop = function() {\n    originalStop.call(this);\n    if (this.readyState === \"ended\") {\n      setTimeout(() => this.dispatchEvent(new Event(\"ended\")), 0);\n    }\n  };\n  const realGUM = navigator.mediaDevices.getUserMedia.bind(\n    navigator.mediaDevices\n  );\n  const live = /* @__PURE__ */ new Set();\n  async function wrapped(constraints) {\n    const stream = await realGUM(constraints);\n    const hasAudioTrack = stream.getAudioTracks().length > 0;\n    if (hasAudioTrack) {\n      sendWebviewEvent({\n        command: \"microphone-stream-started\",\n        version: 1,\n        payload: {\n          streamId: stream.id\n        }\n      });\n      live.add(stream);\n      stream.getAudioTracks().forEach((t) => {\n        t.addEventListener(\"ended\", () => {\n          const allAudioTracksEnded = stream.getAudioTracks().every((track) => track.readyState === \"ended\");\n          if (allAudioTracksEnded) {\n            sendWebviewEvent({\n              command: \"microphone-stream-ended\",\n              version: 1,\n              payload: {\n                streamId: stream.id\n              }\n            });\n            live.delete(stream);\n          }\n        });\n      });\n    }\n    return stream;\n  }\n  Object.defineProperty(navigator.mediaDevices, \"getUserMedia\", {\n    value: wrapped,\n    writable: false,\n    configurable: false,\n    enumerable: true\n  });\n  Object.freeze(navigator.mediaDevices);\n  const stopAllMiniAppMicrophoneStreams = () => {\n    live.forEach((s) => {\n      const audioTracks = s.getAudioTracks();\n      if (audioTracks.length > 0) {\n        audioTracks.forEach((t) => {\n          t.stop();\n        });\n        sendWebviewEvent({\n          command: \"microphone-stream-ended\",\n          version: 1,\n          payload: {\n            streamId: s.id\n          }\n        });\n      }\n    });\n    live.clear();\n  };\n  MiniKit.subscribe(\"miniapp-microphone\" /* MiniAppMicrophone */, (payload) => {\n    if (payload.status === \"error\" && (payload.error_code === \"mini_app_permission_not_enabled\" /* MiniAppPermissionNotEnabled */ || payload.error_code === \"world_app_permission_not_enabled\" /* WorldAppPermissionNotEnabled */)) {\n      console.log(\"stopping all microphone streams\", payload);\n      stopAllMiniAppMicrophoneStreams();\n    }\n  });\n  window.__stopAllMiniAppMicrophoneStreams = stopAllMiniAppMicrophoneStreams;\n  microphoneSetupDone = true;\n};\n\n// helpers/proof/index.ts\n\n\nvar semaphoreVerifierAddress = \"0x79f46b94d134109EbcbbddBAeD0E88790409A0e4\";\nvar semaphoreVerifierAbi = [\n  {\n    inputs: [\n      {\n        internalType: \"uint256[8]\",\n        name: \"proof\",\n        type: \"uint256[8]\"\n      }\n    ],\n    name: \"compressProof\",\n    outputs: [\n      {\n        internalType: \"uint256[4]\",\n        name: \"compressed\",\n        type: \"uint256[4]\"\n      }\n    ],\n    stateMutability: \"view\",\n    type: \"function\"\n  }\n];\nvar compressAndPadProof = async (proof, rpcUrl) => {\n  try {\n    const publicClient = (0,viem__WEBPACK_IMPORTED_MODULE_1__.createPublicClient)({\n      chain: viem_chains__WEBPACK_IMPORTED_MODULE_2__.worldchain,\n      transport: (0,viem__WEBPACK_IMPORTED_MODULE_3__.http)(\n        rpcUrl || \"https://worldchain-mainnet.g.alchemy.com/public\"\n      )\n    });\n    const decodedProof = (0,viem__WEBPACK_IMPORTED_MODULE_8__.decodeAbiParameters)(\n      [{ type: \"uint256[8]\" }],\n      proof\n    )[0];\n    const compressedProof = await publicClient.readContract({\n      address: semaphoreVerifierAddress,\n      abi: semaphoreVerifierAbi,\n      functionName: \"compressProof\",\n      args: [decodedProof]\n    });\n    const paddedProof = [...compressedProof, 0n, 0n, 0n, 0n];\n    return (0,viem__WEBPACK_IMPORTED_MODULE_9__.encodeAbiParameters)([{ type: \"uint256[8]\" }], [paddedProof]);\n  } catch (e) {\n    return proof;\n  }\n};\n\n// helpers/share/index.ts\nvar MAX_FILES = 10;\nvar MAX_TOTAL_SIZE_MB = 50;\nvar MAX_TOTAL_SIZE_BYTES = MAX_TOTAL_SIZE_MB * 1024 * 1024;\nvar processFile = async (file) => {\n  const buffer = await file.arrayBuffer();\n  const uint8Array = new Uint8Array(buffer);\n  let binaryString = \"\";\n  const K_CHUNK_SIZE = 32768;\n  for (let i = 0; i < uint8Array.length; i += K_CHUNK_SIZE) {\n    const chunk = uint8Array.subarray(\n      i,\n      Math.min(i + K_CHUNK_SIZE, uint8Array.length)\n    );\n    binaryString += String.fromCharCode.apply(\n      null,\n      Array.from(chunk)\n      // Convert Uint8Array chunk to number[]\n    );\n  }\n  const base64Data = btoa(binaryString);\n  return {\n    name: file.name,\n    type: file.type,\n    data: base64Data\n  };\n};\nvar formatShareInput = async (input) => {\n  if (!input.files) {\n    return {\n      title: input.title,\n      text: input.text,\n      url: input.url\n    };\n  }\n  if (!Array.isArray(input.files)) {\n    throw new Error('The \"files\" property must be an array.');\n  }\n  if (input.files.length === 0) {\n  } else {\n    if (input.files.length > MAX_FILES) {\n      throw new Error(`Cannot share more than ${MAX_FILES} files.`);\n    }\n    let totalSize = 0;\n    for (const file of input.files) {\n      if (!(file instanceof File)) {\n        throw new Error(\n          `Each item in the 'files' array must be a File object. Received: ${typeof file}`\n        );\n      }\n      totalSize += file.size;\n    }\n    if (totalSize > MAX_TOTAL_SIZE_BYTES) {\n      throw new Error(`Total file size cannot exceed ${MAX_TOTAL_SIZE_MB}MB.`);\n    }\n  }\n  const fileProcessingPromises = input.files.map((file) => processFile(file));\n  const processedFiles = await Promise.all(fileProcessingPromises);\n  return {\n    files: processedFiles,\n    title: input.title,\n    text: input.text,\n    url: input.url\n  };\n};\n\n// helpers/siwe/validate-wallet-auth-command-input.ts\nvar validateWalletAuthCommandInput = (params) => {\n  if (!params.nonce) {\n    return { valid: false, message: \"'nonce' is required\" };\n  }\n  if (params.nonce.length < 8) {\n    return { valid: false, message: \"'nonce' must be at least 8 characters\" };\n  }\n  if (params.statement && params.statement.includes(\"\\n\")) {\n    return { valid: false, message: \"'statement' must not contain newlines\" };\n  }\n  if (params.expirationTime && new Date(params.expirationTime) < /* @__PURE__ */ new Date()) {\n    return { valid: false, message: \"'expirationTime' must be in the future\" };\n  }\n  if (params.expirationTime && new Date(params.expirationTime) > new Date(Date.now() + 7 * 24 * 60 * 60 * 1e3)) {\n    return { valid: false, message: \"'expirationTime' must be within 7 days\" };\n  }\n  if (params.notBefore && new Date(params.notBefore) > new Date(Date.now() + 7 * 24 * 60 * 60 * 1e3)) {\n    return { valid: false, message: \"'notBefore' must be within 7 days\" };\n  }\n  return { valid: true };\n};\n\n// helpers/transaction/validate-payload.ts\nvar isValidHex = (str) => {\n  return /^0x[0-9A-Fa-f]+$/.test(str);\n};\nvar objectValuesToArrayRecursive = (input) => {\n  if (input === null || typeof input !== \"object\") {\n    return input;\n  }\n  if (Array.isArray(input)) {\n    return input.map((item) => objectValuesToArrayRecursive(item));\n  }\n  const values = Object.values(input);\n  return values.map((value) => objectValuesToArrayRecursive(value));\n};\nvar processPayload = (payload) => {\n  if (typeof payload === \"boolean\" || typeof payload === \"string\" || payload === null || payload === void 0) {\n    return payload;\n  }\n  if (typeof payload === \"number\" || typeof payload === \"bigint\") {\n    return String(payload);\n  }\n  if (Array.isArray(payload)) {\n    return payload.map((value) => processPayload(value));\n  }\n  if (typeof payload === \"object\") {\n    const result = { ...payload };\n    if (\"value\" in result && result.value !== void 0) {\n      if (typeof result.value !== \"string\") {\n        result.value = String(result.value);\n      }\n      if (!isValidHex(result.value)) {\n        console.error(\n          \"Transaction value must be a valid hex string\",\n          result.value\n        );\n        throw new Error(\n          `Transaction value must be a valid hex string: ${result.value}`\n        );\n      }\n    }\n    for (const key in result) {\n      if (Object.prototype.hasOwnProperty.call(result, key)) {\n        result[key] = processPayload(result[key]);\n      }\n    }\n    return result;\n  }\n  return payload;\n};\nvar validateSendTransactionPayload = (payload) => {\n  if (payload.formatPayload) {\n    const formattedPayload = processPayload(payload);\n    formattedPayload.transaction = formattedPayload.transaction.map((tx) => {\n      const args = objectValuesToArrayRecursive(tx.args);\n      return {\n        ...tx,\n        args\n      };\n    });\n    return formattedPayload;\n  }\n  return payload;\n};\n\n// helpers/usernames/index.ts\nvar getUserProfile = async (address) => {\n  const res = await fetch(\"https://usernames.worldcoin.org/api/v1/query\", {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify({\n      addresses: [address]\n    })\n  });\n  const usernames = await res.json();\n  return usernames?.[0] ?? { username: null, profile_picture_url: null };\n};\n\n// minikit.ts\nvar sendMiniKitEvent = (payload) => {\n  sendWebviewEvent(payload);\n};\nvar _MiniKit = class _MiniKit {\n  static sendInit() {\n    sendWebviewEvent({\n      command: \"init\",\n      payload: {\n        version: this.MINIKIT_VERSION,\n        minorVersion: this.MINIKIT_MINOR_VERSION\n      }\n    });\n  }\n  static subscribe(event, handler) {\n    if (event === \"miniapp-wallet-auth\" /* MiniAppWalletAuth */) {\n      const originalHandler = handler;\n      const wrappedHandler = async (payload) => {\n        if (payload.status === \"success\") {\n          _MiniKit.user.walletAddress = payload.address;\n          try {\n            const user = await _MiniKit.getUserByAddress(payload.address);\n            _MiniKit.user = { ..._MiniKit.user, ...user };\n          } catch (error) {\n            console.error(\"Failed to fetch user profile:\", error);\n          }\n        }\n        originalHandler(payload);\n      };\n      this.listeners[event] = wrappedHandler;\n    } else if (event === \"miniapp-verify-action\" /* MiniAppVerifyAction */) {\n      const originalHandler = handler;\n      const wrappedHandler = (payload) => {\n        if (payload.status === \"error\" && payload.error_code == \"user_rejected\") {\n          payload.error_code = _worldcoin_idkit_core__WEBPACK_IMPORTED_MODULE_0__.AppErrorCodes.VerificationRejected;\n        }\n        if (payload.status === \"success\" && payload.verification_level === _worldcoin_idkit_core__WEBPACK_IMPORTED_MODULE_0__.VerificationLevel.Orb) {\n          compressAndPadProof(payload.proof).then(\n            (compressedProof) => {\n              payload.proof = compressedProof;\n              originalHandler(payload);\n            }\n          );\n        } else {\n          originalHandler(payload);\n        }\n      };\n      this.listeners[event] = wrappedHandler;\n    } else {\n      this.listeners[event] = handler;\n    }\n  }\n  static unsubscribe(event) {\n    delete this.listeners[event];\n  }\n  static trigger(event, payload) {\n    if (!this.listeners[event]) {\n      console.error(\n        `No handler for event ${event}, payload: ${JSON.stringify(payload)}`\n      );\n      return;\n    }\n    this.listeners[event](payload);\n  }\n  static async awaitCommand(event, command, executor) {\n    return new Promise((resolve) => {\n      let commandPayload = null;\n      const handleAndUnsubscribe = (payload) => {\n        this.unsubscribe(event);\n        resolve({ commandPayload, finalPayload: payload });\n      };\n      this.subscribe(event, handleAndUnsubscribe);\n      commandPayload = executor();\n    });\n  }\n  static commandsValid(worldAppSupportedCommands) {\n    let allCommandsValid = true;\n    Object.entries(this.miniKitCommandVersion).forEach(\n      ([minikitCommandName, version]) => {\n        const commandInput = worldAppSupportedCommands.find(\n          (command) => command.name === minikitCommandName\n        );\n        let isCommandValid = false;\n        if (!commandInput) {\n          console.warn(\n            `Command ${minikitCommandName} is not supported by the app. Try updating the app version`\n          );\n        } else {\n          if (commandInput.supported_versions.includes(version)) {\n            _MiniKit.isCommandAvailable[minikitCommandName] = true;\n            isCommandValid = true;\n          } else {\n            isCommandValid = true;\n            console.warn(\n              `Command ${minikitCommandName} version ${version} is not supported by the app. Supported versions: ${commandInput.supported_versions.join(\", \")}. This is not an error, but it is recommended to update the World App version.`\n            );\n            _MiniKit.isCommandAvailable[minikitCommandName] = isCommandValid;\n          }\n        }\n        if (!isCommandValid) {\n          allCommandsValid = false;\n        }\n      }\n    );\n    return allCommandsValid;\n  }\n  static install(appId) {\n    if (typeof window === \"undefined\" || Boolean(window.MiniKit)) {\n      return {\n        success: false,\n        errorCode: \"already_installed\" /* AlreadyInstalled */,\n        errorMessage: MiniKitInstallErrorMessage[\"already_installed\" /* AlreadyInstalled */]\n      };\n    }\n    if (!appId) {\n      console.warn(\"App ID not provided during install\");\n    } else {\n      _MiniKit.appId = appId;\n    }\n    if (!window.WorldApp) {\n      return {\n        success: false,\n        errorCode: \"outside_of_worldapp\" /* OutsideOfWorldApp */,\n        errorMessage: MiniKitInstallErrorMessage[\"outside_of_worldapp\" /* OutsideOfWorldApp */]\n      };\n    }\n    _MiniKit.user.optedIntoOptionalAnalytics = window.WorldApp.is_optional_analytics;\n    _MiniKit.user.deviceOS = window.WorldApp.device_os;\n    _MiniKit.user.worldAppVersion = window.WorldApp.world_app_version;\n    _MiniKit.deviceProperties.safeAreaInsets = window.WorldApp.safe_area_insets;\n    _MiniKit.deviceProperties.deviceOS = window.WorldApp.device_os;\n    _MiniKit.deviceProperties.worldAppVersion = window.WorldApp.world_app_version;\n    _MiniKit.location = mapWorldAppLaunchLocation(window.WorldApp.location);\n    try {\n      window.MiniKit = _MiniKit;\n      this.sendInit();\n    } catch (error) {\n      console.error(\n        MiniKitInstallErrorMessage[\"unknown\" /* Unknown */],\n        error\n      );\n      return {\n        success: false,\n        errorCode: \"unknown\" /* Unknown */,\n        errorMessage: MiniKitInstallErrorMessage[\"unknown\" /* Unknown */]\n      };\n    }\n    _MiniKit.isReady = true;\n    setupMicrophone();\n    if (!this.commandsValid(window.WorldApp.supported_commands)) {\n      return {\n        success: false,\n        errorCode: \"app_out_of_date\" /* AppOutOfDate */,\n        errorMessage: MiniKitInstallErrorMessage[\"app_out_of_date\" /* AppOutOfDate */]\n      };\n    }\n    return { success: true };\n  }\n  static isInstalled(debug) {\n    const isInstalled = _MiniKit.isReady && Boolean(window.MiniKit);\n    if (!isInstalled)\n      console.error(\n        \"MiniKit is not installed. Make sure you're running the application inside of World App\"\n      );\n    if (debug && isInstalled) console.log(\"MiniKit is alive!\");\n    return isInstalled;\n  }\n};\n_MiniKit.MINIKIT_VERSION = 1;\n_MiniKit.MINIKIT_MINOR_VERSION = 96;\n_MiniKit.miniKitCommandVersion = {\n  [\"verify\" /* Verify */]: 1,\n  [\"pay\" /* Pay */]: 1,\n  [\"wallet-auth\" /* WalletAuth */]: 2,\n  [\"send-transaction\" /* SendTransaction */]: 1,\n  [\"sign-message\" /* SignMessage */]: 1,\n  [\"sign-typed-data\" /* SignTypedData */]: 1,\n  [\"share-contacts\" /* ShareContacts */]: 1,\n  [\"request-permission\" /* RequestPermission */]: 1,\n  [\"get-permissions\" /* GetPermissions */]: 1,\n  [\"send-haptic-feedback\" /* SendHapticFeedback */]: 1,\n  [\"share\" /* Share */]: 1,\n  [\"chat\" /* Chat */]: 1\n};\n_MiniKit.isCommandAvailable = {\n  [\"verify\" /* Verify */]: false,\n  [\"pay\" /* Pay */]: false,\n  [\"wallet-auth\" /* WalletAuth */]: false,\n  [\"send-transaction\" /* SendTransaction */]: false,\n  [\"sign-message\" /* SignMessage */]: false,\n  [\"sign-typed-data\" /* SignTypedData */]: false,\n  [\"share-contacts\" /* ShareContacts */]: false,\n  [\"request-permission\" /* RequestPermission */]: false,\n  [\"get-permissions\" /* GetPermissions */]: false,\n  [\"send-haptic-feedback\" /* SendHapticFeedback */]: false,\n  [\"share\" /* Share */]: false,\n  [\"chat\" /* Chat */]: false\n};\n_MiniKit.listeners = {\n  [\"miniapp-verify-action\" /* MiniAppVerifyAction */]: () => {\n  },\n  [\"miniapp-payment\" /* MiniAppPayment */]: () => {\n  },\n  [\"miniapp-wallet-auth\" /* MiniAppWalletAuth */]: () => {\n  },\n  [\"miniapp-send-transaction\" /* MiniAppSendTransaction */]: () => {\n  },\n  [\"miniapp-sign-message\" /* MiniAppSignMessage */]: () => {\n  },\n  [\"miniapp-sign-typed-data\" /* MiniAppSignTypedData */]: () => {\n  },\n  [\"miniapp-share-contacts\" /* MiniAppShareContacts */]: () => {\n  },\n  [\"miniapp-request-permission\" /* MiniAppRequestPermission */]: () => {\n  },\n  [\"miniapp-get-permissions\" /* MiniAppGetPermissions */]: () => {\n  },\n  [\"miniapp-send-haptic-feedback\" /* MiniAppSendHapticFeedback */]: () => {\n  },\n  [\"miniapp-share\" /* MiniAppShare */]: () => {\n  },\n  [\"miniapp-microphone\" /* MiniAppMicrophone */]: () => {\n  },\n  [\"miniapp-chat\" /* MiniAppChat */]: () => {\n  }\n};\n_MiniKit.appId = null;\n_MiniKit.user = {};\n_MiniKit.deviceProperties = {};\n_MiniKit.location = null;\n_MiniKit.isReady = false;\n_MiniKit.getUserByAddress = async (address) => {\n  const userProfile = await getUserProfile(\n    address ?? _MiniKit.user.walletAddress\n  );\n  return {\n    walletAddress: address ?? _MiniKit.user.walletAddress,\n    username: userProfile.username,\n    profilePictureUrl: userProfile.profile_picture_url\n  };\n};\n_MiniKit.getUserByUsername = async (username) => {\n  const res = await fetch(\n    `https://usernames.worldcoin.org/api/v1/${username}`,\n    {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    }\n  );\n  const user = await res.json();\n  return {\n    walletAddress: user.address,\n    username: user.username,\n    profilePictureUrl: user.profile_picture_url\n  };\n};\n// This is a helper function for developers to generate MiniApp URLs\n_MiniKit.getMiniAppUrl = (appId, path) => {\n  const baseUrl = new URL(\"https://world.org/mini-app\");\n  baseUrl.searchParams.append(\"app_id\", appId);\n  if (path) {\n    const fullPath = path.startsWith(\"/\") ? path : `/${path}`;\n    baseUrl.searchParams.append(\"path\", encodeURIComponent(fullPath));\n  }\n  return baseUrl.toString();\n};\n// Opens the profile card for a given username or wallet address\n_MiniKit.showProfileCard = (username, walletAddress) => {\n  if (!username && !walletAddress) {\n    console.error(\n      \"Either username or walletAddress must be provided to show profile card\"\n    );\n    return;\n  }\n  if (username) {\n    window.open(\n      `worldapp://profile?username=${encodeURIComponent(username)}`\n    );\n    return;\n  } else {\n    window.open(\n      `worldapp://profile?address=${encodeURIComponent(walletAddress || \"\")}`\n    );\n  }\n};\n// Simply re-exporting the existing function\n_MiniKit.getUserInfo = _MiniKit.getUserByAddress;\n_MiniKit.commands = {\n  verify: (payload) => {\n    if (typeof window === \"undefined\" || !_MiniKit.isCommandAvailable[\"verify\" /* Verify */]) {\n      console.error(\n        \"'verify' command is unavailable. Check MiniKit.install() or update the app version\"\n      );\n      return null;\n    }\n    const timestamp = (/* @__PURE__ */ new Date()).toISOString();\n    const eventPayload = {\n      action: (0,_worldcoin_idkit_core_hashing__WEBPACK_IMPORTED_MODULE_7__.encodeAction)(payload.action),\n      signal: (0,_worldcoin_idkit_core_hashing__WEBPACK_IMPORTED_MODULE_7__.generateSignal)(payload.signal).digest,\n      verification_level: payload.verification_level || _worldcoin_idkit_core__WEBPACK_IMPORTED_MODULE_0__.VerificationLevel.Orb,\n      timestamp\n    };\n    sendMiniKitEvent({\n      command: \"verify\" /* Verify */,\n      version: _MiniKit.miniKitCommandVersion[\"verify\" /* Verify */],\n      payload: eventPayload\n    });\n    return eventPayload;\n  },\n  pay: (payload) => {\n    if (typeof window === \"undefined\" || !_MiniKit.isCommandAvailable[\"pay\" /* Pay */]) {\n      console.error(\n        \"'pay' command is unavailable. Check MiniKit.install() or update the app version\"\n      );\n      return null;\n    }\n    if (!validatePaymentPayload(payload)) {\n      return null;\n    }\n    const eventPayload = {\n      ...payload,\n      network: \"worldchain\" /* WorldChain */\n    };\n    sendMiniKitEvent({\n      command: \"pay\" /* Pay */,\n      version: _MiniKit.miniKitCommandVersion[\"pay\" /* Pay */],\n      payload: eventPayload\n    });\n    return eventPayload;\n  },\n  walletAuth: (payload) => {\n    if (typeof window === \"undefined\" || !_MiniKit.isCommandAvailable[\"wallet-auth\" /* WalletAuth */]) {\n      console.error(\n        \"'walletAuth' command is unavailable. Check MiniKit.install() or update the app version\"\n      );\n      return null;\n    }\n    const validationResult = validateWalletAuthCommandInput(payload);\n    if (!validationResult.valid) {\n      console.error(\n        \"Failed to validate wallet auth input:\\n\\n -->\",\n        validationResult.message\n      );\n      return null;\n    }\n    let protocol = null;\n    try {\n      const currentUrl = new URL(window.location.href);\n      protocol = currentUrl.protocol.split(\":\")[0];\n    } catch (error) {\n      console.error(\"Failed to get current URL\", error);\n      return null;\n    }\n    const siweMessage = generateSiweMessage({\n      scheme: protocol,\n      domain: window.location.host,\n      statement: payload.statement ?? void 0,\n      uri: window.location.href,\n      version: \"1\",\n      chain_id: 480,\n      nonce: payload.nonce,\n      issued_at: (/* @__PURE__ */ new Date()).toISOString(),\n      expiration_time: payload.expirationTime?.toISOString() ?? void 0,\n      not_before: payload.notBefore?.toISOString() ?? void 0,\n      request_id: payload.requestId ?? void 0\n    });\n    const walletAuthPayload = { siweMessage };\n    const walletAuthVersion = _MiniKit.user.worldAppVersion && _MiniKit.user.worldAppVersion > 2087900 ? _MiniKit.miniKitCommandVersion[\"wallet-auth\" /* WalletAuth */] : 1;\n    sendMiniKitEvent({\n      command: \"wallet-auth\" /* WalletAuth */,\n      version: walletAuthVersion,\n      payload: walletAuthPayload\n    });\n    return walletAuthPayload;\n  },\n  sendTransaction: (payload) => {\n    if (typeof window === \"undefined\" || !_MiniKit.isCommandAvailable[\"send-transaction\" /* SendTransaction */]) {\n      console.error(\n        \"'sendTransaction' command is unavailable. Check MiniKit.install() or update the app version\"\n      );\n      return null;\n    }\n    payload.formatPayload = payload.formatPayload !== false;\n    const validatedPayload = validateSendTransactionPayload(payload);\n    sendMiniKitEvent({\n      command: \"send-transaction\" /* SendTransaction */,\n      version: _MiniKit.miniKitCommandVersion[\"send-transaction\" /* SendTransaction */],\n      payload: validatedPayload\n    });\n    return validatedPayload;\n  },\n  signMessage: (payload) => {\n    if (typeof window === \"undefined\" || !_MiniKit.isCommandAvailable[\"sign-message\" /* SignMessage */]) {\n      console.error(\n        \"'signMessage' command is unavailable. Check MiniKit.install() or update the app version\"\n      );\n      return null;\n    }\n    sendMiniKitEvent({\n      command: \"sign-message\" /* SignMessage */,\n      version: _MiniKit.miniKitCommandVersion[\"sign-message\" /* SignMessage */],\n      payload\n    });\n    return payload;\n  },\n  signTypedData: (payload) => {\n    if (typeof window === \"undefined\" || !_MiniKit.isCommandAvailable[\"sign-typed-data\" /* SignTypedData */]) {\n      console.error(\n        \"'signTypedData' command is unavailable. Check MiniKit.install() or update the app version\"\n      );\n      return null;\n    }\n    if (!payload.chainId) {\n      payload.chainId = 480;\n    }\n    sendMiniKitEvent({\n      command: \"sign-typed-data\" /* SignTypedData */,\n      version: _MiniKit.miniKitCommandVersion[\"sign-typed-data\" /* SignTypedData */],\n      payload\n    });\n    return payload;\n  },\n  shareContacts: (payload) => {\n    if (typeof window === \"undefined\" || !_MiniKit.isCommandAvailable[\"share-contacts\" /* ShareContacts */]) {\n      console.error(\n        \"'shareContacts' command is unavailable. Check MiniKit.install() or update the app version\"\n      );\n      return null;\n    }\n    sendMiniKitEvent({\n      command: \"share-contacts\" /* ShareContacts */,\n      version: _MiniKit.miniKitCommandVersion[\"share-contacts\" /* ShareContacts */],\n      payload\n    });\n    return payload;\n  },\n  requestPermission: (payload) => {\n    if (typeof window === \"undefined\" || !_MiniKit.isCommandAvailable[\"request-permission\" /* RequestPermission */]) {\n      console.error(\n        \"'requestPermission' command is unavailable. Check MiniKit.install() or update the app version\"\n      );\n      return null;\n    }\n    sendMiniKitEvent({\n      command: \"request-permission\" /* RequestPermission */,\n      version: _MiniKit.miniKitCommandVersion[\"request-permission\" /* RequestPermission */],\n      payload\n    });\n    return payload;\n  },\n  getPermissions: () => {\n    if (typeof window === \"undefined\" || !_MiniKit.isCommandAvailable[\"get-permissions\" /* GetPermissions */]) {\n      console.error(\n        \"'getPermissions' command is unavailable. Check MiniKit.install() or update the app version\"\n      );\n      return null;\n    }\n    sendMiniKitEvent({\n      command: \"get-permissions\" /* GetPermissions */,\n      version: _MiniKit.miniKitCommandVersion[\"get-permissions\" /* GetPermissions */],\n      payload: {}\n    });\n    return {\n      status: \"sent\"\n    };\n  },\n  sendHapticFeedback: (payload) => {\n    if (typeof window === \"undefined\" || !_MiniKit.isCommandAvailable[\"send-haptic-feedback\" /* SendHapticFeedback */]) {\n      console.error(\n        \"'sendHapticFeedback' command is unavailable. Check MiniKit.install() or update the app version\"\n      );\n      return null;\n    }\n    sendMiniKitEvent({\n      command: \"send-haptic-feedback\" /* SendHapticFeedback */,\n      version: _MiniKit.miniKitCommandVersion[\"send-haptic-feedback\" /* SendHapticFeedback */],\n      payload\n    });\n    return payload;\n  },\n  // We return share input here because the payload is formatted asynchronously\n  share: (payload) => {\n    if (typeof window === \"undefined\" || !_MiniKit.isCommandAvailable[\"share\" /* Share */]) {\n      console.error(\n        \"'share' command is unavailable. Check MiniKit.install() or update the app version\"\n      );\n      return null;\n    }\n    if (_MiniKit.deviceProperties.deviceOS === \"ios\" && typeof navigator !== \"undefined\") {\n      sendMiniKitEvent({\n        command: \"share\" /* Share */,\n        version: _MiniKit.miniKitCommandVersion[\"share\" /* Share */],\n        payload\n      });\n      navigator.share(payload);\n    } else {\n      formatShareInput(payload).then((formattedResult) => {\n        sendMiniKitEvent({\n          command: \"share\" /* Share */,\n          version: _MiniKit.miniKitCommandVersion[\"share\" /* Share */],\n          payload: formattedResult\n        });\n      }).catch((error) => {\n        console.error(\"Failed to format share input\", error);\n      });\n      _MiniKit.subscribe(\"miniapp-share\" /* MiniAppShare */, (payload2) => {\n        console.log(\"Share Response\", payload2);\n      });\n    }\n    return payload;\n  },\n  chat: (payload) => {\n    if (typeof window === \"undefined\" || !_MiniKit.isCommandAvailable[\"chat\" /* Chat */]) {\n      console.error(\n        \"'chat' command is unavailable. Check MiniKit.install() or update the app version\"\n      );\n      return null;\n    }\n    if (payload.message.length === 0) {\n      console.error(\"'chat' command requires a non-empty message\");\n      return null;\n    }\n    sendMiniKitEvent({\n      command: \"chat\" /* Chat */,\n      version: _MiniKit.miniKitCommandVersion[\"chat\" /* Chat */],\n      payload\n    });\n    return payload;\n  }\n};\n/**\n * This object contains async versions of all the commands.\n * Instead of using event listeners, you can just `await` these.\n *\n * They return a standardized object\n *\n * commandPayload - object returned by the command function\n *\n * finalPayload - object returned by the event listener, or in other words, WorldApp response\n */\n_MiniKit.commandsAsync = {\n  verify: async (payload) => {\n    return new Promise(async (resolve, reject) => {\n      try {\n        const response = await _MiniKit.awaitCommand(\n          \"miniapp-verify-action\" /* MiniAppVerifyAction */,\n          \"verify\" /* Verify */,\n          () => _MiniKit.commands.verify(payload)\n        );\n        if (response.finalPayload.status === \"success\" && response.finalPayload.verification_level === _worldcoin_idkit_core__WEBPACK_IMPORTED_MODULE_0__.VerificationLevel.Orb) {\n          response.finalPayload.proof = await compressAndPadProof(\n            response.finalPayload.proof\n          );\n        }\n        resolve(response);\n      } catch (error) {\n        reject(error);\n      }\n    });\n  },\n  pay: async (payload) => {\n    return new Promise(async (resolve, reject) => {\n      try {\n        const response = await _MiniKit.awaitCommand(\n          \"miniapp-payment\" /* MiniAppPayment */,\n          \"pay\" /* Pay */,\n          () => _MiniKit.commands.pay(payload)\n        );\n        resolve(response);\n      } catch (error) {\n        reject(error);\n      }\n    });\n  },\n  walletAuth: async (payload) => {\n    return new Promise(async (resolve, reject) => {\n      try {\n        const response = await _MiniKit.awaitCommand(\n          \"miniapp-wallet-auth\" /* MiniAppWalletAuth */,\n          \"wallet-auth\" /* WalletAuth */,\n          () => _MiniKit.commands.walletAuth(payload)\n        );\n        return resolve(response);\n      } catch (error) {\n        reject(error);\n      }\n    });\n  },\n  sendTransaction: async (payload) => {\n    return new Promise(async (resolve, reject) => {\n      try {\n        const response = await _MiniKit.awaitCommand(\n          \"miniapp-send-transaction\" /* MiniAppSendTransaction */,\n          \"send-transaction\" /* SendTransaction */,\n          () => _MiniKit.commands.sendTransaction(payload)\n        );\n        return resolve(response);\n      } catch (error) {\n        reject(error);\n      }\n    });\n  },\n  signMessage: async (payload) => {\n    return new Promise(async (resolve, reject) => {\n      try {\n        const response = await _MiniKit.awaitCommand(\n          \"miniapp-sign-message\" /* MiniAppSignMessage */,\n          \"sign-message\" /* SignMessage */,\n          () => _MiniKit.commands.signMessage(payload)\n        );\n        return resolve(response);\n      } catch (error) {\n        reject(error);\n      }\n    });\n  },\n  signTypedData: async (payload) => {\n    return new Promise(async (resolve, reject) => {\n      try {\n        const response = await _MiniKit.awaitCommand(\n          \"miniapp-sign-typed-data\" /* MiniAppSignTypedData */,\n          \"sign-typed-data\" /* SignTypedData */,\n          () => _MiniKit.commands.signTypedData(payload)\n        );\n        return resolve(response);\n      } catch (error) {\n        reject(error);\n      }\n    });\n  },\n  shareContacts: async (payload) => {\n    return new Promise(async (resolve, reject) => {\n      try {\n        const response = await _MiniKit.awaitCommand(\n          \"miniapp-share-contacts\" /* MiniAppShareContacts */,\n          \"share-contacts\" /* ShareContacts */,\n          () => _MiniKit.commands.shareContacts(payload)\n        );\n        return resolve(response);\n      } catch (error) {\n        reject(error);\n      }\n    });\n  },\n  requestPermission: async (payload) => {\n    return new Promise(async (resolve, reject) => {\n      try {\n        const response = await _MiniKit.awaitCommand(\n          \"miniapp-request-permission\" /* MiniAppRequestPermission */,\n          \"request-permission\" /* RequestPermission */,\n          () => _MiniKit.commands.requestPermission(payload)\n        );\n        resolve(response);\n      } catch (error) {\n        reject(error);\n      }\n    });\n  },\n  getPermissions: async () => {\n    return new Promise(async (resolve, reject) => {\n      try {\n        const response = await _MiniKit.awaitCommand(\n          \"miniapp-get-permissions\" /* MiniAppGetPermissions */,\n          \"get-permissions\" /* GetPermissions */,\n          () => _MiniKit.commands.getPermissions()\n        );\n        resolve(response);\n      } catch (error) {\n        reject(error);\n      }\n    });\n  },\n  sendHapticFeedback: async (payload) => {\n    return new Promise(async (resolve, reject) => {\n      try {\n        const response = await _MiniKit.awaitCommand(\n          \"miniapp-send-haptic-feedback\" /* MiniAppSendHapticFeedback */,\n          \"send-haptic-feedback\" /* SendHapticFeedback */,\n          () => _MiniKit.commands.sendHapticFeedback(payload)\n        );\n        resolve(response);\n      } catch (error) {\n        reject(error);\n      }\n    });\n  },\n  share: async (payload) => {\n    return new Promise(async (resolve, reject) => {\n      try {\n        const response = await _MiniKit.awaitCommand(\n          \"miniapp-share\" /* MiniAppShare */,\n          \"share\" /* Share */,\n          () => _MiniKit.commands.share(payload)\n        );\n        resolve({\n          commandPayload: response.commandPayload,\n          finalPayload: response.finalPayload\n        });\n      } catch (error) {\n        reject(error);\n      }\n    });\n  },\n  chat: async (payload) => {\n    return new Promise(async (resolve, reject) => {\n      try {\n        const response = await _MiniKit.awaitCommand(\n          \"miniapp-chat\" /* MiniAppChat */,\n          \"chat\" /* Chat */,\n          () => _MiniKit.commands.chat(payload)\n        );\n        resolve({\n          commandPayload: response.commandPayload,\n          finalPayload: response.finalPayload\n        });\n      } catch (error) {\n        reject(error);\n      }\n    });\n  }\n};\nvar MiniKit = _MiniKit;\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQHdvcmxkY29pbittaW5pa2l0LWpzQDEuOS45X0B0eXBlcytyZWFjdEAxOS4yLjlfcmVhY3RAMTkuMi4zX3R5cGVzY3JpcHRANS45LjNfdmllbUAyLjIzLjVfdHlwZXNjcmlwdEA1LjkuM18vbm9kZV9tb2R1bGVzL0B3b3JsZGNvaW4vbWluaWtpdC1qcy9idWlsZC9jaHVuay1WV1g3U0VMRi5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNzRDtBQUNrQjtBQUN4RTtBQUNBLEdBQUcsZ0VBQWE7QUFDaEIsR0FBRyxnRUFBYTtBQUNoQixHQUFHLGdFQUFhO0FBQ2hCLEdBQUcsZ0VBQWE7QUFDaEIsR0FBRyxnRUFBYTtBQUNoQixHQUFHLGdFQUFhO0FBQ2hCLEdBQUcsZ0VBQWE7QUFDaEIsR0FBRyxnRUFBYTtBQUNoQixHQUFHLGdFQUFhO0FBQ2hCLEdBQUcsZ0VBQWE7QUFDaEIsR0FBRyxnRUFBYTtBQUNoQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyx5QkFBeUI7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLCtCQUErQjtBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyw0QkFBNEI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsaUNBQWlDO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtB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TjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsZ0NBQWdDO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsT0FBTztBQUNQO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1R0FBdUcsb0VBQWlCO0FBQ3hIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxRQUFRO0FBQ1I7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxRQUFRO0FBQ1I7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBNENFIiwic291cmNlcyI6WyIvVXNlcnMvam9uZ3dvb2traW0vRGVza3RvcC93b3JsZC1jb21tdW5pdHkvZnJvbnRlbmQvbm9kZV9tb2R1bGVzLy5wbnBtL0B3b3JsZGNvaW4rbWluaWtpdC1qc0AxLjkuOV9AdHlwZXMrcmVhY3RAMTkuMi45X3JlYWN0QDE5LjIuM190eXBlc2NyaXB0QDUuOS4zX3ZpZW1AMi4yMy41X3R5cGVzY3JpcHRANS45LjNfL25vZGVfbW9kdWxlcy9Ad29ybGRjb2luL21pbmlraXQtanMvYnVpbGQvY2h1bmstVldYN1NFTEYuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gdHlwZXMvZXJyb3JzLnRzXG5pbXBvcnQgeyBBcHBFcnJvckNvZGVzIH0gZnJvbSBcIkB3b3JsZGNvaW4vaWRraXQtY29yZVwiO1xuaW1wb3J0IHsgQXBwRXJyb3JDb2RlcyBhcyBBcHBFcnJvckNvZGVzMiB9IGZyb20gXCJAd29ybGRjb2luL2lka2l0LWNvcmVcIjtcbnZhciBWZXJpZmljYXRpb25FcnJvck1lc3NhZ2UgPSB7XG4gIFtBcHBFcnJvckNvZGVzLlZlcmlmaWNhdGlvblJlamVjdGVkXTogXCJZb3UndmUgY2FuY2VsbGVkIHRoZSByZXF1ZXN0IGluIFdvcmxkIEFwcC5cIixcbiAgW0FwcEVycm9yQ29kZXMuTWF4VmVyaWZpY2F0aW9uc1JlYWNoZWRdOiBcIllvdSBoYXZlIGFscmVhZHkgdmVyaWZpZWQgdGhlIG1heGltdW0gbnVtYmVyIG9mIHRpbWVzIGZvciB0aGlzIGFjdGlvbi5cIixcbiAgW0FwcEVycm9yQ29kZXMuQ3JlZGVudGlhbFVuYXZhaWxhYmxlXTogXCJJdCBzZWVtcyB5b3UgZG8gbm90IGhhdmUgdGhlIHZlcmlmaWNhdGlvbiBsZXZlbCByZXF1aXJlZCBieSB0aGlzIGFwcC5cIixcbiAgW0FwcEVycm9yQ29kZXMuTWFsZm9ybWVkUmVxdWVzdF06IFwiVGhlcmUgd2FzIGEgcHJvYmxlbSB3aXRoIHRoaXMgcmVxdWVzdC4gUGxlYXNlIHRyeSBhZ2FpbiBvciBjb250YWN0IHRoZSBhcHAgb3duZXIuXCIsXG4gIFtBcHBFcnJvckNvZGVzLkludmFsaWROZXR3b3JrXTogXCJJbnZhbGlkIG5ldHdvcmsuIElmIHlvdSBhcmUgdGhlIGFwcCBvd25lciwgdmlzaXQgZG9jcy53b3JsZGNvaW4ub3JnL3Rlc3QgZm9yIGRldGFpbHMuXCIsXG4gIFtBcHBFcnJvckNvZGVzLkluY2x1c2lvblByb29mRmFpbGVkXTogXCJUaGVyZSB3YXMgYW4gaXNzdWUgZmV0Y2hpbmcgeW91ciBjcmVkZW50aWFsLiBQbGVhc2UgdHJ5IGFnYWluLlwiLFxuICBbQXBwRXJyb3JDb2Rlcy5JbmNsdXNpb25Qcm9vZlBlbmRpbmddOiBcIllvdXIgaWRlbnRpdHkgaXMgc3RpbGwgYmVpbmcgcmVnaXN0ZXJlZC4gUGxlYXNlIHdhaXQgYSBmZXcgbWludXRlcyBhbmQgdHJ5IGFnYWluLlwiLFxuICBbQXBwRXJyb3JDb2Rlcy5VbmV4cGVjdGVkUmVzcG9uc2VdOiBcIlVuZXhwZWN0ZWQgcmVzcG9uc2UgZnJvbSB5b3VyIHdhbGxldC4gUGxlYXNlIHRyeSBhZ2Fpbi5cIixcbiAgW0FwcEVycm9yQ29kZXMuRmFpbGVkQnlIb3N0QXBwXTogXCJWZXJpZmljYXRpb24gZmFpbGVkIGJ5IHRoZSBhcHAuIFBsZWFzZSBjb250YWN0IHRoZSBhcHAgb3duZXIgZm9yIGRldGFpbHMuXCIsXG4gIFtBcHBFcnJvckNvZGVzLkdlbmVyaWNFcnJvcl06IFwiU29tZXRoaW5nIHVuZXhwZWN0ZWQgd2VudCB3cm9uZy4gUGxlYXNlIHRyeSBhZ2Fpbi5cIixcbiAgW0FwcEVycm9yQ29kZXMuQ29ubmVjdGlvbkZhaWxlZF06IFwiQ29ubmVjdGlvbiB0byB5b3VyIHdhbGxldCBmYWlsZWQuIFBsZWFzZSB0cnkgYWdhaW4uXCJcbn07XG52YXIgUGF5bWVudEVycm9yQ29kZXMgPSAvKiBAX19QVVJFX18gKi8gKChQYXltZW50RXJyb3JDb2RlczIpID0+IHtcbiAgUGF5bWVudEVycm9yQ29kZXMyW1wiSW5wdXRFcnJvclwiXSA9IFwiaW5wdXRfZXJyb3JcIjtcbiAgUGF5bWVudEVycm9yQ29kZXMyW1wiVXNlclJlamVjdGVkXCJdID0gXCJ1c2VyX3JlamVjdGVkXCI7XG4gIFBheW1lbnRFcnJvckNvZGVzMltcIlBheW1lbnRSZWplY3RlZFwiXSA9IFwicGF5bWVudF9yZWplY3RlZFwiO1xuICBQYXltZW50RXJyb3JDb2RlczJbXCJJbnZhbGlkUmVjZWl2ZXJcIl0gPSBcImludmFsaWRfcmVjZWl2ZXJcIjtcbiAgUGF5bWVudEVycm9yQ29kZXMyW1wiSW5zdWZmaWNpZW50QmFsYW5jZVwiXSA9IFwiaW5zdWZmaWNpZW50X2JhbGFuY2VcIjtcbiAgUGF5bWVudEVycm9yQ29kZXMyW1wiVHJhbnNhY3Rpb25GYWlsZWRcIl0gPSBcInRyYW5zYWN0aW9uX2ZhaWxlZFwiO1xuICBQYXltZW50RXJyb3JDb2RlczJbXCJHZW5lcmljRXJyb3JcIl0gPSBcImdlbmVyaWNfZXJyb3JcIjtcbiAgUGF5bWVudEVycm9yQ29kZXMyW1wiVXNlckJsb2NrZWRcIl0gPSBcInVzZXJfYmxvY2tlZFwiO1xuICByZXR1cm4gUGF5bWVudEVycm9yQ29kZXMyO1xufSkoUGF5bWVudEVycm9yQ29kZXMgfHwge30pO1xudmFyIFBheW1lbnRFcnJvck1lc3NhZ2UgPSB7XG4gIFtcImlucHV0X2Vycm9yXCIgLyogSW5wdXRFcnJvciAqL106IFwiVGhlcmUgd2FzIGEgcHJvYmxlbSB3aXRoIHRoaXMgcmVxdWVzdC4gUGxlYXNlIHRyeSBhZ2FpbiBvciBjb250YWN0IHRoZSBhcHAgb3duZXIuXCIsXG4gIFtcInVzZXJfcmVqZWN0ZWRcIiAvKiBVc2VyUmVqZWN0ZWQgKi9dOiBcIllvdSBoYXZlIGNhbmNlbGxlZCB0aGUgcGF5bWVudCBpbiBXb3JsZCBBcHAuXCIsXG4gIFtcInBheW1lbnRfcmVqZWN0ZWRcIiAvKiBQYXltZW50UmVqZWN0ZWQgKi9dOiBcIllvdSd2ZSBjYW5jZWxsZWQgdGhlIHBheW1lbnQgaW4gV29ybGQgQXBwLlwiLFxuICBbXCJpbnZhbGlkX3JlY2VpdmVyXCIgLyogSW52YWxpZFJlY2VpdmVyICovXTogXCJUaGUgcmVjZWl2ZXIgYWRkcmVzcyBpcyBpbnZhbGlkLiBQbGVhc2UgY29udGFjdCB0aGUgYXBwIG93bmVyLlwiLFxuICBbXCJpbnN1ZmZpY2llbnRfYmFsYW5jZVwiIC8qIEluc3VmZmljaWVudEJhbGFuY2UgKi9dOiBcIllvdSBkbyBub3QgaGF2ZSBlbm91Z2ggYmFsYW5jZSB0byBjb21wbGV0ZSB0aGlzIHRyYW5zYWN0aW9uLlwiLFxuICBbXCJ0cmFuc2FjdGlvbl9mYWlsZWRcIiAvKiBUcmFuc2FjdGlvbkZhaWxlZCAqL106IFwiVGhlIHRyYW5zYWN0aW9uIGZhaWxlZC4gUGxlYXNlIHRyeSBhZ2Fpbi5cIixcbiAgW1wiZ2VuZXJpY19lcnJvclwiIC8qIEdlbmVyaWNFcnJvciAqL106IFwiU29tZXRoaW5nIHVuZXhwZWN0ZWQgd2VudCB3cm9uZy4gUGxlYXNlIHRyeSBhZ2Fpbi5cIixcbiAgW1widXNlcl9ibG9ja2VkXCIgLyogVXNlckJsb2NrZWQgKi9dOiBcIlVzZXIncyByZWdpb24gaXMgYmxvY2tlZCBmcm9tIG1ha2luZyBwYXltZW50cy5cIlxufTtcbnZhciBQYXltZW50VmFsaWRhdGlvbkVycm9ycyA9IC8qIEBfX1BVUkVfXyAqLyAoKFBheW1lbnRWYWxpZGF0aW9uRXJyb3JzMikgPT4ge1xuICBQYXltZW50VmFsaWRhdGlvbkVycm9yczJbXCJNYWxmb3JtZWRSZXF1ZXN0XCJdID0gXCJUaGVyZSB3YXMgYSBwcm9ibGVtIHdpdGggdGhpcyByZXF1ZXN0LiBQbGVhc2UgdHJ5IGFnYWluIG9yIGNvbnRhY3QgdGhlIGFwcCBvd25lci5cIjtcbiAgUGF5bWVudFZhbGlkYXRpb25FcnJvcnMyW1wiSW52YWxpZFRva2VuQWRkcmVzc1wiXSA9IFwiVGhlIHRva2VuIGFkZHJlc3MgaXMgaW52YWxpZC4gUGxlYXNlIGNvbnRhY3QgdGhlIGFwcCBvd25lci5cIjtcbiAgUGF5bWVudFZhbGlkYXRpb25FcnJvcnMyW1wiSW52YWxpZEFwcElkXCJdID0gXCJUaGUgYXBwIElEIGlzIGludmFsaWQuIFBsZWFzZSBjb250YWN0IHRoZSBhcHAgb3duZXIuXCI7XG4gIFBheW1lbnRWYWxpZGF0aW9uRXJyb3JzMltcIkR1cGxpY2F0ZVJlZmVyZW5jZVwiXSA9IFwiVGhpcyByZWZlcmVuY2UgSUQgYWxyZWFkeSBleGlzdHMgcGxlYXNlIGdlbmVyYXRlIGEgbmV3IG9uZSBhbmQgdHJ5IGFnYWluLlwiO1xuICByZXR1cm4gUGF5bWVudFZhbGlkYXRpb25FcnJvcnMyO1xufSkoUGF5bWVudFZhbGlkYXRpb25FcnJvcnMgfHwge30pO1xudmFyIFdhbGxldEF1dGhFcnJvckNvZGVzID0gLyogQF9fUFVSRV9fICovICgoV2FsbGV0QXV0aEVycm9yQ29kZXMyKSA9PiB7XG4gIFdhbGxldEF1dGhFcnJvckNvZGVzMltcIk1hbGZvcm1lZFJlcXVlc3RcIl0gPSBcIm1hbGZvcm1lZF9yZXF1ZXN0XCI7XG4gIFdhbGxldEF1dGhFcnJvckNvZGVzMltcIlVzZXJSZWplY3RlZFwiXSA9IFwidXNlcl9yZWplY3RlZFwiO1xuICBXYWxsZXRBdXRoRXJyb3JDb2RlczJbXCJHZW5lcmljRXJyb3JcIl0gPSBcImdlbmVyaWNfZXJyb3JcIjtcbiAgcmV0dXJuIFdhbGxldEF1dGhFcnJvckNvZGVzMjtcbn0pKFdhbGxldEF1dGhFcnJvckNvZGVzIHx8IHt9KTtcbnZhciBXYWxsZXRBdXRoRXJyb3JNZXNzYWdlID0ge1xuICBbXCJtYWxmb3JtZWRfcmVxdWVzdFwiIC8qIE1hbGZvcm1lZFJlcXVlc3QgKi9dOiBcIlByb3ZpZGVkIHBhcmFtZXRlcnMgaW4gdGhlIHJlcXVlc3QgYXJlIGludmFsaWQuXCIsXG4gIFtcInVzZXJfcmVqZWN0ZWRcIiAvKiBVc2VyUmVqZWN0ZWQgKi9dOiBcIlVzZXIgcmVqZWN0ZWQgdGhlIHJlcXVlc3QuXCIsXG4gIFtcImdlbmVyaWNfZXJyb3JcIiAvKiBHZW5lcmljRXJyb3IgKi9dOiBcIlNvbWV0aGluZyB1bmV4cGVjdGVkIHdlbnQgd3JvbmcuXCJcbn07XG52YXIgU2VuZFRyYW5zYWN0aW9uRXJyb3JDb2RlcyA9IC8qIEBfX1BVUkVfXyAqLyAoKFNlbmRUcmFuc2FjdGlvbkVycm9yQ29kZXMyKSA9PiB7XG4gIFNlbmRUcmFuc2FjdGlvbkVycm9yQ29kZXMyW1wiSW52YWxpZE9wZXJhdGlvblwiXSA9IFwiaW52YWxpZF9vcGVyYXRpb25cIjtcbiAgU2VuZFRyYW5zYWN0aW9uRXJyb3JDb2RlczJbXCJVc2VyUmVqZWN0ZWRcIl0gPSBcInVzZXJfcmVqZWN0ZWRcIjtcbiAgU2VuZFRyYW5zYWN0aW9uRXJyb3JDb2RlczJbXCJJbnB1dEVycm9yXCJdID0gXCJpbnB1dF9lcnJvclwiO1xuICBTZW5kVHJhbnNhY3Rpb25FcnJvckNvZGVzMltcIlNpbXVsYXRpb25GYWlsZWRcIl0gPSBcInNpbXVsYXRpb25fZmFpbGVkXCI7XG4gIFNlbmRUcmFuc2FjdGlvbkVycm9yQ29kZXMyW1wiVHJhbnNhY3Rpb25GYWlsZWRcIl0gPSBcInRyYW5zYWN0aW9uX2ZhaWxlZFwiO1xuICBTZW5kVHJhbnNhY3Rpb25FcnJvckNvZGVzMltcIkdlbmVyaWNFcnJvclwiXSA9IFwiZ2VuZXJpY19lcnJvclwiO1xuICBTZW5kVHJhbnNhY3Rpb25FcnJvckNvZGVzMltcIkRpc2FsbG93ZWRPcGVyYXRpb25cIl0gPSBcImRpc2FsbG93ZWRfb3BlcmF0aW9uXCI7XG4gIFNlbmRUcmFuc2FjdGlvbkVycm9yQ29kZXMyW1wiVmFsaWRhdGlvbkVycm9yXCJdID0gXCJ2YWxpZGF0aW9uX2Vycm9yXCI7XG4gIFNlbmRUcmFuc2FjdGlvbkVycm9yQ29kZXMyW1wiSW52YWxpZENvbnRyYWN0XCJdID0gXCJpbnZhbGlkX2NvbnRyYWN0XCI7XG4gIFNlbmRUcmFuc2FjdGlvbkVycm9yQ29kZXMyW1wiTWFsaWNpb3VzT3BlcmF0aW9uXCJdID0gXCJtYWxpY2lvdXNfb3BlcmF0aW9uXCI7XG4gIFNlbmRUcmFuc2FjdGlvbkVycm9yQ29kZXMyW1wiRGFpbHlUeExpbWl0UmVhY2hlZFwiXSA9IFwiZGFpbHlfdHhfbGltaXRfcmVhY2hlZFwiO1xuICBTZW5kVHJhbnNhY3Rpb25FcnJvckNvZGVzMltcIlBlcm1pdHRlZEFtb3VudEV4Y2VlZHNTbGlwcGFnZVwiXSA9IFwicGVybWl0dGVkX2Ftb3VudF9leGNlZWRzX3NsaXBwYWdlXCI7XG4gIFNlbmRUcmFuc2FjdGlvbkVycm9yQ29kZXMyW1wiUGVybWl0dGVkQW1vdW50Tm90Rm91bmRcIl0gPSBcInBlcm1pdHRlZF9hbW91bnRfbm90X2ZvdW5kXCI7XG4gIHJldHVybiBTZW5kVHJhbnNhY3Rpb25FcnJvckNvZGVzMjtcbn0pKFNlbmRUcmFuc2FjdGlvbkVycm9yQ29kZXMgfHwge30pO1xudmFyIFNlbmRUcmFuc2FjdGlvbkVycm9yTWVzc2FnZSA9IHtcbiAgW1wiaW52YWxpZF9vcGVyYXRpb25cIiAvKiBJbnZhbGlkT3BlcmF0aW9uICovXTogXCJUcmFuc2FjdGlvbiBpbmNsdWRlZCBhbiBvcGVyYXRpb24gdGhhdCB3YXMgaW52YWxpZFwiLFxuICBbXCJ1c2VyX3JlamVjdGVkXCIgLyogVXNlclJlamVjdGVkICovXTogXCJVc2VyIHJlamVjdGVkIHRoZSByZXF1ZXN0LlwiLFxuICBbXCJpbnB1dF9lcnJvclwiIC8qIElucHV0RXJyb3IgKi9dOiBcIkludmFsaWQgcGF5bG9hZC5cIixcbiAgW1wic2ltdWxhdGlvbl9mYWlsZWRcIiAvKiBTaW11bGF0aW9uRmFpbGVkICovXTogXCJUaGUgdHJhbnNhY3Rpb24gc2ltdWxhdGlvbiBmYWlsZWQuXCIsXG4gIFtcInZhbGlkYXRpb25fZXJyb3JcIiAvKiBWYWxpZGF0aW9uRXJyb3IgKi9dOiBcIlRoZSB0cmFuc2FjdGlvbiB2YWxpZGF0aW9uIGZhaWxlZC4gUGxlYXNlIHRyeSBhZ2Fpbi5cIixcbiAgW1widHJhbnNhY3Rpb25fZmFpbGVkXCIgLyogVHJhbnNhY3Rpb25GYWlsZWQgKi9dOiBcIlRoZSB0cmFuc2FjdGlvbiBmYWlsZWQuIFBsZWFzZSB0cnkgYWdhaW4gbGF0ZXIuXCIsXG4gIFtcImdlbmVyaWNfZXJyb3JcIiAvKiBHZW5lcmljRXJyb3IgKi9dOiBcIlNvbWV0aGluZyB1bmV4cGVjdGVkIHdlbnQgd3JvbmcuIFBsZWFzZSB0cnkgYWdhaW4uXCIsXG4gIFtcImRpc2FsbG93ZWRfb3BlcmF0aW9uXCIgLyogRGlzYWxsb3dlZE9wZXJhdGlvbiAqL106IFwiVGhlIG9wZXJhdGlvbiByZXF1ZXN0ZWQgaXMgbm90IGFsbG93ZWQuIFBsZWFzZSByZWZlciB0byB0aGUgZG9jcy5cIixcbiAgW1wiaW52YWxpZF9jb250cmFjdFwiIC8qIEludmFsaWRDb250cmFjdCAqL106IFwiVGhlIGNvbnRyYWN0IGFkZHJlc3MgaXMgbm90IGFsbG93ZWQgZm9yIHlvdXIgYXBwbGljYXRpb24uIFBsZWFzZSBjaGVjayB5b3VyIGRldmVsb3BlciBwb3J0YWwgY29uZmlndXJhdGlvbnNcIixcbiAgW1wibWFsaWNpb3VzX29wZXJhdGlvblwiIC8qIE1hbGljaW91c09wZXJhdGlvbiAqL106IFwiVGhlIG9wZXJhdGlvbiByZXF1ZXN0ZWQgaXMgY29uc2lkZXJlZCBtYWxpY2lvdXMuXCIsXG4gIFtcImRhaWx5X3R4X2xpbWl0X3JlYWNoZWRcIiAvKiBEYWlseVR4TGltaXRSZWFjaGVkICovXTogXCJEYWlseSB0cmFuc2FjdGlvbiBsaW1pdCByZWFjaGVkLiBNYXggMTAwIHRyYW5zYWN0aW9ucyBwZXIgZGF5LiBXYWl0IHVudGlsIHRoZSBuZXh0IGRheS5cIixcbiAgW1wicGVybWl0dGVkX2Ftb3VudF9leGNlZWRzX3NsaXBwYWdlXCIgLyogUGVybWl0dGVkQW1vdW50RXhjZWVkc1NsaXBwYWdlICovXTogXCJQZXJtaXR0ZWQgYW1vdW50IGV4Y2VlZHMgc2xpcHBhZ2UuIFlvdSBtdXN0IHNwZW5kIGF0IGxlYXN0IDkwJSBvZiB0aGUgcGVybWl0dGVkIGFtb3VudC5cIixcbiAgW1wicGVybWl0dGVkX2Ftb3VudF9ub3RfZm91bmRcIiAvKiBQZXJtaXR0ZWRBbW91bnROb3RGb3VuZCAqL106IFwiUGVybWl0dGVkIGFtb3VudCBub3QgZm91bmQgaW4gcGVybWl0MiBwYXlsb2FkLlwiXG59O1xudmFyIFNpZ25NZXNzYWdlRXJyb3JDb2RlcyA9IC8qIEBfX1BVUkVfXyAqLyAoKFNpZ25NZXNzYWdlRXJyb3JDb2RlczIpID0+IHtcbiAgU2lnbk1lc3NhZ2VFcnJvckNvZGVzMltcIkludmFsaWRNZXNzYWdlXCJdID0gXCJpbnZhbGlkX21lc3NhZ2VcIjtcbiAgU2lnbk1lc3NhZ2VFcnJvckNvZGVzMltcIlVzZXJSZWplY3RlZFwiXSA9IFwidXNlcl9yZWplY3RlZFwiO1xuICBTaWduTWVzc2FnZUVycm9yQ29kZXMyW1wiR2VuZXJpY0Vycm9yXCJdID0gXCJnZW5lcmljX2Vycm9yXCI7XG4gIHJldHVybiBTaWduTWVzc2FnZUVycm9yQ29kZXMyO1xufSkoU2lnbk1lc3NhZ2VFcnJvckNvZGVzIHx8IHt9KTtcbnZhciBTaWduTWVzc2FnZUVycm9yTWVzc2FnZSA9IHtcbiAgW1wiaW52YWxpZF9tZXNzYWdlXCIgLyogSW52YWxpZE1lc3NhZ2UgKi9dOiBcIkludmFsaWQgbWVzc2FnZSByZXF1ZXN0ZWRcIixcbiAgW1widXNlcl9yZWplY3RlZFwiIC8qIFVzZXJSZWplY3RlZCAqL106IFwiVXNlciByZWplY3RlZCB0aGUgcmVxdWVzdC5cIixcbiAgW1wiZ2VuZXJpY19lcnJvclwiIC8qIEdlbmVyaWNFcnJvciAqL106IFwiU29tZXRoaW5nIHVuZXhwZWN0ZWQgd2VudCB3cm9uZy5cIlxufTtcbnZhciBTaWduVHlwZWREYXRhRXJyb3JDb2RlcyA9IC8qIEBfX1BVUkVfXyAqLyAoKFNpZ25UeXBlZERhdGFFcnJvckNvZGVzMikgPT4ge1xuICBTaWduVHlwZWREYXRhRXJyb3JDb2RlczJbXCJJbnZhbGlkT3BlcmF0aW9uXCJdID0gXCJpbnZhbGlkX29wZXJhdGlvblwiO1xuICBTaWduVHlwZWREYXRhRXJyb3JDb2RlczJbXCJVc2VyUmVqZWN0ZWRcIl0gPSBcInVzZXJfcmVqZWN0ZWRcIjtcbiAgU2lnblR5cGVkRGF0YUVycm9yQ29kZXMyW1wiSW5wdXRFcnJvclwiXSA9IFwiaW5wdXRfZXJyb3JcIjtcbiAgU2lnblR5cGVkRGF0YUVycm9yQ29kZXMyW1wiU2ltdWxhdGlvbkZhaWxlZFwiXSA9IFwic2ltdWxhdGlvbl9mYWlsZWRcIjtcbiAgU2lnblR5cGVkRGF0YUVycm9yQ29kZXMyW1wiR2VuZXJpY0Vycm9yXCJdID0gXCJnZW5lcmljX2Vycm9yXCI7XG4gIFNpZ25UeXBlZERhdGFFcnJvckNvZGVzMltcIkRpc2FsbG93ZWRPcGVyYXRpb25cIl0gPSBcImRpc2FsbG93ZWRfb3BlcmF0aW9uXCI7XG4gIFNpZ25UeXBlZERhdGFFcnJvckNvZGVzMltcIkludmFsaWRDb250cmFjdFwiXSA9IFwiaW52YWxpZF9jb250cmFjdFwiO1xuICBTaWduVHlwZWREYXRhRXJyb3JDb2RlczJbXCJNYWxpY2lvdXNPcGVyYXRpb25cIl0gPSBcIm1hbGljaW91c19vcGVyYXRpb25cIjtcbiAgcmV0dXJuIFNpZ25UeXBlZERhdGFFcnJvckNvZGVzMjtcbn0pKFNpZ25UeXBlZERhdGFFcnJvckNvZGVzIHx8IHt9KTtcbnZhciBTaWduVHlwZWREYXRhRXJyb3JNZXNzYWdlID0ge1xuICBbXCJpbnZhbGlkX29wZXJhdGlvblwiIC8qIEludmFsaWRPcGVyYXRpb24gKi9dOiBcIlRyYW5zYWN0aW9uIGluY2x1ZGVkIGFuIG9wZXJhdGlvbiB0aGF0IHdhcyBpbnZhbGlkXCIsXG4gIFtcInVzZXJfcmVqZWN0ZWRcIiAvKiBVc2VyUmVqZWN0ZWQgKi9dOiBcIlVzZXIgcmVqZWN0ZWQgdGhlIHJlcXVlc3QuXCIsXG4gIFtcImlucHV0X2Vycm9yXCIgLyogSW5wdXRFcnJvciAqL106IFwiSW52YWxpZCBwYXlsb2FkLlwiLFxuICBbXCJzaW11bGF0aW9uX2ZhaWxlZFwiIC8qIFNpbXVsYXRpb25GYWlsZWQgKi9dOiBcIlRoZSB0cmFuc2FjdGlvbiBzaW11bGF0aW9uIGZhaWxlZC5cIixcbiAgW1wiZ2VuZXJpY19lcnJvclwiIC8qIEdlbmVyaWNFcnJvciAqL106IFwiU29tZXRoaW5nIHVuZXhwZWN0ZWQgd2VudCB3cm9uZy4gUGxlYXNlIHRyeSBhZ2Fpbi5cIixcbiAgW1wiZGlzYWxsb3dlZF9vcGVyYXRpb25cIiAvKiBEaXNhbGxvd2VkT3BlcmF0aW9uICovXTogXCJUaGUgb3BlcmF0aW9uIHJlcXVlc3RlZCBpcyBub3QgYWxsb3dlZC4gUGxlYXNlIHJlZmVyIHRvIHRoZSBkb2NzLlwiLFxuICBbXCJpbnZhbGlkX2NvbnRyYWN0XCIgLyogSW52YWxpZENvbnRyYWN0ICovXTogXCJUaGUgY29udHJhY3QgYWRkcmVzcyBpcyBub3QgYWxsb3dlZCBmb3IgeW91ciBhcHBsaWNhdGlvbi4gUGxlYXNlIGNoZWNrIHlvdXIgZGV2ZWxvcGVyIHBvcnRhbCBjb25maWd1cmF0aW9uc1wiLFxuICBbXCJtYWxpY2lvdXNfb3BlcmF0aW9uXCIgLyogTWFsaWNpb3VzT3BlcmF0aW9uICovXTogXCJUaGUgb3BlcmF0aW9uIHJlcXVlc3RlZCBpcyBjb25zaWRlcmVkIG1hbGljaW91cy5cIlxufTtcbnZhciBNaW5pS2l0SW5zdGFsbEVycm9yQ29kZXMgPSAvKiBAX19QVVJFX18gKi8gKChNaW5pS2l0SW5zdGFsbEVycm9yQ29kZXMyKSA9PiB7XG4gIE1pbmlLaXRJbnN0YWxsRXJyb3JDb2RlczJbXCJVbmtub3duXCJdID0gXCJ1bmtub3duXCI7XG4gIE1pbmlLaXRJbnN0YWxsRXJyb3JDb2RlczJbXCJBbHJlYWR5SW5zdGFsbGVkXCJdID0gXCJhbHJlYWR5X2luc3RhbGxlZFwiO1xuICBNaW5pS2l0SW5zdGFsbEVycm9yQ29kZXMyW1wiT3V0c2lkZU9mV29ybGRBcHBcIl0gPSBcIm91dHNpZGVfb2Zfd29ybGRhcHBcIjtcbiAgTWluaUtpdEluc3RhbGxFcnJvckNvZGVzMltcIk5vdE9uQ2xpZW50XCJdID0gXCJub3Rfb25fY2xpZW50XCI7XG4gIE1pbmlLaXRJbnN0YWxsRXJyb3JDb2RlczJbXCJBcHBPdXRPZkRhdGVcIl0gPSBcImFwcF9vdXRfb2ZfZGF0ZVwiO1xuICByZXR1cm4gTWluaUtpdEluc3RhbGxFcnJvckNvZGVzMjtcbn0pKE1pbmlLaXRJbnN0YWxsRXJyb3JDb2RlcyB8fCB7fSk7XG52YXIgTWluaUtpdEluc3RhbGxFcnJvck1lc3NhZ2UgPSB7XG4gIFtcInVua25vd25cIiAvKiBVbmtub3duICovXTogXCJGYWlsZWQgdG8gaW5zdGFsbCBNaW5pS2l0LlwiLFxuICBbXCJhbHJlYWR5X2luc3RhbGxlZFwiIC8qIEFscmVhZHlJbnN0YWxsZWQgKi9dOiBcIk1pbmlLaXQgaXMgYWxyZWFkeSBpbnN0YWxsZWQuXCIsXG4gIFtcIm91dHNpZGVfb2Zfd29ybGRhcHBcIiAvKiBPdXRzaWRlT2ZXb3JsZEFwcCAqL106IFwiTWluaUFwcCBsYXVuY2hlZCBvdXRzaWRlIG9mIFdvcmxkQXBwLlwiLFxuICBbXCJub3Rfb25fY2xpZW50XCIgLyogTm90T25DbGllbnQgKi9dOiBcIldpbmRvdyBvYmplY3QgaXMgbm90IGF2YWlsYWJsZS5cIixcbiAgW1wiYXBwX291dF9vZl9kYXRlXCIgLyogQXBwT3V0T2ZEYXRlICovXTogXCJXb3JsZEFwcCBpcyBvdXQgb2YgZGF0ZS4gUGxlYXNlIHVwZGF0ZSB0aGUgYXBwLlwiXG59O1xudmFyIFNoYXJlQ29udGFjdHNFcnJvckNvZGVzID0gLyogQF9fUFVSRV9fICovICgoU2hhcmVDb250YWN0c0Vycm9yQ29kZXMyKSA9PiB7XG4gIFNoYXJlQ29udGFjdHNFcnJvckNvZGVzMltcIlVzZXJSZWplY3RlZFwiXSA9IFwidXNlcl9yZWplY3RlZFwiO1xuICBTaGFyZUNvbnRhY3RzRXJyb3JDb2RlczJbXCJHZW5lcmljRXJyb3JcIl0gPSBcImdlbmVyaWNfZXJyb3JcIjtcbiAgcmV0dXJuIFNoYXJlQ29udGFjdHNFcnJvckNvZGVzMjtcbn0pKFNoYXJlQ29udGFjdHNFcnJvckNvZGVzIHx8IHt9KTtcbnZhciBTaGFyZUNvbnRhY3RzRXJyb3JNZXNzYWdlID0ge1xuICBbXCJ1c2VyX3JlamVjdGVkXCIgLyogVXNlclJlamVjdGVkICovXTogXCJVc2VyIHJlamVjdGVkIHRoZSByZXF1ZXN0LlwiLFxuICBbXCJnZW5lcmljX2Vycm9yXCIgLyogR2VuZXJpY0Vycm9yICovXTogXCJTb21ldGhpbmcgdW5leHBlY3RlZCB3ZW50IHdyb25nLlwiXG59O1xudmFyIFJlcXVlc3RQZXJtaXNzaW9uRXJyb3JDb2RlcyA9IC8qIEBfX1BVUkVfXyAqLyAoKFJlcXVlc3RQZXJtaXNzaW9uRXJyb3JDb2RlczIpID0+IHtcbiAgUmVxdWVzdFBlcm1pc3Npb25FcnJvckNvZGVzMltcIlVzZXJSZWplY3RlZFwiXSA9IFwidXNlcl9yZWplY3RlZFwiO1xuICBSZXF1ZXN0UGVybWlzc2lvbkVycm9yQ29kZXMyW1wiR2VuZXJpY0Vycm9yXCJdID0gXCJnZW5lcmljX2Vycm9yXCI7XG4gIFJlcXVlc3RQZXJtaXNzaW9uRXJyb3JDb2RlczJbXCJBbHJlYWR5UmVxdWVzdGVkXCJdID0gXCJhbHJlYWR5X3JlcXVlc3RlZFwiO1xuICBSZXF1ZXN0UGVybWlzc2lvbkVycm9yQ29kZXMyW1wiUGVybWlzc2lvbkRpc2FibGVkXCJdID0gXCJwZXJtaXNzaW9uX2Rpc2FibGVkXCI7XG4gIFJlcXVlc3RQZXJtaXNzaW9uRXJyb3JDb2RlczJbXCJBbHJlYWR5R3JhbnRlZFwiXSA9IFwiYWxyZWFkeV9ncmFudGVkXCI7XG4gIFJlcXVlc3RQZXJtaXNzaW9uRXJyb3JDb2RlczJbXCJVbnN1cHBvcnRlZFBlcm1pc3Npb25cIl0gPSBcInVuc3VwcG9ydGVkX3Blcm1pc3Npb25cIjtcbiAgcmV0dXJuIFJlcXVlc3RQZXJtaXNzaW9uRXJyb3JDb2RlczI7XG59KShSZXF1ZXN0UGVybWlzc2lvbkVycm9yQ29kZXMgfHwge30pO1xudmFyIFJlcXVlc3RQZXJtaXNzaW9uRXJyb3JNZXNzYWdlID0ge1xuICBbXCJ1c2VyX3JlamVjdGVkXCIgLyogVXNlclJlamVjdGVkICovXTogXCJVc2VyIGRlY2xpbmVkIHNoYXJpbmcgY29udGFjdHNcIixcbiAgW1wiZ2VuZXJpY19lcnJvclwiIC8qIEdlbmVyaWNFcnJvciAqL106IFwiUmVxdWVzdCBmYWlsZWQgZm9yIHVua25vd24gcmVhc29uLlwiLFxuICBbXCJhbHJlYWR5X3JlcXVlc3RlZFwiIC8qIEFscmVhZHlSZXF1ZXN0ZWQgKi9dOiBcIlVzZXIgaGFzIGFscmVhZHkgZGVjbGluZWQgdHVybmluZyBvbiBub3RpZmljYXRpb25zIG9uY2VcIixcbiAgW1wicGVybWlzc2lvbl9kaXNhYmxlZFwiIC8qIFBlcm1pc3Npb25EaXNhYmxlZCAqL106IFwiVXNlciBkb2VzIG5vdCBoYXZlIHRoaXMgcGVybWlzc2lvbiBlbmFibGVkIGluIFdvcmxkIEFwcFwiLFxuICBbXCJhbHJlYWR5X2dyYW50ZWRcIiAvKiBBbHJlYWR5R3JhbnRlZCAqL106IFwiSWYgdGhlIHVzZXIgaGFzIGFscmVhZHkgZ3JhbnRlZCB0aGlzIG1pbmkgYXBwIHBlcm1pc3Npb25cIixcbiAgW1widW5zdXBwb3J0ZWRfcGVybWlzc2lvblwiIC8qIFVuc3VwcG9ydGVkUGVybWlzc2lvbiAqL106IFwiVGhlIHBlcm1pc3Npb24gcmVxdWVzdGVkIGlzIG5vdCBzdXBwb3J0ZWQgYnkgdGhpcyBtaW5pIGFwcFwiXG59O1xudmFyIEdldFBlcm1pc3Npb25zRXJyb3JDb2RlcyA9IC8qIEBfX1BVUkVfXyAqLyAoKEdldFBlcm1pc3Npb25zRXJyb3JDb2RlczIpID0+IHtcbiAgR2V0UGVybWlzc2lvbnNFcnJvckNvZGVzMltcIkdlbmVyaWNFcnJvclwiXSA9IFwiZ2VuZXJpY19lcnJvclwiO1xuICByZXR1cm4gR2V0UGVybWlzc2lvbnNFcnJvckNvZGVzMjtcbn0pKEdldFBlcm1pc3Npb25zRXJyb3JDb2RlcyB8fCB7fSk7XG52YXIgR2V0UGVybWlzc2lvbnNFcnJvck1lc3NhZ2UgPSB7XG4gIFtcImdlbmVyaWNfZXJyb3JcIiAvKiBHZW5lcmljRXJyb3IgKi9dOiBcIlNvbWV0aGluZyB1bmV4cGVjdGVkIHdlbnQgd3JvbmcuIFBsZWFzZSB0cnkgYWdhaW4uXCJcbn07XG52YXIgU2VuZEhhcHRpY0ZlZWRiYWNrRXJyb3JDb2RlcyA9IC8qIEBfX1BVUkVfXyAqLyAoKFNlbmRIYXB0aWNGZWVkYmFja0Vycm9yQ29kZXMyKSA9PiB7XG4gIFNlbmRIYXB0aWNGZWVkYmFja0Vycm9yQ29kZXMyW1wiR2VuZXJpY0Vycm9yXCJdID0gXCJnZW5lcmljX2Vycm9yXCI7XG4gIFNlbmRIYXB0aWNGZWVkYmFja0Vycm9yQ29kZXMyW1wiVXNlclJlamVjdGVkXCJdID0gXCJ1c2VyX3JlamVjdGVkXCI7XG4gIHJldHVybiBTZW5kSGFwdGljRmVlZGJhY2tFcnJvckNvZGVzMjtcbn0pKFNlbmRIYXB0aWNGZWVkYmFja0Vycm9yQ29kZXMgfHwge30pO1xudmFyIFNlbmRIYXB0aWNGZWVkYmFja0Vycm9yTWVzc2FnZSA9IHtcbiAgW1wiZ2VuZXJpY19lcnJvclwiIC8qIEdlbmVyaWNFcnJvciAqL106IFwiU29tZXRoaW5nIHVuZXhwZWN0ZWQgd2VudCB3cm9uZy5cIixcbiAgW1widXNlcl9yZWplY3RlZFwiIC8qIFVzZXJSZWplY3RlZCAqL106IFwiVXNlciByZWplY3RlZCB0aGUgcmVxdWVzdC5cIlxufTtcbnZhciBTaGFyZUZpbGVzRXJyb3JDb2RlcyA9IC8qIEBfX1BVUkVfXyAqLyAoKFNoYXJlRmlsZXNFcnJvckNvZGVzMikgPT4ge1xuICBTaGFyZUZpbGVzRXJyb3JDb2RlczJbXCJVc2VyUmVqZWN0ZWRcIl0gPSBcInVzZXJfcmVqZWN0ZWRcIjtcbiAgU2hhcmVGaWxlc0Vycm9yQ29kZXMyW1wiR2VuZXJpY0Vycm9yXCJdID0gXCJnZW5lcmljX2Vycm9yXCI7XG4gIFNoYXJlRmlsZXNFcnJvckNvZGVzMltcIkludmFsaWRGaWxlTmFtZVwiXSA9IFwiaW52YWxpZF9maWxlX25hbWVcIjtcbiAgcmV0dXJuIFNoYXJlRmlsZXNFcnJvckNvZGVzMjtcbn0pKFNoYXJlRmlsZXNFcnJvckNvZGVzIHx8IHt9KTtcbnZhciBTaGFyZUZpbGVzRXJyb3JNZXNzYWdlID0ge1xuICBbXCJ1c2VyX3JlamVjdGVkXCIgLyogVXNlclJlamVjdGVkICovXTogXCJVc2VyIHJlamVjdGVkIHRoZSByZXF1ZXN0LlwiLFxuICBbXCJnZW5lcmljX2Vycm9yXCIgLyogR2VuZXJpY0Vycm9yICovXTogXCJTb21ldGhpbmcgdW5leHBlY3RlZCB3ZW50IHdyb25nLlwiLFxuICBbXCJpbnZhbGlkX2ZpbGVfbmFtZVwiIC8qIEludmFsaWRGaWxlTmFtZSAqL106IFwiSW52YWxpZCBmaWxlIG5hbWUuIE1ha2Ugc3VyZSB5b3UgaW5jbHVkZSB0aGUgZXh0ZW5zaW9uXCJcbn07XG52YXIgTWljcm9waG9uZUVycm9yQ29kZXMgPSAvKiBAX19QVVJFX18gKi8gKChNaWNyb3Bob25lRXJyb3JDb2RlczIpID0+IHtcbiAgTWljcm9waG9uZUVycm9yQ29kZXMyW1wiTWluaUFwcFBlcm1pc3Npb25Ob3RFbmFibGVkXCJdID0gXCJtaW5pX2FwcF9wZXJtaXNzaW9uX25vdF9lbmFibGVkXCI7XG4gIE1pY3JvcGhvbmVFcnJvckNvZGVzMltcIldvcmxkQXBwUGVybWlzc2lvbk5vdEVuYWJsZWRcIl0gPSBcIndvcmxkX2FwcF9wZXJtaXNzaW9uX25vdF9lbmFibGVkXCI7XG4gIHJldHVybiBNaWNyb3Bob25lRXJyb3JDb2RlczI7XG59KShNaWNyb3Bob25lRXJyb3JDb2RlcyB8fCB7fSk7XG52YXIgTWljcm9waG9uZUVycm9yTWVzc2FnZSA9IHtcbiAgW1wibWluaV9hcHBfcGVybWlzc2lvbl9ub3RfZW5hYmxlZFwiIC8qIE1pbmlBcHBQZXJtaXNzaW9uTm90RW5hYmxlZCAqL106IFwiTWljcm9waG9uZSBwZXJtaXNzaW9uIG5vdCBlbmFibGVkIGZvciB5b3VyIE1pbmkgQXBwXCIsXG4gIFtcIndvcmxkX2FwcF9wZXJtaXNzaW9uX25vdF9lbmFibGVkXCIgLyogV29ybGRBcHBQZXJtaXNzaW9uTm90RW5hYmxlZCAqL106IFwiTWljcm9waG9uZSBwZXJtaXNzaW9uIG5vdCBlbmFibGVkIGluIFdvcmxkIEFwcFwiXG59O1xudmFyIENoYXRFcnJvckNvZGVzID0gLyogQF9fUFVSRV9fICovICgoQ2hhdEVycm9yQ29kZXMyKSA9PiB7XG4gIENoYXRFcnJvckNvZGVzMltcIlVzZXJSZWplY3RlZFwiXSA9IFwidXNlcl9yZWplY3RlZFwiO1xuICBDaGF0RXJyb3JDb2RlczJbXCJTZW5kRmFpbGVkXCJdID0gXCJzZW5kX2ZhaWxlZFwiO1xuICBDaGF0RXJyb3JDb2RlczJbXCJHZW5lcmljRXJyb3JcIl0gPSBcImdlbmVyaWNfZXJyb3JcIjtcbiAgcmV0dXJuIENoYXRFcnJvckNvZGVzMjtcbn0pKENoYXRFcnJvckNvZGVzIHx8IHt9KTtcbnZhciBDaGF0RXJyb3JNZXNzYWdlID0ge1xuICBbXCJ1c2VyX3JlamVjdGVkXCIgLyogVXNlclJlamVjdGVkICovXTogXCJVc2VyIHJlamVjdGVkIHRoZSByZXF1ZXN0LlwiLFxuICBbXCJzZW5kX2ZhaWxlZFwiIC8qIFNlbmRGYWlsZWQgKi9dOiBcIkZhaWxlZCB0byBzZW5kIHRoZSBtZXNzYWdlLlwiLFxuICBbXCJnZW5lcmljX2Vycm9yXCIgLyogR2VuZXJpY0Vycm9yICovXTogXCJTb21ldGhpbmcgdW5leHBlY3RlZCB3ZW50IHdyb25nLlwiXG59O1xuXG4vLyB0eXBlcy9yZXNwb25zZXMudHNcbnZhciBSZXNwb25zZUV2ZW50ID0gLyogQF9fUFVSRV9fICovICgoUmVzcG9uc2VFdmVudDIpID0+IHtcbiAgUmVzcG9uc2VFdmVudDJbXCJNaW5pQXBwVmVyaWZ5QWN0aW9uXCJdID0gXCJtaW5pYXBwLXZlcmlmeS1hY3Rpb25cIjtcbiAgUmVzcG9uc2VFdmVudDJbXCJNaW5pQXBwUGF5bWVudFwiXSA9IFwibWluaWFwcC1wYXltZW50XCI7XG4gIFJlc3BvbnNlRXZlbnQyW1wiTWluaUFwcFdhbGxldEF1dGhcIl0gPSBcIm1pbmlhcHAtd2FsbGV0LWF1dGhcIjtcbiAgUmVzcG9uc2VFdmVudDJbXCJNaW5pQXBwU2VuZFRyYW5zYWN0aW9uXCJdID0gXCJtaW5pYXBwLXNlbmQtdHJhbnNhY3Rpb25cIjtcbiAgUmVzcG9uc2VFdmVudDJbXCJNaW5pQXBwU2lnbk1lc3NhZ2VcIl0gPSBcIm1pbmlhcHAtc2lnbi1tZXNzYWdlXCI7XG4gIFJlc3BvbnNlRXZlbnQyW1wiTWluaUFwcFNpZ25UeXBlZERhdGFcIl0gPSBcIm1pbmlhcHAtc2lnbi10eXBlZC1kYXRhXCI7XG4gIFJlc3BvbnNlRXZlbnQyW1wiTWluaUFwcFNoYXJlQ29udGFjdHNcIl0gPSBcIm1pbmlhcHAtc2hhcmUtY29udGFjdHNcIjtcbiAgUmVzcG9uc2VFdmVudDJbXCJNaW5pQXBwUmVxdWVzdFBlcm1pc3Npb25cIl0gPSBcIm1pbmlhcHAtcmVxdWVzdC1wZXJtaXNzaW9uXCI7XG4gIFJlc3BvbnNlRXZlbnQyW1wiTWluaUFwcEdldFBlcm1pc3Npb25zXCJdID0gXCJtaW5pYXBwLWdldC1wZXJtaXNzaW9uc1wiO1xuICBSZXNwb25zZUV2ZW50MltcIk1pbmlBcHBTZW5kSGFwdGljRmVlZGJhY2tcIl0gPSBcIm1pbmlhcHAtc2VuZC1oYXB0aWMtZmVlZGJhY2tcIjtcbiAgUmVzcG9uc2VFdmVudDJbXCJNaW5pQXBwU2hhcmVcIl0gPSBcIm1pbmlhcHAtc2hhcmVcIjtcbiAgUmVzcG9uc2VFdmVudDJbXCJNaW5pQXBwTWljcm9waG9uZVwiXSA9IFwibWluaWFwcC1taWNyb3Bob25lXCI7XG4gIFJlc3BvbnNlRXZlbnQyW1wiTWluaUFwcENoYXRcIl0gPSBcIm1pbmlhcHAtY2hhdFwiO1xuICByZXR1cm4gUmVzcG9uc2VFdmVudDI7XG59KShSZXNwb25zZUV2ZW50IHx8IHt9KTtcblxuLy8gdHlwZXMvcGF5bWVudC50c1xudmFyIFRva2VucyA9IC8qIEBfX1BVUkVfXyAqLyAoKFRva2VuczIpID0+IHtcbiAgVG9rZW5zMltcIlVTRENcIl0gPSBcIlVTRENFXCI7XG4gIFRva2VuczJbXCJXTERcIl0gPSBcIldMRFwiO1xuICByZXR1cm4gVG9rZW5zMjtcbn0pKFRva2VucyB8fCB7fSk7XG52YXIgVG9rZW5EZWNpbWFscyA9IHtcbiAgW1wiVVNEQ0VcIiAvKiBVU0RDICovXTogNixcbiAgW1wiV0xEXCIgLyogV0xEICovXTogMThcbn07XG52YXIgTmV0d29yayA9IC8qIEBfX1BVUkVfXyAqLyAoKE5ldHdvcmsyKSA9PiB7XG4gIE5ldHdvcmsyW1wiT3B0aW1pc21cIl0gPSBcIm9wdGltaXNtXCI7XG4gIE5ldHdvcmsyW1wiV29ybGRDaGFpblwiXSA9IFwid29ybGRjaGFpblwiO1xuICByZXR1cm4gTmV0d29yazI7XG59KShOZXR3b3JrIHx8IHt9KTtcblxuLy8gaGVscGVycy9wYXltZW50L2NsaWVudC50c1xudmFyIHRva2VuVG9EZWNpbWFscyA9IChhbW91bnQsIHRva2VuKSA9PiB7XG4gIGNvbnN0IGRlY2ltYWxzID0gVG9rZW5EZWNpbWFsc1t0b2tlbl07XG4gIGlmIChkZWNpbWFscyA9PT0gdm9pZCAwKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIHRva2VuOiAke3Rva2VufWApO1xuICB9XG4gIGNvbnN0IGZhY3RvciA9IDEwICoqIGRlY2ltYWxzO1xuICBjb25zdCByZXN1bHQgPSBhbW91bnQgKiBmYWN0b3I7XG4gIGlmICghTnVtYmVyLmlzSW50ZWdlcihyZXN1bHQpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBUaGUgcmVzdWx0aW5nIGFtb3VudCBpcyBub3QgYSB3aG9sZSBudW1iZXI6ICR7cmVzdWx0fWApO1xuICB9XG4gIHJldHVybiByZXN1bHQ7XG59O1xudmFyIHZhbGlkYXRlUGF5bWVudFBheWxvYWQgPSAocGF5bG9hZCkgPT4ge1xuICBpZiAocGF5bG9hZC50b2tlbnMuc29tZShcbiAgICAodG9rZW4pID0+IHRva2VuLnN5bWJvbCA9PSBcIlVTRENFXCIgLyogVVNEQyAqLyAmJiBwYXJzZUZsb2F0KHRva2VuLnRva2VuX2Ftb3VudCkgPCAwLjFcbiAgKSkge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJVU0RDIGFtb3VudCBzaG91bGQgYmUgZ3JlYXRlciB0aGFuICQwLjFcIik7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGlmIChwYXlsb2FkLnJlZmVyZW5jZS5sZW5ndGggPiAzNikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJSZWZlcmVuY2UgbXVzdCBub3QgZXhjZWVkIDM2IGNoYXJhY3RlcnNcIik7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGlmICh0eXBlb2YgcGF5bG9hZC5yZWZlcmVuY2UgIT09IFwic3RyaW5nXCIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJSZWZlcmVuY2UgbXVzdCBiZSBhIHN0cmluZ1wiKTtcbiAgfVxuICByZXR1cm4gdHJ1ZTtcbn07XG5cbi8vIGhlbHBlcnMvc2l3ZS9zaXdlLnRzXG5pbXBvcnQge1xuICBjcmVhdGVQdWJsaWNDbGllbnQsXG4gIGdldENvbnRyYWN0LFxuICBoYXNoTWVzc2FnZSxcbiAgaHR0cCxcbiAgcmVjb3ZlckFkZHJlc3Ncbn0gZnJvbSBcInZpZW1cIjtcbmltcG9ydCB7IHdvcmxkY2hhaW4gfSBmcm9tIFwidmllbS9jaGFpbnNcIjtcbnZhciBQUkVBTUJMRSA9IFwiIHdhbnRzIHlvdSB0byBzaWduIGluIHdpdGggeW91ciBFdGhlcmV1bSBhY2NvdW50OlwiO1xudmFyIFVSSV9UQUcgPSBcIlVSSTogXCI7XG52YXIgVkVSU0lPTl9UQUcgPSBcIlZlcnNpb246IFwiO1xudmFyIENIQUlOX1RBRyA9IFwiQ2hhaW4gSUQ6IFwiO1xudmFyIE5PTkNFX1RBRyA9IFwiTm9uY2U6IFwiO1xudmFyIElBVF9UQUcgPSBcIklzc3VlZCBBdDogXCI7XG52YXIgRVhQX1RBRyA9IFwiRXhwaXJhdGlvbiBUaW1lOiBcIjtcbnZhciBOQkZfVEFHID0gXCJOb3QgQmVmb3JlOiBcIjtcbnZhciBSSURfVEFHID0gXCJSZXF1ZXN0IElEOiBcIjtcbnZhciBFUkNfMTkxX1BSRUZJWCA9IFwiXHUwMDE5RXRoZXJldW0gU2lnbmVkIE1lc3NhZ2U6XFxuXCI7XG52YXIgRUlQMTI3MV9NQUdJQ1ZBTFVFID0gXCIweDE2MjZiYTdlXCI7XG52YXIgU0FGRV9DT05UUkFDVF9BQkkgPSBbXG4gIHtcbiAgICBpbnB1dHM6IFtcbiAgICAgIHtcbiAgICAgICAgaW50ZXJuYWxUeXBlOiBcImFkZHJlc3NcIixcbiAgICAgICAgbmFtZTogXCJvd25lclwiLFxuICAgICAgICB0eXBlOiBcImFkZHJlc3NcIlxuICAgICAgfVxuICAgIF0sXG4gICAgbmFtZTogXCJpc093bmVyXCIsXG4gICAgb3V0cHV0czogW1xuICAgICAge1xuICAgICAgICBpbnRlcm5hbFR5cGU6IFwiYm9vbFwiLFxuICAgICAgICBuYW1lOiBcIlwiLFxuICAgICAgICB0eXBlOiBcImJvb2xcIlxuICAgICAgfVxuICAgIF0sXG4gICAgc3RhdGVNdXRhYmlsaXR5OiBcInZpZXdcIixcbiAgICB0eXBlOiBcImZ1bmN0aW9uXCJcbiAgfSxcbiAge1xuICAgIGlucHV0czogW1xuICAgICAge1xuICAgICAgICBpbnRlcm5hbFR5cGU6IFwiYnl0ZXMzMlwiLFxuICAgICAgICBuYW1lOiBcIl9tZXNzYWdlXCIsXG4gICAgICAgIHR5cGU6IFwiYnl0ZXMzMlwiXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBpbnRlcm5hbFR5cGU6IFwiYnl0ZXNcIixcbiAgICAgICAgbmFtZTogXCJfc2lnbmF0dXJlXCIsXG4gICAgICAgIHR5cGU6IFwiYnl0ZXNcIlxuICAgICAgfVxuICAgIF0sXG4gICAgbmFtZTogXCJpc1ZhbGlkU2lnbmF0dXJlXCIsXG4gICAgb3V0cHV0czogW1xuICAgICAge1xuICAgICAgICBpbnRlcm5hbFR5cGU6IFwiYnl0ZXM0XCIsXG4gICAgICAgIG5hbWU6IFwiXCIsXG4gICAgICAgIHR5cGU6IFwiYnl0ZXM0XCJcbiAgICAgIH1cbiAgICBdLFxuICAgIHN0YXRlTXV0YWJpbGl0eTogXCJ2aWV3XCIsXG4gICAgdHlwZTogXCJmdW5jdGlvblwiXG4gIH1cbl07XG52YXIgdGFnZ2VkID0gKGxpbmUsIHRhZykgPT4ge1xuICBpZiAobGluZSAmJiBsaW5lLmluY2x1ZGVzKHRhZykpIHtcbiAgICByZXR1cm4gbGluZS5yZXBsYWNlKHRhZywgXCJcIik7XG4gIH0gZWxzZSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBNaXNzaW5nICcke3RhZ30nYCk7XG4gIH1cbn07XG52YXIgcGFyc2VTaXdlTWVzc2FnZSA9IChpbnB1dFN0cmluZykgPT4ge1xuICBjb25zdCBsaW5lcyA9IGlucHV0U3RyaW5nLnNwbGl0KFwiXFxuXCIpW1N5bWJvbC5pdGVyYXRvcl0oKTtcbiAgY29uc3QgZG9tYWluID0gdGFnZ2VkKGxpbmVzLm5leHQoKT8udmFsdWUsIFBSRUFNQkxFKTtcbiAgY29uc3QgYWRkcmVzcyA9IGxpbmVzLm5leHQoKT8udmFsdWU7XG4gIGxpbmVzLm5leHQoKTtcbiAgY29uc3QgbmV4dFZhbHVlID0gbGluZXMubmV4dCgpPy52YWx1ZTtcbiAgbGV0IHN0YXRlbWVudDtcbiAgaWYgKG5leHRWYWx1ZSkge1xuICAgIHN0YXRlbWVudCA9IG5leHRWYWx1ZTtcbiAgICBsaW5lcy5uZXh0KCk7XG4gIH1cbiAgY29uc3QgdXJpID0gdGFnZ2VkKGxpbmVzLm5leHQoKT8udmFsdWUsIFVSSV9UQUcpO1xuICBjb25zdCB2ZXJzaW9uID0gdGFnZ2VkKGxpbmVzLm5leHQoKT8udmFsdWUsIFZFUlNJT05fVEFHKTtcbiAgY29uc3QgY2hhaW5faWQgPSB0YWdnZWQobGluZXMubmV4dCgpPy52YWx1ZSwgQ0hBSU5fVEFHKTtcbiAgY29uc3Qgbm9uY2UgPSB0YWdnZWQobGluZXMubmV4dCgpPy52YWx1ZSwgTk9OQ0VfVEFHKTtcbiAgY29uc3QgaXNzdWVkX2F0ID0gdGFnZ2VkKGxpbmVzLm5leHQoKT8udmFsdWUsIElBVF9UQUcpO1xuICBsZXQgZXhwaXJhdGlvbl90aW1lLCBub3RfYmVmb3JlLCByZXF1ZXN0X2lkO1xuICBmb3IgKGxldCBsaW5lIG9mIGxpbmVzKSB7XG4gICAgaWYgKGxpbmUuc3RhcnRzV2l0aChFWFBfVEFHKSkge1xuICAgICAgZXhwaXJhdGlvbl90aW1lID0gdGFnZ2VkKGxpbmUsIEVYUF9UQUcpO1xuICAgIH0gZWxzZSBpZiAobGluZS5zdGFydHNXaXRoKE5CRl9UQUcpKSB7XG4gICAgICBub3RfYmVmb3JlID0gdGFnZ2VkKGxpbmUsIE5CRl9UQUcpO1xuICAgIH0gZWxzZSBpZiAobGluZS5zdGFydHNXaXRoKFJJRF9UQUcpKSB7XG4gICAgICByZXF1ZXN0X2lkID0gdGFnZ2VkKGxpbmUsIFJJRF9UQUcpO1xuICAgIH1cbiAgfVxuICBpZiAobGluZXMubmV4dCgpLmRvbmUgPT09IGZhbHNlKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiRXh0cmEgbGluZXMgaW4gdGhlIGlucHV0XCIpO1xuICB9XG4gIGNvbnN0IHNpd2VNZXNzYWdlRGF0YSA9IHtcbiAgICBkb21haW4sXG4gICAgYWRkcmVzcyxcbiAgICBzdGF0ZW1lbnQsXG4gICAgdXJpLFxuICAgIHZlcnNpb24sXG4gICAgY2hhaW5faWQsXG4gICAgbm9uY2UsXG4gICAgaXNzdWVkX2F0LFxuICAgIGV4cGlyYXRpb25fdGltZSxcbiAgICBub3RfYmVmb3JlLFxuICAgIHJlcXVlc3RfaWRcbiAgfTtcbiAgcmV0dXJuIHNpd2VNZXNzYWdlRGF0YTtcbn07XG52YXIgZ2VuZXJhdGVTaXdlTWVzc2FnZSA9IChzaXdlTWVzc2FnZURhdGEpID0+IHtcbiAgbGV0IHNpd2VNZXNzYWdlID0gXCJcIjtcbiAgaWYgKHNpd2VNZXNzYWdlRGF0YS5zY2hlbWUpIHtcbiAgICBzaXdlTWVzc2FnZSArPSBgJHtzaXdlTWVzc2FnZURhdGEuc2NoZW1lfTovLyR7c2l3ZU1lc3NhZ2VEYXRhLmRvbWFpbn0gd2FudHMgeW91IHRvIHNpZ24gaW4gd2l0aCB5b3VyIEV0aGVyZXVtIGFjY291bnQ6XG5gO1xuICB9IGVsc2Uge1xuICAgIHNpd2VNZXNzYWdlICs9IGAke3Npd2VNZXNzYWdlRGF0YS5kb21haW59IHdhbnRzIHlvdSB0byBzaWduIGluIHdpdGggeW91ciBFdGhlcmV1bSBhY2NvdW50OlxuYDtcbiAgfVxuICBpZiAoc2l3ZU1lc3NhZ2VEYXRhLmFkZHJlc3MpIHtcbiAgICBzaXdlTWVzc2FnZSArPSBgJHtzaXdlTWVzc2FnZURhdGEuYWRkcmVzc31cbmA7XG4gIH0gZWxzZSB7XG4gICAgc2l3ZU1lc3NhZ2UgKz0gXCJ7YWRkcmVzc31cXG5cIjtcbiAgfVxuICBzaXdlTWVzc2FnZSArPSBcIlxcblwiO1xuICBpZiAoc2l3ZU1lc3NhZ2VEYXRhLnN0YXRlbWVudCkge1xuICAgIHNpd2VNZXNzYWdlICs9IGAke3Npd2VNZXNzYWdlRGF0YS5zdGF0ZW1lbnR9XG5gO1xuICB9XG4gIHNpd2VNZXNzYWdlICs9IFwiXFxuXCI7XG4gIHNpd2VNZXNzYWdlICs9IGBVUkk6ICR7c2l3ZU1lc3NhZ2VEYXRhLnVyaX1cbmA7XG4gIHNpd2VNZXNzYWdlICs9IGBWZXJzaW9uOiAke3Npd2VNZXNzYWdlRGF0YS52ZXJzaW9ufVxuYDtcbiAgc2l3ZU1lc3NhZ2UgKz0gYENoYWluIElEOiAke3Npd2VNZXNzYWdlRGF0YS5jaGFpbl9pZH1cbmA7XG4gIHNpd2VNZXNzYWdlICs9IGBOb25jZTogJHtzaXdlTWVzc2FnZURhdGEubm9uY2V9XG5gO1xuICBzaXdlTWVzc2FnZSArPSBgSXNzdWVkIEF0OiAke3Npd2VNZXNzYWdlRGF0YS5pc3N1ZWRfYXR9XG5gO1xuICBpZiAoc2l3ZU1lc3NhZ2VEYXRhLmV4cGlyYXRpb25fdGltZSkge1xuICAgIHNpd2VNZXNzYWdlICs9IGBFeHBpcmF0aW9uIFRpbWU6ICR7c2l3ZU1lc3NhZ2VEYXRhLmV4cGlyYXRpb25fdGltZX1cbmA7XG4gIH1cbiAgaWYgKHNpd2VNZXNzYWdlRGF0YS5ub3RfYmVmb3JlKSB7XG4gICAgc2l3ZU1lc3NhZ2UgKz0gYE5vdCBCZWZvcmU6ICR7c2l3ZU1lc3NhZ2VEYXRhLm5vdF9iZWZvcmV9XG5gO1xuICB9XG4gIGlmIChzaXdlTWVzc2FnZURhdGEucmVxdWVzdF9pZCkge1xuICAgIHNpd2VNZXNzYWdlICs9IGBSZXF1ZXN0IElEOiAke3Npd2VNZXNzYWdlRGF0YS5yZXF1ZXN0X2lkfVxuYDtcbiAgfVxuICByZXR1cm4gc2l3ZU1lc3NhZ2U7XG59O1xudmFyIHZlcmlmeVNpd2VNZXNzYWdlID0gKHBheWxvYWQsIG5vbmNlLCBzdGF0ZW1lbnQsIHJlcXVlc3RJZCwgdXNlclByb3ZpZGVyKSA9PiB7XG4gIGlmIChwYXlsb2FkLnZlcnNpb24gPT09IDEpIHtcbiAgICByZXR1cm4gdmVyaWZ5U2l3ZU1lc3NhZ2VWMShcbiAgICAgIHBheWxvYWQsXG4gICAgICBub25jZSxcbiAgICAgIHN0YXRlbWVudCxcbiAgICAgIHJlcXVlc3RJZCxcbiAgICAgIHVzZXJQcm92aWRlclxuICAgICk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHZlcmlmeVNpd2VNZXNzYWdlVjIoXG4gICAgICBwYXlsb2FkLFxuICAgICAgbm9uY2UsXG4gICAgICBzdGF0ZW1lbnQsXG4gICAgICByZXF1ZXN0SWQsXG4gICAgICB1c2VyUHJvdmlkZXJcbiAgICApO1xuICB9XG59O1xudmFyIHZhbGlkYXRlTWVzc2FnZSA9IChzaXdlTWVzc2FnZURhdGEsIG5vbmNlLCBzdGF0ZW1lbnQsIHJlcXVlc3RJZCkgPT4ge1xuICBpZiAoc2l3ZU1lc3NhZ2VEYXRhLmV4cGlyYXRpb25fdGltZSkge1xuICAgIGNvbnN0IGV4cGlyYXRpb25UaW1lID0gbmV3IERhdGUoc2l3ZU1lc3NhZ2VEYXRhLmV4cGlyYXRpb25fdGltZSk7XG4gICAgaWYgKGV4cGlyYXRpb25UaW1lIDwgLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkV4cGlyZWQgbWVzc2FnZVwiKTtcbiAgICB9XG4gIH1cbiAgaWYgKHNpd2VNZXNzYWdlRGF0YS5ub3RfYmVmb3JlKSB7XG4gICAgY29uc3Qgbm90QmVmb3JlID0gbmV3IERhdGUoc2l3ZU1lc3NhZ2VEYXRhLm5vdF9iZWZvcmUpO1xuICAgIGlmIChub3RCZWZvcmUgPiAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm90IEJlZm9yZSB0aW1lIGhhcyBub3QgcGFzc2VkXCIpO1xuICAgIH1cbiAgfVxuICBpZiAobm9uY2UgJiYgc2l3ZU1lc3NhZ2VEYXRhLm5vbmNlICE9PSBub25jZSkge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIGBOb25jZSBtaXNtYXRjaC4gR290OiAke3Npd2VNZXNzYWdlRGF0YS5ub25jZX0sIEV4cGVjdGVkOiAke25vbmNlfWBcbiAgICApO1xuICB9XG4gIGlmIChzdGF0ZW1lbnQgJiYgc2l3ZU1lc3NhZ2VEYXRhLnN0YXRlbWVudCAhPT0gc3RhdGVtZW50KSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgYFN0YXRlbWVudCBtaXNtYXRjaC4gR290OiAke3Npd2VNZXNzYWdlRGF0YS5zdGF0ZW1lbnR9LCBFeHBlY3RlZDogJHtzdGF0ZW1lbnR9YFxuICAgICk7XG4gIH1cbiAgaWYgKHJlcXVlc3RJZCAmJiBzaXdlTWVzc2FnZURhdGEucmVxdWVzdF9pZCAhPT0gcmVxdWVzdElkKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgYFJlcXVlc3QgSUQgbWlzbWF0Y2guIEdvdDogJHtzaXdlTWVzc2FnZURhdGEucmVxdWVzdF9pZH0sIEV4cGVjdGVkOiAke3JlcXVlc3RJZH1gXG4gICAgKTtcbiAgfVxuICByZXR1cm4gdHJ1ZTtcbn07XG52YXIgdmVyaWZ5U2l3ZU1lc3NhZ2VWMSA9IGFzeW5jIChwYXlsb2FkLCBub25jZSwgc3RhdGVtZW50LCByZXF1ZXN0SWQsIHVzZXJQcm92aWRlcikgPT4ge1xuICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgIHRocm93IG5ldyBFcnJvcihcIldhbGxldCBhdXRoIHBheWxvYWQgY2FuIG9ubHkgYmUgdmVyaWZpZWQgaW4gdGhlIGJhY2tlbmRcIik7XG4gIH1cbiAgY29uc3QgeyBtZXNzYWdlLCBzaWduYXR1cmUsIGFkZHJlc3MgfSA9IHBheWxvYWQ7XG4gIGNvbnN0IHNpd2VNZXNzYWdlRGF0YSA9IHBhcnNlU2l3ZU1lc3NhZ2UobWVzc2FnZSk7XG4gIHZhbGlkYXRlTWVzc2FnZShzaXdlTWVzc2FnZURhdGEsIG5vbmNlLCBzdGF0ZW1lbnQsIHJlcXVlc3RJZCk7XG4gIGxldCBwcm92aWRlciA9IHVzZXJQcm92aWRlciB8fCBjcmVhdGVQdWJsaWNDbGllbnQoeyBjaGFpbjogd29ybGRjaGFpbiwgdHJhbnNwb3J0OiBodHRwKCkgfSk7XG4gIGNvbnN0IHNpZ25lZE1lc3NhZ2UgPSBgJHtFUkNfMTkxX1BSRUZJWH0ke21lc3NhZ2UubGVuZ3RofSR7bWVzc2FnZX1gO1xuICBjb25zdCBoYXNoZWRNZXNzYWdlID0gaGFzaE1lc3NhZ2Uoc2lnbmVkTWVzc2FnZSk7XG4gIGNvbnN0IGNvbnRyYWN0ID0gZ2V0Q29udHJhY3Qoe1xuICAgIGFkZHJlc3MsXG4gICAgYWJpOiBTQUZFX0NPTlRSQUNUX0FCSSxcbiAgICBjbGllbnQ6IHByb3ZpZGVyXG4gIH0pO1xuICB0cnkge1xuICAgIGNvbnN0IHJlY292ZXJlZEFkZHJlc3MgPSBhd2FpdCByZWNvdmVyQWRkcmVzcyh7XG4gICAgICBoYXNoOiBoYXNoZWRNZXNzYWdlLFxuICAgICAgc2lnbmF0dXJlOiBgMHgke3NpZ25hdHVyZX1gXG4gICAgfSk7XG4gICAgY29uc3QgaXNPd25lciA9IGF3YWl0IGNvbnRyYWN0LnJlYWQuaXNPd25lcihbcmVjb3ZlcmVkQWRkcmVzc10pO1xuICAgIGlmICghaXNPd25lcikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiU2lnbmF0dXJlIHZlcmlmaWNhdGlvbiBmYWlsZWQsIGludmFsaWQgb3duZXJcIik7XG4gICAgfVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHRocm93IG5ldyBFcnJvcihcIlNpZ25hdHVyZSB2ZXJpZmljYXRpb24gZmFpbGVkXCIpO1xuICB9XG4gIHJldHVybiB7IGlzVmFsaWQ6IHRydWUsIHNpd2VNZXNzYWdlRGF0YSB9O1xufTtcbnZhciB2ZXJpZnlTaXdlTWVzc2FnZVYyID0gYXN5bmMgKHBheWxvYWQsIG5vbmNlLCBzdGF0ZW1lbnQsIHJlcXVlc3RJZCwgdXNlclByb3ZpZGVyKSA9PiB7XG4gIGlmICh0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiV2FsbGV0IGF1dGggcGF5bG9hZCBjYW4gb25seSBiZSB2ZXJpZmllZCBpbiB0aGUgYmFja2VuZFwiKTtcbiAgfVxuICBjb25zdCB7IG1lc3NhZ2UsIHNpZ25hdHVyZSwgYWRkcmVzcyB9ID0gcGF5bG9hZDtcbiAgY29uc3Qgc2l3ZU1lc3NhZ2VEYXRhID0gcGFyc2VTaXdlTWVzc2FnZShtZXNzYWdlKTtcbiAgaWYgKCF2YWxpZGF0ZU1lc3NhZ2Uoc2l3ZU1lc3NhZ2VEYXRhLCBub25jZSwgc3RhdGVtZW50LCByZXF1ZXN0SWQpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiVmFsaWRhdGlvbiBmYWlsZWRcIik7XG4gIH1cbiAgdHJ5IHtcbiAgICBjb25zdCB3YWxsZXRDb250cmFjdCA9IGdldENvbnRyYWN0KHtcbiAgICAgIGFkZHJlc3MsXG4gICAgICBhYmk6IFNBRkVfQ09OVFJBQ1RfQUJJLFxuICAgICAgY2xpZW50OiB1c2VyUHJvdmlkZXIgfHwgY3JlYXRlUHVibGljQ2xpZW50KHsgY2hhaW46IHdvcmxkY2hhaW4sIHRyYW5zcG9ydDogaHR0cCgpIH0pXG4gICAgfSk7XG4gICAgY29uc3QgaGFzaGVkTWVzc2FnZSA9IGhhc2hNZXNzYWdlKG1lc3NhZ2UpO1xuICAgIGNvbnN0IHJlcyA9IGF3YWl0IHdhbGxldENvbnRyYWN0LnJlYWQuaXNWYWxpZFNpZ25hdHVyZShbXG4gICAgICBoYXNoZWRNZXNzYWdlLFxuICAgICAgc2lnbmF0dXJlXG4gICAgXSk7XG4gICAgcmV0dXJuIHtcbiAgICAgIGlzVmFsaWQ6IHJlcyA9PT0gRUlQMTI3MV9NQUdJQ1ZBTFVFLFxuICAgICAgc2l3ZU1lc3NhZ2VEYXRhXG4gICAgfTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmxvZyhlcnJvcik7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiU2lnbmF0dXJlIHZlcmlmaWNhdGlvbiBmYWlsZWRcIik7XG4gIH1cbn07XG5cbi8vIHR5cGVzL2NvbW1hbmRzLnRzXG52YXIgQ29tbWFuZCA9IC8qIEBfX1BVUkVfXyAqLyAoKENvbW1hbmQyKSA9PiB7XG4gIENvbW1hbmQyW1wiVmVyaWZ5XCJdID0gXCJ2ZXJpZnlcIjtcbiAgQ29tbWFuZDJbXCJQYXlcIl0gPSBcInBheVwiO1xuICBDb21tYW5kMltcIldhbGxldEF1dGhcIl0gPSBcIndhbGxldC1hdXRoXCI7XG4gIENvbW1hbmQyW1wiU2VuZFRyYW5zYWN0aW9uXCJdID0gXCJzZW5kLXRyYW5zYWN0aW9uXCI7XG4gIENvbW1hbmQyW1wiU2lnbk1lc3NhZ2VcIl0gPSBcInNpZ24tbWVzc2FnZVwiO1xuICBDb21tYW5kMltcIlNpZ25UeXBlZERhdGFcIl0gPSBcInNpZ24tdHlwZWQtZGF0YVwiO1xuICBDb21tYW5kMltcIlNoYXJlQ29udGFjdHNcIl0gPSBcInNoYXJlLWNvbnRhY3RzXCI7XG4gIENvbW1hbmQyW1wiUmVxdWVzdFBlcm1pc3Npb25cIl0gPSBcInJlcXVlc3QtcGVybWlzc2lvblwiO1xuICBDb21tYW5kMltcIkdldFBlcm1pc3Npb25zXCJdID0gXCJnZXQtcGVybWlzc2lvbnNcIjtcbiAgQ29tbWFuZDJbXCJTZW5kSGFwdGljRmVlZGJhY2tcIl0gPSBcInNlbmQtaGFwdGljLWZlZWRiYWNrXCI7XG4gIENvbW1hbmQyW1wiU2hhcmVcIl0gPSBcInNoYXJlXCI7XG4gIENvbW1hbmQyW1wiQ2hhdFwiXSA9IFwiY2hhdFwiO1xuICByZXR1cm4gQ29tbWFuZDI7XG59KShDb21tYW5kIHx8IHt9KTtcbnZhciBQZXJtaXNzaW9uID0gLyogQF9fUFVSRV9fICovICgoUGVybWlzc2lvbjIpID0+IHtcbiAgUGVybWlzc2lvbjJbXCJOb3RpZmljYXRpb25zXCJdID0gXCJub3RpZmljYXRpb25zXCI7XG4gIFBlcm1pc3Npb24yW1wiQ29udGFjdHNcIl0gPSBcImNvbnRhY3RzXCI7XG4gIFBlcm1pc3Npb24yW1wiTWljcm9waG9uZVwiXSA9IFwibWljcm9waG9uZVwiO1xuICByZXR1cm4gUGVybWlzc2lvbjI7XG59KShQZXJtaXNzaW9uIHx8IHt9KTtcblxuLy8gdHlwZXMvaW5pdC50c1xudmFyIE1pbmlBcHBMYXVuY2hMb2NhdGlvbiA9IC8qIEBfX1BVUkVfXyAqLyAoKE1pbmlBcHBMYXVuY2hMb2NhdGlvbjMpID0+IHtcbiAgTWluaUFwcExhdW5jaExvY2F0aW9uM1tcIkNoYXRcIl0gPSBcImNoYXRcIjtcbiAgTWluaUFwcExhdW5jaExvY2F0aW9uM1tcIkhvbWVcIl0gPSBcImhvbWVcIjtcbiAgTWluaUFwcExhdW5jaExvY2F0aW9uM1tcIkFwcFN0b3JlXCJdID0gXCJhcHAtc3RvcmVcIjtcbiAgTWluaUFwcExhdW5jaExvY2F0aW9uM1tcIkRlZXBMaW5rXCJdID0gXCJkZWVwLWxpbmtcIjtcbiAgTWluaUFwcExhdW5jaExvY2F0aW9uM1tcIldhbGxldFRhYlwiXSA9IFwid2FsbGV0LXRhYlwiO1xuICByZXR1cm4gTWluaUFwcExhdW5jaExvY2F0aW9uMztcbn0pKE1pbmlBcHBMYXVuY2hMb2NhdGlvbiB8fCB7fSk7XG52YXIgV09STERfQVBQX0xBVU5DSF9MT0NBVElPTl9NQVAgPSB7XG4gIFwiYXBwLXN0b3JlXCI6IFwiYXBwLXN0b3JlXCIgLyogQXBwU3RvcmUgKi8sXG4gIGNhcm91c2VsOiBcImFwcC1zdG9yZVwiIC8qIEFwcFN0b3JlICovLFxuICBleHBsb3JlOiBcImFwcC1zdG9yZVwiIC8qIEFwcFN0b3JlICovLFxuICBhcHBfZGV0YWlsczogXCJhcHAtc3RvcmVcIiAvKiBBcHBTdG9yZSAqLyxcbiAgZGVlcGxpbms6IFwiZGVlcC1saW5rXCIgLyogRGVlcExpbmsgKi8sXG4gIGhvbWVwYWdlOiBcImhvbWVcIiAvKiBIb21lICovLFxuICB3YWxsZXRfdGFiOiBcIndhbGxldC10YWJcIiAvKiBXYWxsZXRUYWIgKi8sXG4gIHdvcmxkX2NoYXQ6IFwiY2hhdFwiIC8qIENoYXQgKi9cbn07XG52YXIgbWFwV29ybGRBcHBMYXVuY2hMb2NhdGlvbiA9IChsb2NhdGlvbikgPT4ge1xuICBpZiAoIWxvY2F0aW9uIHx8IHR5cGVvZiBsb2NhdGlvbiAhPT0gXCJzdHJpbmdcIikgcmV0dXJuIG51bGw7XG4gIGNvbnNvbGUubG9nKFwiTWluaUtpdCBsYXVuY2ggbG9jYXRpb24gbWFwcGVkOlwiLCBsb2NhdGlvbik7XG4gIGNvbnN0IG5vcm1hbGl6ZWRMb2NhdGlvbiA9IGxvY2F0aW9uLnRvTG93ZXJDYXNlKCk7XG4gIHJldHVybiBXT1JMRF9BUFBfTEFVTkNIX0xPQ0FUSU9OX01BUFtub3JtYWxpemVkTG9jYXRpb25dID8/IG51bGw7XG59O1xuXG4vLyBtaW5pa2l0LnRzXG5pbXBvcnQgeyBWZXJpZmljYXRpb25MZXZlbCB9IGZyb20gXCJAd29ybGRjb2luL2lka2l0LWNvcmVcIjtcbmltcG9ydCB7IGVuY29kZUFjdGlvbiwgZ2VuZXJhdGVTaWduYWwgfSBmcm9tIFwiQHdvcmxkY29pbi9pZGtpdC1jb3JlL2hhc2hpbmdcIjtcblxuLy8gaGVscGVycy9zZW5kLXdlYnZpZXctZXZlbnQudHNcbnZhciBzZW5kV2Vidmlld0V2ZW50ID0gKHBheWxvYWQpID0+IHtcbiAgaWYgKHdpbmRvdy53ZWJraXQpIHtcbiAgICB3aW5kb3cud2Via2l0Py5tZXNzYWdlSGFuZGxlcnM/Lm1pbmlraXQ/LnBvc3RNZXNzYWdlPy4ocGF5bG9hZCk7XG4gIH0gZWxzZSBpZiAod2luZG93LkFuZHJvaWQpIHtcbiAgICB3aW5kb3cuQW5kcm9pZC5wb3N0TWVzc2FnZT8uKEpTT04uc3RyaW5naWZ5KHBheWxvYWQpKTtcbiAgfVxufTtcblxuLy8gaGVscGVycy9taWNyb3Bob25lL2luZGV4LnRzXG52YXIgbWljcm9waG9uZVNldHVwRG9uZSA9IGZhbHNlO1xudmFyIHNldHVwTWljcm9waG9uZSA9ICgpID0+IHtcbiAgaWYgKG1pY3JvcGhvbmVTZXR1cERvbmUpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgaWYgKHR5cGVvZiBuYXZpZ2F0b3IgIT09IFwidW5kZWZpbmVkXCIgJiYgIW5hdmlnYXRvci5tZWRpYURldmljZXM/LmdldFVzZXJNZWRpYSlcbiAgICByZXR1cm47XG4gIGNvbnN0IG9yaWdpbmFsU3RvcCA9IE1lZGlhU3RyZWFtVHJhY2sucHJvdG90eXBlLnN0b3A7XG4gIE1lZGlhU3RyZWFtVHJhY2sucHJvdG90eXBlLnN0b3AgPSBmdW5jdGlvbigpIHtcbiAgICBvcmlnaW5hbFN0b3AuY2FsbCh0aGlzKTtcbiAgICBpZiAodGhpcy5yZWFkeVN0YXRlID09PSBcImVuZGVkXCIpIHtcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4gdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudChcImVuZGVkXCIpKSwgMCk7XG4gICAgfVxuICB9O1xuICBjb25zdCByZWFsR1VNID0gbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEuYmluZChcbiAgICBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzXG4gICk7XG4gIGNvbnN0IGxpdmUgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpO1xuICBhc3luYyBmdW5jdGlvbiB3cmFwcGVkKGNvbnN0cmFpbnRzKSB7XG4gICAgY29uc3Qgc3RyZWFtID0gYXdhaXQgcmVhbEdVTShjb25zdHJhaW50cyk7XG4gICAgY29uc3QgaGFzQXVkaW9UcmFjayA9IHN0cmVhbS5nZXRBdWRpb1RyYWNrcygpLmxlbmd0aCA+IDA7XG4gICAgaWYgKGhhc0F1ZGlvVHJhY2spIHtcbiAgICAgIHNlbmRXZWJ2aWV3RXZlbnQoe1xuICAgICAgICBjb21tYW5kOiBcIm1pY3JvcGhvbmUtc3RyZWFtLXN0YXJ0ZWRcIixcbiAgICAgICAgdmVyc2lvbjogMSxcbiAgICAgICAgcGF5bG9hZDoge1xuICAgICAgICAgIHN0cmVhbUlkOiBzdHJlYW0uaWRcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBsaXZlLmFkZChzdHJlYW0pO1xuICAgICAgc3RyZWFtLmdldEF1ZGlvVHJhY2tzKCkuZm9yRWFjaCgodCkgPT4ge1xuICAgICAgICB0LmFkZEV2ZW50TGlzdGVuZXIoXCJlbmRlZFwiLCAoKSA9PiB7XG4gICAgICAgICAgY29uc3QgYWxsQXVkaW9UcmFja3NFbmRlZCA9IHN0cmVhbS5nZXRBdWRpb1RyYWNrcygpLmV2ZXJ5KCh0cmFjaykgPT4gdHJhY2sucmVhZHlTdGF0ZSA9PT0gXCJlbmRlZFwiKTtcbiAgICAgICAgICBpZiAoYWxsQXVkaW9UcmFja3NFbmRlZCkge1xuICAgICAgICAgICAgc2VuZFdlYnZpZXdFdmVudCh7XG4gICAgICAgICAgICAgIGNvbW1hbmQ6IFwibWljcm9waG9uZS1zdHJlYW0tZW5kZWRcIixcbiAgICAgICAgICAgICAgdmVyc2lvbjogMSxcbiAgICAgICAgICAgICAgcGF5bG9hZDoge1xuICAgICAgICAgICAgICAgIHN0cmVhbUlkOiBzdHJlYW0uaWRcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBsaXZlLmRlbGV0ZShzdHJlYW0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHN0cmVhbTtcbiAgfVxuICBPYmplY3QuZGVmaW5lUHJvcGVydHkobmF2aWdhdG9yLm1lZGlhRGV2aWNlcywgXCJnZXRVc2VyTWVkaWFcIiwge1xuICAgIHZhbHVlOiB3cmFwcGVkLFxuICAgIHdyaXRhYmxlOiBmYWxzZSxcbiAgICBjb25maWd1cmFibGU6IGZhbHNlLFxuICAgIGVudW1lcmFibGU6IHRydWVcbiAgfSk7XG4gIE9iamVjdC5mcmVlemUobmF2aWdhdG9yLm1lZGlhRGV2aWNlcyk7XG4gIGNvbnN0IHN0b3BBbGxNaW5pQXBwTWljcm9waG9uZVN0cmVhbXMgPSAoKSA9PiB7XG4gICAgbGl2ZS5mb3JFYWNoKChzKSA9PiB7XG4gICAgICBjb25zdCBhdWRpb1RyYWNrcyA9IHMuZ2V0QXVkaW9UcmFja3MoKTtcbiAgICAgIGlmIChhdWRpb1RyYWNrcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGF1ZGlvVHJhY2tzLmZvckVhY2goKHQpID0+IHtcbiAgICAgICAgICB0LnN0b3AoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHNlbmRXZWJ2aWV3RXZlbnQoe1xuICAgICAgICAgIGNvbW1hbmQ6IFwibWljcm9waG9uZS1zdHJlYW0tZW5kZWRcIixcbiAgICAgICAgICB2ZXJzaW9uOiAxLFxuICAgICAgICAgIHBheWxvYWQ6IHtcbiAgICAgICAgICAgIHN0cmVhbUlkOiBzLmlkXG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBsaXZlLmNsZWFyKCk7XG4gIH07XG4gIE1pbmlLaXQuc3Vic2NyaWJlKFwibWluaWFwcC1taWNyb3Bob25lXCIgLyogTWluaUFwcE1pY3JvcGhvbmUgKi8sIChwYXlsb2FkKSA9PiB7XG4gICAgaWYgKHBheWxvYWQuc3RhdHVzID09PSBcImVycm9yXCIgJiYgKHBheWxvYWQuZXJyb3JfY29kZSA9PT0gXCJtaW5pX2FwcF9wZXJtaXNzaW9uX25vdF9lbmFibGVkXCIgLyogTWluaUFwcFBlcm1pc3Npb25Ob3RFbmFibGVkICovIHx8IHBheWxvYWQuZXJyb3JfY29kZSA9PT0gXCJ3b3JsZF9hcHBfcGVybWlzc2lvbl9ub3RfZW5hYmxlZFwiIC8qIFdvcmxkQXBwUGVybWlzc2lvbk5vdEVuYWJsZWQgKi8pKSB7XG4gICAgICBjb25zb2xlLmxvZyhcInN0b3BwaW5nIGFsbCBtaWNyb3Bob25lIHN0cmVhbXNcIiwgcGF5bG9hZCk7XG4gICAgICBzdG9wQWxsTWluaUFwcE1pY3JvcGhvbmVTdHJlYW1zKCk7XG4gICAgfVxuICB9KTtcbiAgd2luZG93Ll9fc3RvcEFsbE1pbmlBcHBNaWNyb3Bob25lU3RyZWFtcyA9IHN0b3BBbGxNaW5pQXBwTWljcm9waG9uZVN0cmVhbXM7XG4gIG1pY3JvcGhvbmVTZXR1cERvbmUgPSB0cnVlO1xufTtcblxuLy8gaGVscGVycy9wcm9vZi9pbmRleC50c1xuaW1wb3J0IHtcbiAgY3JlYXRlUHVibGljQ2xpZW50IGFzIGNyZWF0ZVB1YmxpY0NsaWVudDIsXG4gIGRlY29kZUFiaVBhcmFtZXRlcnMsXG4gIGVuY29kZUFiaVBhcmFtZXRlcnMsXG4gIGh0dHAgYXMgaHR0cDJcbn0gZnJvbSBcInZpZW1cIjtcbmltcG9ydCB7IHdvcmxkY2hhaW4gYXMgd29ybGRjaGFpbjIgfSBmcm9tIFwidmllbS9jaGFpbnNcIjtcbnZhciBzZW1hcGhvcmVWZXJpZmllckFkZHJlc3MgPSBcIjB4NzlmNDZiOTRkMTM0MTA5RWJjYmJkZEJBZUQwRTg4NzkwNDA5QTBlNFwiO1xudmFyIHNlbWFwaG9yZVZlcmlmaWVyQWJpID0gW1xuICB7XG4gICAgaW5wdXRzOiBbXG4gICAgICB7XG4gICAgICAgIGludGVybmFsVHlwZTogXCJ1aW50MjU2WzhdXCIsXG4gICAgICAgIG5hbWU6IFwicHJvb2ZcIixcbiAgICAgICAgdHlwZTogXCJ1aW50MjU2WzhdXCJcbiAgICAgIH1cbiAgICBdLFxuICAgIG5hbWU6IFwiY29tcHJlc3NQcm9vZlwiLFxuICAgIG91dHB1dHM6IFtcbiAgICAgIHtcbiAgICAgICAgaW50ZXJuYWxUeXBlOiBcInVpbnQyNTZbNF1cIixcbiAgICAgICAgbmFtZTogXCJjb21wcmVzc2VkXCIsXG4gICAgICAgIHR5cGU6IFwidWludDI1Nls0XVwiXG4gICAgICB9XG4gICAgXSxcbiAgICBzdGF0ZU11dGFiaWxpdHk6IFwidmlld1wiLFxuICAgIHR5cGU6IFwiZnVuY3Rpb25cIlxuICB9XG5dO1xudmFyIGNvbXByZXNzQW5kUGFkUHJvb2YgPSBhc3luYyAocHJvb2YsIHJwY1VybCkgPT4ge1xuICB0cnkge1xuICAgIGNvbnN0IHB1YmxpY0NsaWVudCA9IGNyZWF0ZVB1YmxpY0NsaWVudDIoe1xuICAgICAgY2hhaW46IHdvcmxkY2hhaW4yLFxuICAgICAgdHJhbnNwb3J0OiBodHRwMihcbiAgICAgICAgcnBjVXJsIHx8IFwiaHR0cHM6Ly93b3JsZGNoYWluLW1haW5uZXQuZy5hbGNoZW15LmNvbS9wdWJsaWNcIlxuICAgICAgKVxuICAgIH0pO1xuICAgIGNvbnN0IGRlY29kZWRQcm9vZiA9IGRlY29kZUFiaVBhcmFtZXRlcnMoXG4gICAgICBbeyB0eXBlOiBcInVpbnQyNTZbOF1cIiB9XSxcbiAgICAgIHByb29mXG4gICAgKVswXTtcbiAgICBjb25zdCBjb21wcmVzc2VkUHJvb2YgPSBhd2FpdCBwdWJsaWNDbGllbnQucmVhZENvbnRyYWN0KHtcbiAgICAgIGFkZHJlc3M6IHNlbWFwaG9yZVZlcmlmaWVyQWRkcmVzcyxcbiAgICAgIGFiaTogc2VtYXBob3JlVmVyaWZpZXJBYmksXG4gICAgICBmdW5jdGlvbk5hbWU6IFwiY29tcHJlc3NQcm9vZlwiLFxuICAgICAgYXJnczogW2RlY29kZWRQcm9vZl1cbiAgICB9KTtcbiAgICBjb25zdCBwYWRkZWRQcm9vZiA9IFsuLi5jb21wcmVzc2VkUHJvb2YsIDBuLCAwbiwgMG4sIDBuXTtcbiAgICByZXR1cm4gZW5jb2RlQWJpUGFyYW1ldGVycyhbeyB0eXBlOiBcInVpbnQyNTZbOF1cIiB9XSwgW3BhZGRlZFByb29mXSk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZXR1cm4gcHJvb2Y7XG4gIH1cbn07XG5cbi8vIGhlbHBlcnMvc2hhcmUvaW5kZXgudHNcbnZhciBNQVhfRklMRVMgPSAxMDtcbnZhciBNQVhfVE9UQUxfU0laRV9NQiA9IDUwO1xudmFyIE1BWF9UT1RBTF9TSVpFX0JZVEVTID0gTUFYX1RPVEFMX1NJWkVfTUIgKiAxMDI0ICogMTAyNDtcbnZhciBwcm9jZXNzRmlsZSA9IGFzeW5jIChmaWxlKSA9PiB7XG4gIGNvbnN0IGJ1ZmZlciA9IGF3YWl0IGZpbGUuYXJyYXlCdWZmZXIoKTtcbiAgY29uc3QgdWludDhBcnJheSA9IG5ldyBVaW50OEFycmF5KGJ1ZmZlcik7XG4gIGxldCBiaW5hcnlTdHJpbmcgPSBcIlwiO1xuICBjb25zdCBLX0NIVU5LX1NJWkUgPSAzMjc2ODtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCB1aW50OEFycmF5Lmxlbmd0aDsgaSArPSBLX0NIVU5LX1NJWkUpIHtcbiAgICBjb25zdCBjaHVuayA9IHVpbnQ4QXJyYXkuc3ViYXJyYXkoXG4gICAgICBpLFxuICAgICAgTWF0aC5taW4oaSArIEtfQ0hVTktfU0laRSwgdWludDhBcnJheS5sZW5ndGgpXG4gICAgKTtcbiAgICBiaW5hcnlTdHJpbmcgKz0gU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShcbiAgICAgIG51bGwsXG4gICAgICBBcnJheS5mcm9tKGNodW5rKVxuICAgICAgLy8gQ29udmVydCBVaW50OEFycmF5IGNodW5rIHRvIG51bWJlcltdXG4gICAgKTtcbiAgfVxuICBjb25zdCBiYXNlNjREYXRhID0gYnRvYShiaW5hcnlTdHJpbmcpO1xuICByZXR1cm4ge1xuICAgIG5hbWU6IGZpbGUubmFtZSxcbiAgICB0eXBlOiBmaWxlLnR5cGUsXG4gICAgZGF0YTogYmFzZTY0RGF0YVxuICB9O1xufTtcbnZhciBmb3JtYXRTaGFyZUlucHV0ID0gYXN5bmMgKGlucHV0KSA9PiB7XG4gIGlmICghaW5wdXQuZmlsZXMpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdGl0bGU6IGlucHV0LnRpdGxlLFxuICAgICAgdGV4dDogaW5wdXQudGV4dCxcbiAgICAgIHVybDogaW5wdXQudXJsXG4gICAgfTtcbiAgfVxuICBpZiAoIUFycmF5LmlzQXJyYXkoaW5wdXQuZmlsZXMpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdUaGUgXCJmaWxlc1wiIHByb3BlcnR5IG11c3QgYmUgYW4gYXJyYXkuJyk7XG4gIH1cbiAgaWYgKGlucHV0LmZpbGVzLmxlbmd0aCA9PT0gMCkge1xuICB9IGVsc2Uge1xuICAgIGlmIChpbnB1dC5maWxlcy5sZW5ndGggPiBNQVhfRklMRVMpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgQ2Fubm90IHNoYXJlIG1vcmUgdGhhbiAke01BWF9GSUxFU30gZmlsZXMuYCk7XG4gICAgfVxuICAgIGxldCB0b3RhbFNpemUgPSAwO1xuICAgIGZvciAoY29uc3QgZmlsZSBvZiBpbnB1dC5maWxlcykge1xuICAgICAgaWYgKCEoZmlsZSBpbnN0YW5jZW9mIEZpbGUpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICBgRWFjaCBpdGVtIGluIHRoZSAnZmlsZXMnIGFycmF5IG11c3QgYmUgYSBGaWxlIG9iamVjdC4gUmVjZWl2ZWQ6ICR7dHlwZW9mIGZpbGV9YFxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgdG90YWxTaXplICs9IGZpbGUuc2l6ZTtcbiAgICB9XG4gICAgaWYgKHRvdGFsU2l6ZSA+IE1BWF9UT1RBTF9TSVpFX0JZVEVTKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYFRvdGFsIGZpbGUgc2l6ZSBjYW5ub3QgZXhjZWVkICR7TUFYX1RPVEFMX1NJWkVfTUJ9TUIuYCk7XG4gICAgfVxuICB9XG4gIGNvbnN0IGZpbGVQcm9jZXNzaW5nUHJvbWlzZXMgPSBpbnB1dC5maWxlcy5tYXAoKGZpbGUpID0+IHByb2Nlc3NGaWxlKGZpbGUpKTtcbiAgY29uc3QgcHJvY2Vzc2VkRmlsZXMgPSBhd2FpdCBQcm9taXNlLmFsbChmaWxlUHJvY2Vzc2luZ1Byb21pc2VzKTtcbiAgcmV0dXJuIHtcbiAgICBmaWxlczogcHJvY2Vzc2VkRmlsZXMsXG4gICAgdGl0bGU6IGlucHV0LnRpdGxlLFxuICAgIHRleHQ6IGlucHV0LnRleHQsXG4gICAgdXJsOiBpbnB1dC51cmxcbiAgfTtcbn07XG5cbi8vIGhlbHBlcnMvc2l3ZS92YWxpZGF0ZS13YWxsZXQtYXV0aC1jb21tYW5kLWlucHV0LnRzXG52YXIgdmFsaWRhdGVXYWxsZXRBdXRoQ29tbWFuZElucHV0ID0gKHBhcmFtcykgPT4ge1xuICBpZiAoIXBhcmFtcy5ub25jZSkge1xuICAgIHJldHVybiB7IHZhbGlkOiBmYWxzZSwgbWVzc2FnZTogXCInbm9uY2UnIGlzIHJlcXVpcmVkXCIgfTtcbiAgfVxuICBpZiAocGFyYW1zLm5vbmNlLmxlbmd0aCA8IDgpIHtcbiAgICByZXR1cm4geyB2YWxpZDogZmFsc2UsIG1lc3NhZ2U6IFwiJ25vbmNlJyBtdXN0IGJlIGF0IGxlYXN0IDggY2hhcmFjdGVyc1wiIH07XG4gIH1cbiAgaWYgKHBhcmFtcy5zdGF0ZW1lbnQgJiYgcGFyYW1zLnN0YXRlbWVudC5pbmNsdWRlcyhcIlxcblwiKSkge1xuICAgIHJldHVybiB7IHZhbGlkOiBmYWxzZSwgbWVzc2FnZTogXCInc3RhdGVtZW50JyBtdXN0IG5vdCBjb250YWluIG5ld2xpbmVzXCIgfTtcbiAgfVxuICBpZiAocGFyYW1zLmV4cGlyYXRpb25UaW1lICYmIG5ldyBEYXRlKHBhcmFtcy5leHBpcmF0aW9uVGltZSkgPCAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKSkge1xuICAgIHJldHVybiB7IHZhbGlkOiBmYWxzZSwgbWVzc2FnZTogXCInZXhwaXJhdGlvblRpbWUnIG11c3QgYmUgaW4gdGhlIGZ1dHVyZVwiIH07XG4gIH1cbiAgaWYgKHBhcmFtcy5leHBpcmF0aW9uVGltZSAmJiBuZXcgRGF0ZShwYXJhbXMuZXhwaXJhdGlvblRpbWUpID4gbmV3IERhdGUoRGF0ZS5ub3coKSArIDcgKiAyNCAqIDYwICogNjAgKiAxZTMpKSB7XG4gICAgcmV0dXJuIHsgdmFsaWQ6IGZhbHNlLCBtZXNzYWdlOiBcIidleHBpcmF0aW9uVGltZScgbXVzdCBiZSB3aXRoaW4gNyBkYXlzXCIgfTtcbiAgfVxuICBpZiAocGFyYW1zLm5vdEJlZm9yZSAmJiBuZXcgRGF0ZShwYXJhbXMubm90QmVmb3JlKSA+IG5ldyBEYXRlKERhdGUubm93KCkgKyA3ICogMjQgKiA2MCAqIDYwICogMWUzKSkge1xuICAgIHJldHVybiB7IHZhbGlkOiBmYWxzZSwgbWVzc2FnZTogXCInbm90QmVmb3JlJyBtdXN0IGJlIHdpdGhpbiA3IGRheXNcIiB9O1xuICB9XG4gIHJldHVybiB7IHZhbGlkOiB0cnVlIH07XG59O1xuXG4vLyBoZWxwZXJzL3RyYW5zYWN0aW9uL3ZhbGlkYXRlLXBheWxvYWQudHNcbnZhciBpc1ZhbGlkSGV4ID0gKHN0cikgPT4ge1xuICByZXR1cm4gL14weFswLTlBLUZhLWZdKyQvLnRlc3Qoc3RyKTtcbn07XG52YXIgb2JqZWN0VmFsdWVzVG9BcnJheVJlY3Vyc2l2ZSA9IChpbnB1dCkgPT4ge1xuICBpZiAoaW5wdXQgPT09IG51bGwgfHwgdHlwZW9mIGlucHV0ICE9PSBcIm9iamVjdFwiKSB7XG4gICAgcmV0dXJuIGlucHV0O1xuICB9XG4gIGlmIChBcnJheS5pc0FycmF5KGlucHV0KSkge1xuICAgIHJldHVybiBpbnB1dC5tYXAoKGl0ZW0pID0+IG9iamVjdFZhbHVlc1RvQXJyYXlSZWN1cnNpdmUoaXRlbSkpO1xuICB9XG4gIGNvbnN0IHZhbHVlcyA9IE9iamVjdC52YWx1ZXMoaW5wdXQpO1xuICByZXR1cm4gdmFsdWVzLm1hcCgodmFsdWUpID0+IG9iamVjdFZhbHVlc1RvQXJyYXlSZWN1cnNpdmUodmFsdWUpKTtcbn07XG52YXIgcHJvY2Vzc1BheWxvYWQgPSAocGF5bG9hZCkgPT4ge1xuICBpZiAodHlwZW9mIHBheWxvYWQgPT09IFwiYm9vbGVhblwiIHx8IHR5cGVvZiBwYXlsb2FkID09PSBcInN0cmluZ1wiIHx8IHBheWxvYWQgPT09IG51bGwgfHwgcGF5bG9hZCA9PT0gdm9pZCAwKSB7XG4gICAgcmV0dXJuIHBheWxvYWQ7XG4gIH1cbiAgaWYgKHR5cGVvZiBwYXlsb2FkID09PSBcIm51bWJlclwiIHx8IHR5cGVvZiBwYXlsb2FkID09PSBcImJpZ2ludFwiKSB7XG4gICAgcmV0dXJuIFN0cmluZyhwYXlsb2FkKTtcbiAgfVxuICBpZiAoQXJyYXkuaXNBcnJheShwYXlsb2FkKSkge1xuICAgIHJldHVybiBwYXlsb2FkLm1hcCgodmFsdWUpID0+IHByb2Nlc3NQYXlsb2FkKHZhbHVlKSk7XG4gIH1cbiAgaWYgKHR5cGVvZiBwYXlsb2FkID09PSBcIm9iamVjdFwiKSB7XG4gICAgY29uc3QgcmVzdWx0ID0geyAuLi5wYXlsb2FkIH07XG4gICAgaWYgKFwidmFsdWVcIiBpbiByZXN1bHQgJiYgcmVzdWx0LnZhbHVlICE9PSB2b2lkIDApIHtcbiAgICAgIGlmICh0eXBlb2YgcmVzdWx0LnZhbHVlICE9PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIHJlc3VsdC52YWx1ZSA9IFN0cmluZyhyZXN1bHQudmFsdWUpO1xuICAgICAgfVxuICAgICAgaWYgKCFpc1ZhbGlkSGV4KHJlc3VsdC52YWx1ZSkpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcbiAgICAgICAgICBcIlRyYW5zYWN0aW9uIHZhbHVlIG11c3QgYmUgYSB2YWxpZCBoZXggc3RyaW5nXCIsXG4gICAgICAgICAgcmVzdWx0LnZhbHVlXG4gICAgICAgICk7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICBgVHJhbnNhY3Rpb24gdmFsdWUgbXVzdCBiZSBhIHZhbGlkIGhleCBzdHJpbmc6ICR7cmVzdWx0LnZhbHVlfWBcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG4gICAgZm9yIChjb25zdCBrZXkgaW4gcmVzdWx0KSB7XG4gICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHJlc3VsdCwga2V5KSkge1xuICAgICAgICByZXN1bHRba2V5XSA9IHByb2Nlc3NQYXlsb2FkKHJlc3VsdFtrZXldKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuICByZXR1cm4gcGF5bG9hZDtcbn07XG52YXIgdmFsaWRhdGVTZW5kVHJhbnNhY3Rpb25QYXlsb2FkID0gKHBheWxvYWQpID0+IHtcbiAgaWYgKHBheWxvYWQuZm9ybWF0UGF5bG9hZCkge1xuICAgIGNvbnN0IGZvcm1hdHRlZFBheWxvYWQgPSBwcm9jZXNzUGF5bG9hZChwYXlsb2FkKTtcbiAgICBmb3JtYXR0ZWRQYXlsb2FkLnRyYW5zYWN0aW9uID0gZm9ybWF0dGVkUGF5bG9hZC50cmFuc2FjdGlvbi5tYXAoKHR4KSA9PiB7XG4gICAgICBjb25zdCBhcmdzID0gb2JqZWN0VmFsdWVzVG9BcnJheVJlY3Vyc2l2ZSh0eC5hcmdzKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIC4uLnR4LFxuICAgICAgICBhcmdzXG4gICAgICB9O1xuICAgIH0pO1xuICAgIHJldHVybiBmb3JtYXR0ZWRQYXlsb2FkO1xuICB9XG4gIHJldHVybiBwYXlsb2FkO1xufTtcblxuLy8gaGVscGVycy91c2VybmFtZXMvaW5kZXgudHNcbnZhciBnZXRVc2VyUHJvZmlsZSA9IGFzeW5jIChhZGRyZXNzKSA9PiB7XG4gIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKFwiaHR0cHM6Ly91c2VybmFtZXMud29ybGRjb2luLm9yZy9hcGkvdjEvcXVlcnlcIiwge1xuICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgaGVhZGVyczoge1xuICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICB9LFxuICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgIGFkZHJlc3NlczogW2FkZHJlc3NdXG4gICAgfSlcbiAgfSk7XG4gIGNvbnN0IHVzZXJuYW1lcyA9IGF3YWl0IHJlcy5qc29uKCk7XG4gIHJldHVybiB1c2VybmFtZXM/LlswXSA/PyB7IHVzZXJuYW1lOiBudWxsLCBwcm9maWxlX3BpY3R1cmVfdXJsOiBudWxsIH07XG59O1xuXG4vLyBtaW5pa2l0LnRzXG52YXIgc2VuZE1pbmlLaXRFdmVudCA9IChwYXlsb2FkKSA9PiB7XG4gIHNlbmRXZWJ2aWV3RXZlbnQocGF5bG9hZCk7XG59O1xudmFyIF9NaW5pS2l0ID0gY2xhc3MgX01pbmlLaXQge1xuICBzdGF0aWMgc2VuZEluaXQoKSB7XG4gICAgc2VuZFdlYnZpZXdFdmVudCh7XG4gICAgICBjb21tYW5kOiBcImluaXRcIixcbiAgICAgIHBheWxvYWQ6IHtcbiAgICAgICAgdmVyc2lvbjogdGhpcy5NSU5JS0lUX1ZFUlNJT04sXG4gICAgICAgIG1pbm9yVmVyc2lvbjogdGhpcy5NSU5JS0lUX01JTk9SX1ZFUlNJT05cbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuICBzdGF0aWMgc3Vic2NyaWJlKGV2ZW50LCBoYW5kbGVyKSB7XG4gICAgaWYgKGV2ZW50ID09PSBcIm1pbmlhcHAtd2FsbGV0LWF1dGhcIiAvKiBNaW5pQXBwV2FsbGV0QXV0aCAqLykge1xuICAgICAgY29uc3Qgb3JpZ2luYWxIYW5kbGVyID0gaGFuZGxlcjtcbiAgICAgIGNvbnN0IHdyYXBwZWRIYW5kbGVyID0gYXN5bmMgKHBheWxvYWQpID0+IHtcbiAgICAgICAgaWYgKHBheWxvYWQuc3RhdHVzID09PSBcInN1Y2Nlc3NcIikge1xuICAgICAgICAgIF9NaW5pS2l0LnVzZXIud2FsbGV0QWRkcmVzcyA9IHBheWxvYWQuYWRkcmVzcztcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgdXNlciA9IGF3YWl0IF9NaW5pS2l0LmdldFVzZXJCeUFkZHJlc3MocGF5bG9hZC5hZGRyZXNzKTtcbiAgICAgICAgICAgIF9NaW5pS2l0LnVzZXIgPSB7IC4uLl9NaW5pS2l0LnVzZXIsIC4uLnVzZXIgfTtcbiAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkZhaWxlZCB0byBmZXRjaCB1c2VyIHByb2ZpbGU6XCIsIGVycm9yKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgb3JpZ2luYWxIYW5kbGVyKHBheWxvYWQpO1xuICAgICAgfTtcbiAgICAgIHRoaXMubGlzdGVuZXJzW2V2ZW50XSA9IHdyYXBwZWRIYW5kbGVyO1xuICAgIH0gZWxzZSBpZiAoZXZlbnQgPT09IFwibWluaWFwcC12ZXJpZnktYWN0aW9uXCIgLyogTWluaUFwcFZlcmlmeUFjdGlvbiAqLykge1xuICAgICAgY29uc3Qgb3JpZ2luYWxIYW5kbGVyID0gaGFuZGxlcjtcbiAgICAgIGNvbnN0IHdyYXBwZWRIYW5kbGVyID0gKHBheWxvYWQpID0+IHtcbiAgICAgICAgaWYgKHBheWxvYWQuc3RhdHVzID09PSBcImVycm9yXCIgJiYgcGF5bG9hZC5lcnJvcl9jb2RlID09IFwidXNlcl9yZWplY3RlZFwiKSB7XG4gICAgICAgICAgcGF5bG9hZC5lcnJvcl9jb2RlID0gQXBwRXJyb3JDb2RlczIuVmVyaWZpY2F0aW9uUmVqZWN0ZWQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBheWxvYWQuc3RhdHVzID09PSBcInN1Y2Nlc3NcIiAmJiBwYXlsb2FkLnZlcmlmaWNhdGlvbl9sZXZlbCA9PT0gVmVyaWZpY2F0aW9uTGV2ZWwuT3JiKSB7XG4gICAgICAgICAgY29tcHJlc3NBbmRQYWRQcm9vZihwYXlsb2FkLnByb29mKS50aGVuKFxuICAgICAgICAgICAgKGNvbXByZXNzZWRQcm9vZikgPT4ge1xuICAgICAgICAgICAgICBwYXlsb2FkLnByb29mID0gY29tcHJlc3NlZFByb29mO1xuICAgICAgICAgICAgICBvcmlnaW5hbEhhbmRsZXIocGF5bG9hZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBvcmlnaW5hbEhhbmRsZXIocGF5bG9hZCk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICB0aGlzLmxpc3RlbmVyc1tldmVudF0gPSB3cmFwcGVkSGFuZGxlcjtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5saXN0ZW5lcnNbZXZlbnRdID0gaGFuZGxlcjtcbiAgICB9XG4gIH1cbiAgc3RhdGljIHVuc3Vic2NyaWJlKGV2ZW50KSB7XG4gICAgZGVsZXRlIHRoaXMubGlzdGVuZXJzW2V2ZW50XTtcbiAgfVxuICBzdGF0aWMgdHJpZ2dlcihldmVudCwgcGF5bG9hZCkge1xuICAgIGlmICghdGhpcy5saXN0ZW5lcnNbZXZlbnRdKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICBgTm8gaGFuZGxlciBmb3IgZXZlbnQgJHtldmVudH0sIHBheWxvYWQ6ICR7SlNPTi5zdHJpbmdpZnkocGF5bG9hZCl9YFxuICAgICAgKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5saXN0ZW5lcnNbZXZlbnRdKHBheWxvYWQpO1xuICB9XG4gIHN0YXRpYyBhc3luYyBhd2FpdENvbW1hbmQoZXZlbnQsIGNvbW1hbmQsIGV4ZWN1dG9yKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICBsZXQgY29tbWFuZFBheWxvYWQgPSBudWxsO1xuICAgICAgY29uc3QgaGFuZGxlQW5kVW5zdWJzY3JpYmUgPSAocGF5bG9hZCkgPT4ge1xuICAgICAgICB0aGlzLnVuc3Vic2NyaWJlKGV2ZW50KTtcbiAgICAgICAgcmVzb2x2ZSh7IGNvbW1hbmRQYXlsb2FkLCBmaW5hbFBheWxvYWQ6IHBheWxvYWQgfSk7XG4gICAgICB9O1xuICAgICAgdGhpcy5zdWJzY3JpYmUoZXZlbnQsIGhhbmRsZUFuZFVuc3Vic2NyaWJlKTtcbiAgICAgIGNvbW1hbmRQYXlsb2FkID0gZXhlY3V0b3IoKTtcbiAgICB9KTtcbiAgfVxuICBzdGF0aWMgY29tbWFuZHNWYWxpZCh3b3JsZEFwcFN1cHBvcnRlZENvbW1hbmRzKSB7XG4gICAgbGV0IGFsbENvbW1hbmRzVmFsaWQgPSB0cnVlO1xuICAgIE9iamVjdC5lbnRyaWVzKHRoaXMubWluaUtpdENvbW1hbmRWZXJzaW9uKS5mb3JFYWNoKFxuICAgICAgKFttaW5pa2l0Q29tbWFuZE5hbWUsIHZlcnNpb25dKSA9PiB7XG4gICAgICAgIGNvbnN0IGNvbW1hbmRJbnB1dCA9IHdvcmxkQXBwU3VwcG9ydGVkQ29tbWFuZHMuZmluZChcbiAgICAgICAgICAoY29tbWFuZCkgPT4gY29tbWFuZC5uYW1lID09PSBtaW5pa2l0Q29tbWFuZE5hbWVcbiAgICAgICAgKTtcbiAgICAgICAgbGV0IGlzQ29tbWFuZFZhbGlkID0gZmFsc2U7XG4gICAgICAgIGlmICghY29tbWFuZElucHV0KSB7XG4gICAgICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAgICAgYENvbW1hbmQgJHttaW5pa2l0Q29tbWFuZE5hbWV9IGlzIG5vdCBzdXBwb3J0ZWQgYnkgdGhlIGFwcC4gVHJ5IHVwZGF0aW5nIHRoZSBhcHAgdmVyc2lvbmBcbiAgICAgICAgICApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmIChjb21tYW5kSW5wdXQuc3VwcG9ydGVkX3ZlcnNpb25zLmluY2x1ZGVzKHZlcnNpb24pKSB7XG4gICAgICAgICAgICBfTWluaUtpdC5pc0NvbW1hbmRBdmFpbGFibGVbbWluaWtpdENvbW1hbmROYW1lXSA9IHRydWU7XG4gICAgICAgICAgICBpc0NvbW1hbmRWYWxpZCA9IHRydWU7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlzQ29tbWFuZFZhbGlkID0gdHJ1ZTtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgICAgICAgYENvbW1hbmQgJHttaW5pa2l0Q29tbWFuZE5hbWV9IHZlcnNpb24gJHt2ZXJzaW9ufSBpcyBub3Qgc3VwcG9ydGVkIGJ5IHRoZSBhcHAuIFN1cHBvcnRlZCB2ZXJzaW9uczogJHtjb21tYW5kSW5wdXQuc3VwcG9ydGVkX3ZlcnNpb25zLmpvaW4oXCIsIFwiKX0uIFRoaXMgaXMgbm90IGFuIGVycm9yLCBidXQgaXQgaXMgcmVjb21tZW5kZWQgdG8gdXBkYXRlIHRoZSBXb3JsZCBBcHAgdmVyc2lvbi5gXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgX01pbmlLaXQuaXNDb21tYW5kQXZhaWxhYmxlW21pbmlraXRDb21tYW5kTmFtZV0gPSBpc0NvbW1hbmRWYWxpZDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFpc0NvbW1hbmRWYWxpZCkge1xuICAgICAgICAgIGFsbENvbW1hbmRzVmFsaWQgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICk7XG4gICAgcmV0dXJuIGFsbENvbW1hbmRzVmFsaWQ7XG4gIH1cbiAgc3RhdGljIGluc3RhbGwoYXBwSWQpIHtcbiAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gXCJ1bmRlZmluZWRcIiB8fCBCb29sZWFuKHdpbmRvdy5NaW5pS2l0KSkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIGVycm9yQ29kZTogXCJhbHJlYWR5X2luc3RhbGxlZFwiIC8qIEFscmVhZHlJbnN0YWxsZWQgKi8sXG4gICAgICAgIGVycm9yTWVzc2FnZTogTWluaUtpdEluc3RhbGxFcnJvck1lc3NhZ2VbXCJhbHJlYWR5X2luc3RhbGxlZFwiIC8qIEFscmVhZHlJbnN0YWxsZWQgKi9dXG4gICAgICB9O1xuICAgIH1cbiAgICBpZiAoIWFwcElkKSB7XG4gICAgICBjb25zb2xlLndhcm4oXCJBcHAgSUQgbm90IHByb3ZpZGVkIGR1cmluZyBpbnN0YWxsXCIpO1xuICAgIH0gZWxzZSB7XG4gICAgICBfTWluaUtpdC5hcHBJZCA9IGFwcElkO1xuICAgIH1cbiAgICBpZiAoIXdpbmRvdy5Xb3JsZEFwcCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIGVycm9yQ29kZTogXCJvdXRzaWRlX29mX3dvcmxkYXBwXCIgLyogT3V0c2lkZU9mV29ybGRBcHAgKi8sXG4gICAgICAgIGVycm9yTWVzc2FnZTogTWluaUtpdEluc3RhbGxFcnJvck1lc3NhZ2VbXCJvdXRzaWRlX29mX3dvcmxkYXBwXCIgLyogT3V0c2lkZU9mV29ybGRBcHAgKi9dXG4gICAgICB9O1xuICAgIH1cbiAgICBfTWluaUtpdC51c2VyLm9wdGVkSW50b09wdGlvbmFsQW5hbHl0aWNzID0gd2luZG93LldvcmxkQXBwLmlzX29wdGlvbmFsX2FuYWx5dGljcztcbiAgICBfTWluaUtpdC51c2VyLmRldmljZU9TID0gd2luZG93LldvcmxkQXBwLmRldmljZV9vcztcbiAgICBfTWluaUtpdC51c2VyLndvcmxkQXBwVmVyc2lvbiA9IHdpbmRvdy5Xb3JsZEFwcC53b3JsZF9hcHBfdmVyc2lvbjtcbiAgICBfTWluaUtpdC5kZXZpY2VQcm9wZXJ0aWVzLnNhZmVBcmVhSW5zZXRzID0gd2luZG93LldvcmxkQXBwLnNhZmVfYXJlYV9pbnNldHM7XG4gICAgX01pbmlLaXQuZGV2aWNlUHJvcGVydGllcy5kZXZpY2VPUyA9IHdpbmRvdy5Xb3JsZEFwcC5kZXZpY2Vfb3M7XG4gICAgX01pbmlLaXQuZGV2aWNlUHJvcGVydGllcy53b3JsZEFwcFZlcnNpb24gPSB3aW5kb3cuV29ybGRBcHAud29ybGRfYXBwX3ZlcnNpb247XG4gICAgX01pbmlLaXQubG9jYXRpb24gPSBtYXBXb3JsZEFwcExhdW5jaExvY2F0aW9uKHdpbmRvdy5Xb3JsZEFwcC5sb2NhdGlvbik7XG4gICAgdHJ5IHtcbiAgICAgIHdpbmRvdy5NaW5pS2l0ID0gX01pbmlLaXQ7XG4gICAgICB0aGlzLnNlbmRJbml0KCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgIE1pbmlLaXRJbnN0YWxsRXJyb3JNZXNzYWdlW1widW5rbm93blwiIC8qIFVua25vd24gKi9dLFxuICAgICAgICBlcnJvclxuICAgICAgKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvckNvZGU6IFwidW5rbm93blwiIC8qIFVua25vd24gKi8sXG4gICAgICAgIGVycm9yTWVzc2FnZTogTWluaUtpdEluc3RhbGxFcnJvck1lc3NhZ2VbXCJ1bmtub3duXCIgLyogVW5rbm93biAqL11cbiAgICAgIH07XG4gICAgfVxuICAgIF9NaW5pS2l0LmlzUmVhZHkgPSB0cnVlO1xuICAgIHNldHVwTWljcm9waG9uZSgpO1xuICAgIGlmICghdGhpcy5jb21tYW5kc1ZhbGlkKHdpbmRvdy5Xb3JsZEFwcC5zdXBwb3J0ZWRfY29tbWFuZHMpKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3JDb2RlOiBcImFwcF9vdXRfb2ZfZGF0ZVwiIC8qIEFwcE91dE9mRGF0ZSAqLyxcbiAgICAgICAgZXJyb3JNZXNzYWdlOiBNaW5pS2l0SW5zdGFsbEVycm9yTWVzc2FnZVtcImFwcF9vdXRfb2ZfZGF0ZVwiIC8qIEFwcE91dE9mRGF0ZSAqL11cbiAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfTtcbiAgfVxuICBzdGF0aWMgaXNJbnN0YWxsZWQoZGVidWcpIHtcbiAgICBjb25zdCBpc0luc3RhbGxlZCA9IF9NaW5pS2l0LmlzUmVhZHkgJiYgQm9vbGVhbih3aW5kb3cuTWluaUtpdCk7XG4gICAgaWYgKCFpc0luc3RhbGxlZClcbiAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgIFwiTWluaUtpdCBpcyBub3QgaW5zdGFsbGVkLiBNYWtlIHN1cmUgeW91J3JlIHJ1bm5pbmcgdGhlIGFwcGxpY2F0aW9uIGluc2lkZSBvZiBXb3JsZCBBcHBcIlxuICAgICAgKTtcbiAgICBpZiAoZGVidWcgJiYgaXNJbnN0YWxsZWQpIGNvbnNvbGUubG9nKFwiTWluaUtpdCBpcyBhbGl2ZSFcIik7XG4gICAgcmV0dXJuIGlzSW5zdGFsbGVkO1xuICB9XG59O1xuX01pbmlLaXQuTUlOSUtJVF9WRVJTSU9OID0gMTtcbl9NaW5pS2l0Lk1JTklLSVRfTUlOT1JfVkVSU0lPTiA9IDk2O1xuX01pbmlLaXQubWluaUtpdENvbW1hbmRWZXJzaW9uID0ge1xuICBbXCJ2ZXJpZnlcIiAvKiBWZXJpZnkgKi9dOiAxLFxuICBbXCJwYXlcIiAvKiBQYXkgKi9dOiAxLFxuICBbXCJ3YWxsZXQtYXV0aFwiIC8qIFdhbGxldEF1dGggKi9dOiAyLFxuICBbXCJzZW5kLXRyYW5zYWN0aW9uXCIgLyogU2VuZFRyYW5zYWN0aW9uICovXTogMSxcbiAgW1wic2lnbi1tZXNzYWdlXCIgLyogU2lnbk1lc3NhZ2UgKi9dOiAxLFxuICBbXCJzaWduLXR5cGVkLWRhdGFcIiAvKiBTaWduVHlwZWREYXRhICovXTogMSxcbiAgW1wic2hhcmUtY29udGFjdHNcIiAvKiBTaGFyZUNvbnRhY3RzICovXTogMSxcbiAgW1wicmVxdWVzdC1wZXJtaXNzaW9uXCIgLyogUmVxdWVzdFBlcm1pc3Npb24gKi9dOiAxLFxuICBbXCJnZXQtcGVybWlzc2lvbnNcIiAvKiBHZXRQZXJtaXNzaW9ucyAqL106IDEsXG4gIFtcInNlbmQtaGFwdGljLWZlZWRiYWNrXCIgLyogU2VuZEhhcHRpY0ZlZWRiYWNrICovXTogMSxcbiAgW1wic2hhcmVcIiAvKiBTaGFyZSAqL106IDEsXG4gIFtcImNoYXRcIiAvKiBDaGF0ICovXTogMVxufTtcbl9NaW5pS2l0LmlzQ29tbWFuZEF2YWlsYWJsZSA9IHtcbiAgW1widmVyaWZ5XCIgLyogVmVyaWZ5ICovXTogZmFsc2UsXG4gIFtcInBheVwiIC8qIFBheSAqL106IGZhbHNlLFxuICBbXCJ3YWxsZXQtYXV0aFwiIC8qIFdhbGxldEF1dGggKi9dOiBmYWxzZSxcbiAgW1wic2VuZC10cmFuc2FjdGlvblwiIC8qIFNlbmRUcmFuc2FjdGlvbiAqL106IGZhbHNlLFxuICBbXCJzaWduLW1lc3NhZ2VcIiAvKiBTaWduTWVzc2FnZSAqL106IGZhbHNlLFxuICBbXCJzaWduLXR5cGVkLWRhdGFcIiAvKiBTaWduVHlwZWREYXRhICovXTogZmFsc2UsXG4gIFtcInNoYXJlLWNvbnRhY3RzXCIgLyogU2hhcmVDb250YWN0cyAqL106IGZhbHNlLFxuICBbXCJyZXF1ZXN0LXBlcm1pc3Npb25cIiAvKiBSZXF1ZXN0UGVybWlzc2lvbiAqL106IGZhbHNlLFxuICBbXCJnZXQtcGVybWlzc2lvbnNcIiAvKiBHZXRQZXJtaXNzaW9ucyAqL106IGZhbHNlLFxuICBbXCJzZW5kLWhhcHRpYy1mZWVkYmFja1wiIC8qIFNlbmRIYXB0aWNGZWVkYmFjayAqL106IGZhbHNlLFxuICBbXCJzaGFyZVwiIC8qIFNoYXJlICovXTogZmFsc2UsXG4gIFtcImNoYXRcIiAvKiBDaGF0ICovXTogZmFsc2Vcbn07XG5fTWluaUtpdC5saXN0ZW5lcnMgPSB7XG4gIFtcIm1pbmlhcHAtdmVyaWZ5LWFjdGlvblwiIC8qIE1pbmlBcHBWZXJpZnlBY3Rpb24gKi9dOiAoKSA9PiB7XG4gIH0sXG4gIFtcIm1pbmlhcHAtcGF5bWVudFwiIC8qIE1pbmlBcHBQYXltZW50ICovXTogKCkgPT4ge1xuICB9LFxuICBbXCJtaW5pYXBwLXdhbGxldC1hdXRoXCIgLyogTWluaUFwcFdhbGxldEF1dGggKi9dOiAoKSA9PiB7XG4gIH0sXG4gIFtcIm1pbmlhcHAtc2VuZC10cmFuc2FjdGlvblwiIC8qIE1pbmlBcHBTZW5kVHJhbnNhY3Rpb24gKi9dOiAoKSA9PiB7XG4gIH0sXG4gIFtcIm1pbmlhcHAtc2lnbi1tZXNzYWdlXCIgLyogTWluaUFwcFNpZ25NZXNzYWdlICovXTogKCkgPT4ge1xuICB9LFxuICBbXCJtaW5pYXBwLXNpZ24tdHlwZWQtZGF0YVwiIC8qIE1pbmlBcHBTaWduVHlwZWREYXRhICovXTogKCkgPT4ge1xuICB9LFxuICBbXCJtaW5pYXBwLXNoYXJlLWNvbnRhY3RzXCIgLyogTWluaUFwcFNoYXJlQ29udGFjdHMgKi9dOiAoKSA9PiB7XG4gIH0sXG4gIFtcIm1pbmlhcHAtcmVxdWVzdC1wZXJtaXNzaW9uXCIgLyogTWluaUFwcFJlcXVlc3RQZXJtaXNzaW9uICovXTogKCkgPT4ge1xuICB9LFxuICBbXCJtaW5pYXBwLWdldC1wZXJtaXNzaW9uc1wiIC8qIE1pbmlBcHBHZXRQZXJtaXNzaW9ucyAqL106ICgpID0+IHtcbiAgfSxcbiAgW1wibWluaWFwcC1zZW5kLWhhcHRpYy1mZWVkYmFja1wiIC8qIE1pbmlBcHBTZW5kSGFwdGljRmVlZGJhY2sgKi9dOiAoKSA9PiB7XG4gIH0sXG4gIFtcIm1pbmlhcHAtc2hhcmVcIiAvKiBNaW5pQXBwU2hhcmUgKi9dOiAoKSA9PiB7XG4gIH0sXG4gIFtcIm1pbmlhcHAtbWljcm9waG9uZVwiIC8qIE1pbmlBcHBNaWNyb3Bob25lICovXTogKCkgPT4ge1xuICB9LFxuICBbXCJtaW5pYXBwLWNoYXRcIiAvKiBNaW5pQXBwQ2hhdCAqL106ICgpID0+IHtcbiAgfVxufTtcbl9NaW5pS2l0LmFwcElkID0gbnVsbDtcbl9NaW5pS2l0LnVzZXIgPSB7fTtcbl9NaW5pS2l0LmRldmljZVByb3BlcnRpZXMgPSB7fTtcbl9NaW5pS2l0LmxvY2F0aW9uID0gbnVsbDtcbl9NaW5pS2l0LmlzUmVhZHkgPSBmYWxzZTtcbl9NaW5pS2l0LmdldFVzZXJCeUFkZHJlc3MgPSBhc3luYyAoYWRkcmVzcykgPT4ge1xuICBjb25zdCB1c2VyUHJvZmlsZSA9IGF3YWl0IGdldFVzZXJQcm9maWxlKFxuICAgIGFkZHJlc3MgPz8gX01pbmlLaXQudXNlci53YWxsZXRBZGRyZXNzXG4gICk7XG4gIHJldHVybiB7XG4gICAgd2FsbGV0QWRkcmVzczogYWRkcmVzcyA/PyBfTWluaUtpdC51c2VyLndhbGxldEFkZHJlc3MsXG4gICAgdXNlcm5hbWU6IHVzZXJQcm9maWxlLnVzZXJuYW1lLFxuICAgIHByb2ZpbGVQaWN0dXJlVXJsOiB1c2VyUHJvZmlsZS5wcm9maWxlX3BpY3R1cmVfdXJsXG4gIH07XG59O1xuX01pbmlLaXQuZ2V0VXNlckJ5VXNlcm5hbWUgPSBhc3luYyAodXNlcm5hbWUpID0+IHtcbiAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goXG4gICAgYGh0dHBzOi8vdXNlcm5hbWVzLndvcmxkY29pbi5vcmcvYXBpL3YxLyR7dXNlcm5hbWV9YCxcbiAgICB7XG4gICAgICBtZXRob2Q6IFwiR0VUXCIsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiXG4gICAgICB9XG4gICAgfVxuICApO1xuICBjb25zdCB1c2VyID0gYXdhaXQgcmVzLmpzb24oKTtcbiAgcmV0dXJuIHtcbiAgICB3YWxsZXRBZGRyZXNzOiB1c2VyLmFkZHJlc3MsXG4gICAgdXNlcm5hbWU6IHVzZXIudXNlcm5hbWUsXG4gICAgcHJvZmlsZVBpY3R1cmVVcmw6IHVzZXIucHJvZmlsZV9waWN0dXJlX3VybFxuICB9O1xufTtcbi8vIFRoaXMgaXMgYSBoZWxwZXIgZnVuY3Rpb24gZm9yIGRldmVsb3BlcnMgdG8gZ2VuZXJhdGUgTWluaUFwcCBVUkxzXG5fTWluaUtpdC5nZXRNaW5pQXBwVXJsID0gKGFwcElkLCBwYXRoKSA9PiB7XG4gIGNvbnN0IGJhc2VVcmwgPSBuZXcgVVJMKFwiaHR0cHM6Ly93b3JsZC5vcmcvbWluaS1hcHBcIik7XG4gIGJhc2VVcmwuc2VhcmNoUGFyYW1zLmFwcGVuZChcImFwcF9pZFwiLCBhcHBJZCk7XG4gIGlmIChwYXRoKSB7XG4gICAgY29uc3QgZnVsbFBhdGggPSBwYXRoLnN0YXJ0c1dpdGgoXCIvXCIpID8gcGF0aCA6IGAvJHtwYXRofWA7XG4gICAgYmFzZVVybC5zZWFyY2hQYXJhbXMuYXBwZW5kKFwicGF0aFwiLCBlbmNvZGVVUklDb21wb25lbnQoZnVsbFBhdGgpKTtcbiAgfVxuICByZXR1cm4gYmFzZVVybC50b1N0cmluZygpO1xufTtcbi8vIE9wZW5zIHRoZSBwcm9maWxlIGNhcmQgZm9yIGEgZ2l2ZW4gdXNlcm5hbWUgb3Igd2FsbGV0IGFkZHJlc3Ncbl9NaW5pS2l0LnNob3dQcm9maWxlQ2FyZCA9ICh1c2VybmFtZSwgd2FsbGV0QWRkcmVzcykgPT4ge1xuICBpZiAoIXVzZXJuYW1lICYmICF3YWxsZXRBZGRyZXNzKSB7XG4gICAgY29uc29sZS5lcnJvcihcbiAgICAgIFwiRWl0aGVyIHVzZXJuYW1lIG9yIHdhbGxldEFkZHJlc3MgbXVzdCBiZSBwcm92aWRlZCB0byBzaG93IHByb2ZpbGUgY2FyZFwiXG4gICAgKTtcbiAgICByZXR1cm47XG4gIH1cbiAgaWYgKHVzZXJuYW1lKSB7XG4gICAgd2luZG93Lm9wZW4oXG4gICAgICBgd29ybGRhcHA6Ly9wcm9maWxlP3VzZXJuYW1lPSR7ZW5jb2RlVVJJQ29tcG9uZW50KHVzZXJuYW1lKX1gXG4gICAgKTtcbiAgICByZXR1cm47XG4gIH0gZWxzZSB7XG4gICAgd2luZG93Lm9wZW4oXG4gICAgICBgd29ybGRhcHA6Ly9wcm9maWxlP2FkZHJlc3M9JHtlbmNvZGVVUklDb21wb25lbnQod2FsbGV0QWRkcmVzcyB8fCBcIlwiKX1gXG4gICAgKTtcbiAgfVxufTtcbi8vIFNpbXBseSByZS1leHBvcnRpbmcgdGhlIGV4aXN0aW5nIGZ1bmN0aW9uXG5fTWluaUtpdC5nZXRVc2VySW5mbyA9IF9NaW5pS2l0LmdldFVzZXJCeUFkZHJlc3M7XG5fTWluaUtpdC5jb21tYW5kcyA9IHtcbiAgdmVyaWZ5OiAocGF5bG9hZCkgPT4ge1xuICAgIGlmICh0eXBlb2Ygd2luZG93ID09PSBcInVuZGVmaW5lZFwiIHx8ICFfTWluaUtpdC5pc0NvbW1hbmRBdmFpbGFibGVbXCJ2ZXJpZnlcIiAvKiBWZXJpZnkgKi9dKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICBcIid2ZXJpZnknIGNvbW1hbmQgaXMgdW5hdmFpbGFibGUuIENoZWNrIE1pbmlLaXQuaW5zdGFsbCgpIG9yIHVwZGF0ZSB0aGUgYXBwIHZlcnNpb25cIlxuICAgICAgKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBjb25zdCB0aW1lc3RhbXAgPSAoLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCkpLnRvSVNPU3RyaW5nKCk7XG4gICAgY29uc3QgZXZlbnRQYXlsb2FkID0ge1xuICAgICAgYWN0aW9uOiBlbmNvZGVBY3Rpb24ocGF5bG9hZC5hY3Rpb24pLFxuICAgICAgc2lnbmFsOiBnZW5lcmF0ZVNpZ25hbChwYXlsb2FkLnNpZ25hbCkuZGlnZXN0LFxuICAgICAgdmVyaWZpY2F0aW9uX2xldmVsOiBwYXlsb2FkLnZlcmlmaWNhdGlvbl9sZXZlbCB8fCBWZXJpZmljYXRpb25MZXZlbC5PcmIsXG4gICAgICB0aW1lc3RhbXBcbiAgICB9O1xuICAgIHNlbmRNaW5pS2l0RXZlbnQoe1xuICAgICAgY29tbWFuZDogXCJ2ZXJpZnlcIiAvKiBWZXJpZnkgKi8sXG4gICAgICB2ZXJzaW9uOiBfTWluaUtpdC5taW5pS2l0Q29tbWFuZFZlcnNpb25bXCJ2ZXJpZnlcIiAvKiBWZXJpZnkgKi9dLFxuICAgICAgcGF5bG9hZDogZXZlbnRQYXlsb2FkXG4gICAgfSk7XG4gICAgcmV0dXJuIGV2ZW50UGF5bG9hZDtcbiAgfSxcbiAgcGF5OiAocGF5bG9hZCkgPT4ge1xuICAgIGlmICh0eXBlb2Ygd2luZG93ID09PSBcInVuZGVmaW5lZFwiIHx8ICFfTWluaUtpdC5pc0NvbW1hbmRBdmFpbGFibGVbXCJwYXlcIiAvKiBQYXkgKi9dKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICBcIidwYXknIGNvbW1hbmQgaXMgdW5hdmFpbGFibGUuIENoZWNrIE1pbmlLaXQuaW5zdGFsbCgpIG9yIHVwZGF0ZSB0aGUgYXBwIHZlcnNpb25cIlxuICAgICAgKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBpZiAoIXZhbGlkYXRlUGF5bWVudFBheWxvYWQocGF5bG9hZCkpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBjb25zdCBldmVudFBheWxvYWQgPSB7XG4gICAgICAuLi5wYXlsb2FkLFxuICAgICAgbmV0d29yazogXCJ3b3JsZGNoYWluXCIgLyogV29ybGRDaGFpbiAqL1xuICAgIH07XG4gICAgc2VuZE1pbmlLaXRFdmVudCh7XG4gICAgICBjb21tYW5kOiBcInBheVwiIC8qIFBheSAqLyxcbiAgICAgIHZlcnNpb246IF9NaW5pS2l0Lm1pbmlLaXRDb21tYW5kVmVyc2lvbltcInBheVwiIC8qIFBheSAqL10sXG4gICAgICBwYXlsb2FkOiBldmVudFBheWxvYWRcbiAgICB9KTtcbiAgICByZXR1cm4gZXZlbnRQYXlsb2FkO1xuICB9LFxuICB3YWxsZXRBdXRoOiAocGF5bG9hZCkgPT4ge1xuICAgIGlmICh0eXBlb2Ygd2luZG93ID09PSBcInVuZGVmaW5lZFwiIHx8ICFfTWluaUtpdC5pc0NvbW1hbmRBdmFpbGFibGVbXCJ3YWxsZXQtYXV0aFwiIC8qIFdhbGxldEF1dGggKi9dKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICBcIid3YWxsZXRBdXRoJyBjb21tYW5kIGlzIHVuYXZhaWxhYmxlLiBDaGVjayBNaW5pS2l0Lmluc3RhbGwoKSBvciB1cGRhdGUgdGhlIGFwcCB2ZXJzaW9uXCJcbiAgICAgICk7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgY29uc3QgdmFsaWRhdGlvblJlc3VsdCA9IHZhbGlkYXRlV2FsbGV0QXV0aENvbW1hbmRJbnB1dChwYXlsb2FkKTtcbiAgICBpZiAoIXZhbGlkYXRpb25SZXN1bHQudmFsaWQpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgIFwiRmFpbGVkIHRvIHZhbGlkYXRlIHdhbGxldCBhdXRoIGlucHV0OlxcblxcbiAtLT5cIixcbiAgICAgICAgdmFsaWRhdGlvblJlc3VsdC5tZXNzYWdlXG4gICAgICApO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGxldCBwcm90b2NvbCA9IG51bGw7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGN1cnJlbnRVcmwgPSBuZXcgVVJMKHdpbmRvdy5sb2NhdGlvbi5ocmVmKTtcbiAgICAgIHByb3RvY29sID0gY3VycmVudFVybC5wcm90b2NvbC5zcGxpdChcIjpcIilbMF07XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJGYWlsZWQgdG8gZ2V0IGN1cnJlbnQgVVJMXCIsIGVycm9yKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBjb25zdCBzaXdlTWVzc2FnZSA9IGdlbmVyYXRlU2l3ZU1lc3NhZ2Uoe1xuICAgICAgc2NoZW1lOiBwcm90b2NvbCxcbiAgICAgIGRvbWFpbjogd2luZG93LmxvY2F0aW9uLmhvc3QsXG4gICAgICBzdGF0ZW1lbnQ6IHBheWxvYWQuc3RhdGVtZW50ID8/IHZvaWQgMCxcbiAgICAgIHVyaTogd2luZG93LmxvY2F0aW9uLmhyZWYsXG4gICAgICB2ZXJzaW9uOiBcIjFcIixcbiAgICAgIGNoYWluX2lkOiA0ODAsXG4gICAgICBub25jZTogcGF5bG9hZC5ub25jZSxcbiAgICAgIGlzc3VlZF9hdDogKC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpKS50b0lTT1N0cmluZygpLFxuICAgICAgZXhwaXJhdGlvbl90aW1lOiBwYXlsb2FkLmV4cGlyYXRpb25UaW1lPy50b0lTT1N0cmluZygpID8/IHZvaWQgMCxcbiAgICAgIG5vdF9iZWZvcmU6IHBheWxvYWQubm90QmVmb3JlPy50b0lTT1N0cmluZygpID8/IHZvaWQgMCxcbiAgICAgIHJlcXVlc3RfaWQ6IHBheWxvYWQucmVxdWVzdElkID8/IHZvaWQgMFxuICAgIH0pO1xuICAgIGNvbnN0IHdhbGxldEF1dGhQYXlsb2FkID0geyBzaXdlTWVzc2FnZSB9O1xuICAgIGNvbnN0IHdhbGxldEF1dGhWZXJzaW9uID0gX01pbmlLaXQudXNlci53b3JsZEFwcFZlcnNpb24gJiYgX01pbmlLaXQudXNlci53b3JsZEFwcFZlcnNpb24gPiAyMDg3OTAwID8gX01pbmlLaXQubWluaUtpdENvbW1hbmRWZXJzaW9uW1wid2FsbGV0LWF1dGhcIiAvKiBXYWxsZXRBdXRoICovXSA6IDE7XG4gICAgc2VuZE1pbmlLaXRFdmVudCh7XG4gICAgICBjb21tYW5kOiBcIndhbGxldC1hdXRoXCIgLyogV2FsbGV0QXV0aCAqLyxcbiAgICAgIHZlcnNpb246IHdhbGxldEF1dGhWZXJzaW9uLFxuICAgICAgcGF5bG9hZDogd2FsbGV0QXV0aFBheWxvYWRcbiAgICB9KTtcbiAgICByZXR1cm4gd2FsbGV0QXV0aFBheWxvYWQ7XG4gIH0sXG4gIHNlbmRUcmFuc2FjdGlvbjogKHBheWxvYWQpID0+IHtcbiAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gXCJ1bmRlZmluZWRcIiB8fCAhX01pbmlLaXQuaXNDb21tYW5kQXZhaWxhYmxlW1wic2VuZC10cmFuc2FjdGlvblwiIC8qIFNlbmRUcmFuc2FjdGlvbiAqL10pIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgIFwiJ3NlbmRUcmFuc2FjdGlvbicgY29tbWFuZCBpcyB1bmF2YWlsYWJsZS4gQ2hlY2sgTWluaUtpdC5pbnN0YWxsKCkgb3IgdXBkYXRlIHRoZSBhcHAgdmVyc2lvblwiXG4gICAgICApO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHBheWxvYWQuZm9ybWF0UGF5bG9hZCA9IHBheWxvYWQuZm9ybWF0UGF5bG9hZCAhPT0gZmFsc2U7XG4gICAgY29uc3QgdmFsaWRhdGVkUGF5bG9hZCA9IHZhbGlkYXRlU2VuZFRyYW5zYWN0aW9uUGF5bG9hZChwYXlsb2FkKTtcbiAgICBzZW5kTWluaUtpdEV2ZW50KHtcbiAgICAgIGNvbW1hbmQ6IFwic2VuZC10cmFuc2FjdGlvblwiIC8qIFNlbmRUcmFuc2FjdGlvbiAqLyxcbiAgICAgIHZlcnNpb246IF9NaW5pS2l0Lm1pbmlLaXRDb21tYW5kVmVyc2lvbltcInNlbmQtdHJhbnNhY3Rpb25cIiAvKiBTZW5kVHJhbnNhY3Rpb24gKi9dLFxuICAgICAgcGF5bG9hZDogdmFsaWRhdGVkUGF5bG9hZFxuICAgIH0pO1xuICAgIHJldHVybiB2YWxpZGF0ZWRQYXlsb2FkO1xuICB9LFxuICBzaWduTWVzc2FnZTogKHBheWxvYWQpID0+IHtcbiAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gXCJ1bmRlZmluZWRcIiB8fCAhX01pbmlLaXQuaXNDb21tYW5kQXZhaWxhYmxlW1wic2lnbi1tZXNzYWdlXCIgLyogU2lnbk1lc3NhZ2UgKi9dKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICBcIidzaWduTWVzc2FnZScgY29tbWFuZCBpcyB1bmF2YWlsYWJsZS4gQ2hlY2sgTWluaUtpdC5pbnN0YWxsKCkgb3IgdXBkYXRlIHRoZSBhcHAgdmVyc2lvblwiXG4gICAgICApO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHNlbmRNaW5pS2l0RXZlbnQoe1xuICAgICAgY29tbWFuZDogXCJzaWduLW1lc3NhZ2VcIiAvKiBTaWduTWVzc2FnZSAqLyxcbiAgICAgIHZlcnNpb246IF9NaW5pS2l0Lm1pbmlLaXRDb21tYW5kVmVyc2lvbltcInNpZ24tbWVzc2FnZVwiIC8qIFNpZ25NZXNzYWdlICovXSxcbiAgICAgIHBheWxvYWRcbiAgICB9KTtcbiAgICByZXR1cm4gcGF5bG9hZDtcbiAgfSxcbiAgc2lnblR5cGVkRGF0YTogKHBheWxvYWQpID0+IHtcbiAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gXCJ1bmRlZmluZWRcIiB8fCAhX01pbmlLaXQuaXNDb21tYW5kQXZhaWxhYmxlW1wic2lnbi10eXBlZC1kYXRhXCIgLyogU2lnblR5cGVkRGF0YSAqL10pIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgIFwiJ3NpZ25UeXBlZERhdGEnIGNvbW1hbmQgaXMgdW5hdmFpbGFibGUuIENoZWNrIE1pbmlLaXQuaW5zdGFsbCgpIG9yIHVwZGF0ZSB0aGUgYXBwIHZlcnNpb25cIlxuICAgICAgKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBpZiAoIXBheWxvYWQuY2hhaW5JZCkge1xuICAgICAgcGF5bG9hZC5jaGFpbklkID0gNDgwO1xuICAgIH1cbiAgICBzZW5kTWluaUtpdEV2ZW50KHtcbiAgICAgIGNvbW1hbmQ6IFwic2lnbi10eXBlZC1kYXRhXCIgLyogU2lnblR5cGVkRGF0YSAqLyxcbiAgICAgIHZlcnNpb246IF9NaW5pS2l0Lm1pbmlLaXRDb21tYW5kVmVyc2lvbltcInNpZ24tdHlwZWQtZGF0YVwiIC8qIFNpZ25UeXBlZERhdGEgKi9dLFxuICAgICAgcGF5bG9hZFxuICAgIH0pO1xuICAgIHJldHVybiBwYXlsb2FkO1xuICB9LFxuICBzaGFyZUNvbnRhY3RzOiAocGF5bG9hZCkgPT4ge1xuICAgIGlmICh0eXBlb2Ygd2luZG93ID09PSBcInVuZGVmaW5lZFwiIHx8ICFfTWluaUtpdC5pc0NvbW1hbmRBdmFpbGFibGVbXCJzaGFyZS1jb250YWN0c1wiIC8qIFNoYXJlQ29udGFjdHMgKi9dKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICBcIidzaGFyZUNvbnRhY3RzJyBjb21tYW5kIGlzIHVuYXZhaWxhYmxlLiBDaGVjayBNaW5pS2l0Lmluc3RhbGwoKSBvciB1cGRhdGUgdGhlIGFwcCB2ZXJzaW9uXCJcbiAgICAgICk7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgc2VuZE1pbmlLaXRFdmVudCh7XG4gICAgICBjb21tYW5kOiBcInNoYXJlLWNvbnRhY3RzXCIgLyogU2hhcmVDb250YWN0cyAqLyxcbiAgICAgIHZlcnNpb246IF9NaW5pS2l0Lm1pbmlLaXRDb21tYW5kVmVyc2lvbltcInNoYXJlLWNvbnRhY3RzXCIgLyogU2hhcmVDb250YWN0cyAqL10sXG4gICAgICBwYXlsb2FkXG4gICAgfSk7XG4gICAgcmV0dXJuIHBheWxvYWQ7XG4gIH0sXG4gIHJlcXVlc3RQZXJtaXNzaW9uOiAocGF5bG9hZCkgPT4ge1xuICAgIGlmICh0eXBlb2Ygd2luZG93ID09PSBcInVuZGVmaW5lZFwiIHx8ICFfTWluaUtpdC5pc0NvbW1hbmRBdmFpbGFibGVbXCJyZXF1ZXN0LXBlcm1pc3Npb25cIiAvKiBSZXF1ZXN0UGVybWlzc2lvbiAqL10pIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgIFwiJ3JlcXVlc3RQZXJtaXNzaW9uJyBjb21tYW5kIGlzIHVuYXZhaWxhYmxlLiBDaGVjayBNaW5pS2l0Lmluc3RhbGwoKSBvciB1cGRhdGUgdGhlIGFwcCB2ZXJzaW9uXCJcbiAgICAgICk7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgc2VuZE1pbmlLaXRFdmVudCh7XG4gICAgICBjb21tYW5kOiBcInJlcXVlc3QtcGVybWlzc2lvblwiIC8qIFJlcXVlc3RQZXJtaXNzaW9uICovLFxuICAgICAgdmVyc2lvbjogX01pbmlLaXQubWluaUtpdENvbW1hbmRWZXJzaW9uW1wicmVxdWVzdC1wZXJtaXNzaW9uXCIgLyogUmVxdWVzdFBlcm1pc3Npb24gKi9dLFxuICAgICAgcGF5bG9hZFxuICAgIH0pO1xuICAgIHJldHVybiBwYXlsb2FkO1xuICB9LFxuICBnZXRQZXJtaXNzaW9uczogKCkgPT4ge1xuICAgIGlmICh0eXBlb2Ygd2luZG93ID09PSBcInVuZGVmaW5lZFwiIHx8ICFfTWluaUtpdC5pc0NvbW1hbmRBdmFpbGFibGVbXCJnZXQtcGVybWlzc2lvbnNcIiAvKiBHZXRQZXJtaXNzaW9ucyAqL10pIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgIFwiJ2dldFBlcm1pc3Npb25zJyBjb21tYW5kIGlzIHVuYXZhaWxhYmxlLiBDaGVjayBNaW5pS2l0Lmluc3RhbGwoKSBvciB1cGRhdGUgdGhlIGFwcCB2ZXJzaW9uXCJcbiAgICAgICk7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgc2VuZE1pbmlLaXRFdmVudCh7XG4gICAgICBjb21tYW5kOiBcImdldC1wZXJtaXNzaW9uc1wiIC8qIEdldFBlcm1pc3Npb25zICovLFxuICAgICAgdmVyc2lvbjogX01pbmlLaXQubWluaUtpdENvbW1hbmRWZXJzaW9uW1wiZ2V0LXBlcm1pc3Npb25zXCIgLyogR2V0UGVybWlzc2lvbnMgKi9dLFxuICAgICAgcGF5bG9hZDoge31cbiAgICB9KTtcbiAgICByZXR1cm4ge1xuICAgICAgc3RhdHVzOiBcInNlbnRcIlxuICAgIH07XG4gIH0sXG4gIHNlbmRIYXB0aWNGZWVkYmFjazogKHBheWxvYWQpID0+IHtcbiAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gXCJ1bmRlZmluZWRcIiB8fCAhX01pbmlLaXQuaXNDb21tYW5kQXZhaWxhYmxlW1wic2VuZC1oYXB0aWMtZmVlZGJhY2tcIiAvKiBTZW5kSGFwdGljRmVlZGJhY2sgKi9dKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICBcIidzZW5kSGFwdGljRmVlZGJhY2snIGNvbW1hbmQgaXMgdW5hdmFpbGFibGUuIENoZWNrIE1pbmlLaXQuaW5zdGFsbCgpIG9yIHVwZGF0ZSB0aGUgYXBwIHZlcnNpb25cIlxuICAgICAgKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBzZW5kTWluaUtpdEV2ZW50KHtcbiAgICAgIGNvbW1hbmQ6IFwic2VuZC1oYXB0aWMtZmVlZGJhY2tcIiAvKiBTZW5kSGFwdGljRmVlZGJhY2sgKi8sXG4gICAgICB2ZXJzaW9uOiBfTWluaUtpdC5taW5pS2l0Q29tbWFuZFZlcnNpb25bXCJzZW5kLWhhcHRpYy1mZWVkYmFja1wiIC8qIFNlbmRIYXB0aWNGZWVkYmFjayAqL10sXG4gICAgICBwYXlsb2FkXG4gICAgfSk7XG4gICAgcmV0dXJuIHBheWxvYWQ7XG4gIH0sXG4gIC8vIFdlIHJldHVybiBzaGFyZSBpbnB1dCBoZXJlIGJlY2F1c2UgdGhlIHBheWxvYWQgaXMgZm9ybWF0dGVkIGFzeW5jaHJvbm91c2x5XG4gIHNoYXJlOiAocGF5bG9hZCkgPT4ge1xuICAgIGlmICh0eXBlb2Ygd2luZG93ID09PSBcInVuZGVmaW5lZFwiIHx8ICFfTWluaUtpdC5pc0NvbW1hbmRBdmFpbGFibGVbXCJzaGFyZVwiIC8qIFNoYXJlICovXSkge1xuICAgICAgY29uc29sZS5lcnJvcihcbiAgICAgICAgXCInc2hhcmUnIGNvbW1hbmQgaXMgdW5hdmFpbGFibGUuIENoZWNrIE1pbmlLaXQuaW5zdGFsbCgpIG9yIHVwZGF0ZSB0aGUgYXBwIHZlcnNpb25cIlxuICAgICAgKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBpZiAoX01pbmlLaXQuZGV2aWNlUHJvcGVydGllcy5kZXZpY2VPUyA9PT0gXCJpb3NcIiAmJiB0eXBlb2YgbmF2aWdhdG9yICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICBzZW5kTWluaUtpdEV2ZW50KHtcbiAgICAgICAgY29tbWFuZDogXCJzaGFyZVwiIC8qIFNoYXJlICovLFxuICAgICAgICB2ZXJzaW9uOiBfTWluaUtpdC5taW5pS2l0Q29tbWFuZFZlcnNpb25bXCJzaGFyZVwiIC8qIFNoYXJlICovXSxcbiAgICAgICAgcGF5bG9hZFxuICAgICAgfSk7XG4gICAgICBuYXZpZ2F0b3Iuc2hhcmUocGF5bG9hZCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZvcm1hdFNoYXJlSW5wdXQocGF5bG9hZCkudGhlbigoZm9ybWF0dGVkUmVzdWx0KSA9PiB7XG4gICAgICAgIHNlbmRNaW5pS2l0RXZlbnQoe1xuICAgICAgICAgIGNvbW1hbmQ6IFwic2hhcmVcIiAvKiBTaGFyZSAqLyxcbiAgICAgICAgICB2ZXJzaW9uOiBfTWluaUtpdC5taW5pS2l0Q29tbWFuZFZlcnNpb25bXCJzaGFyZVwiIC8qIFNoYXJlICovXSxcbiAgICAgICAgICBwYXlsb2FkOiBmb3JtYXR0ZWRSZXN1bHRcbiAgICAgICAgfSk7XG4gICAgICB9KS5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkZhaWxlZCB0byBmb3JtYXQgc2hhcmUgaW5wdXRcIiwgZXJyb3IpO1xuICAgICAgfSk7XG4gICAgICBfTWluaUtpdC5zdWJzY3JpYmUoXCJtaW5pYXBwLXNoYXJlXCIgLyogTWluaUFwcFNoYXJlICovLCAocGF5bG9hZDIpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coXCJTaGFyZSBSZXNwb25zZVwiLCBwYXlsb2FkMik7XG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHBheWxvYWQ7XG4gIH0sXG4gIGNoYXQ6IChwYXlsb2FkKSA9PiB7XG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgPT09IFwidW5kZWZpbmVkXCIgfHwgIV9NaW5pS2l0LmlzQ29tbWFuZEF2YWlsYWJsZVtcImNoYXRcIiAvKiBDaGF0ICovXSkge1xuICAgICAgY29uc29sZS5lcnJvcihcbiAgICAgICAgXCInY2hhdCcgY29tbWFuZCBpcyB1bmF2YWlsYWJsZS4gQ2hlY2sgTWluaUtpdC5pbnN0YWxsKCkgb3IgdXBkYXRlIHRoZSBhcHAgdmVyc2lvblwiXG4gICAgICApO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGlmIChwYXlsb2FkLm1lc3NhZ2UubGVuZ3RoID09PSAwKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiJ2NoYXQnIGNvbW1hbmQgcmVxdWlyZXMgYSBub24tZW1wdHkgbWVzc2FnZVwiKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBzZW5kTWluaUtpdEV2ZW50KHtcbiAgICAgIGNvbW1hbmQ6IFwiY2hhdFwiIC8qIENoYXQgKi8sXG4gICAgICB2ZXJzaW9uOiBfTWluaUtpdC5taW5pS2l0Q29tbWFuZFZlcnNpb25bXCJjaGF0XCIgLyogQ2hhdCAqL10sXG4gICAgICBwYXlsb2FkXG4gICAgfSk7XG4gICAgcmV0dXJuIHBheWxvYWQ7XG4gIH1cbn07XG4vKipcbiAqIFRoaXMgb2JqZWN0IGNvbnRhaW5zIGFzeW5jIHZlcnNpb25zIG9mIGFsbCB0aGUgY29tbWFuZHMuXG4gKiBJbnN0ZWFkIG9mIHVzaW5nIGV2ZW50IGxpc3RlbmVycywgeW91IGNhbiBqdXN0IGBhd2FpdGAgdGhlc2UuXG4gKlxuICogVGhleSByZXR1cm4gYSBzdGFuZGFyZGl6ZWQgb2JqZWN0XG4gKlxuICogY29tbWFuZFBheWxvYWQgLSBvYmplY3QgcmV0dXJuZWQgYnkgdGhlIGNvbW1hbmQgZnVuY3Rpb25cbiAqXG4gKiBmaW5hbFBheWxvYWQgLSBvYmplY3QgcmV0dXJuZWQgYnkgdGhlIGV2ZW50IGxpc3RlbmVyLCBvciBpbiBvdGhlciB3b3JkcywgV29ybGRBcHAgcmVzcG9uc2VcbiAqL1xuX01pbmlLaXQuY29tbWFuZHNBc3luYyA9IHtcbiAgdmVyaWZ5OiBhc3luYyAocGF5bG9hZCkgPT4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShhc3luYyAocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IF9NaW5pS2l0LmF3YWl0Q29tbWFuZChcbiAgICAgICAgICBcIm1pbmlhcHAtdmVyaWZ5LWFjdGlvblwiIC8qIE1pbmlBcHBWZXJpZnlBY3Rpb24gKi8sXG4gICAgICAgICAgXCJ2ZXJpZnlcIiAvKiBWZXJpZnkgKi8sXG4gICAgICAgICAgKCkgPT4gX01pbmlLaXQuY29tbWFuZHMudmVyaWZ5KHBheWxvYWQpXG4gICAgICAgICk7XG4gICAgICAgIGlmIChyZXNwb25zZS5maW5hbFBheWxvYWQuc3RhdHVzID09PSBcInN1Y2Nlc3NcIiAmJiByZXNwb25zZS5maW5hbFBheWxvYWQudmVyaWZpY2F0aW9uX2xldmVsID09PSBWZXJpZmljYXRpb25MZXZlbC5PcmIpIHtcbiAgICAgICAgICByZXNwb25zZS5maW5hbFBheWxvYWQucHJvb2YgPSBhd2FpdCBjb21wcmVzc0FuZFBhZFByb29mKFxuICAgICAgICAgICAgcmVzcG9uc2UuZmluYWxQYXlsb2FkLnByb29mXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICByZXNvbHZlKHJlc3BvbnNlKTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICB9XG4gICAgfSk7XG4gIH0sXG4gIHBheTogYXN5bmMgKHBheWxvYWQpID0+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoYXN5bmMgKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBfTWluaUtpdC5hd2FpdENvbW1hbmQoXG4gICAgICAgICAgXCJtaW5pYXBwLXBheW1lbnRcIiAvKiBNaW5pQXBwUGF5bWVudCAqLyxcbiAgICAgICAgICBcInBheVwiIC8qIFBheSAqLyxcbiAgICAgICAgICAoKSA9PiBfTWluaUtpdC5jb21tYW5kcy5wYXkocGF5bG9hZClcbiAgICAgICAgKTtcbiAgICAgICAgcmVzb2x2ZShyZXNwb25zZSk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgfVxuICAgIH0pO1xuICB9LFxuICB3YWxsZXRBdXRoOiBhc3luYyAocGF5bG9hZCkgPT4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShhc3luYyAocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IF9NaW5pS2l0LmF3YWl0Q29tbWFuZChcbiAgICAgICAgICBcIm1pbmlhcHAtd2FsbGV0LWF1dGhcIiAvKiBNaW5pQXBwV2FsbGV0QXV0aCAqLyxcbiAgICAgICAgICBcIndhbGxldC1hdXRoXCIgLyogV2FsbGV0QXV0aCAqLyxcbiAgICAgICAgICAoKSA9PiBfTWluaUtpdC5jb21tYW5kcy53YWxsZXRBdXRoKHBheWxvYWQpXG4gICAgICAgICk7XG4gICAgICAgIHJldHVybiByZXNvbHZlKHJlc3BvbnNlKTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICB9XG4gICAgfSk7XG4gIH0sXG4gIHNlbmRUcmFuc2FjdGlvbjogYXN5bmMgKHBheWxvYWQpID0+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoYXN5bmMgKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBfTWluaUtpdC5hd2FpdENvbW1hbmQoXG4gICAgICAgICAgXCJtaW5pYXBwLXNlbmQtdHJhbnNhY3Rpb25cIiAvKiBNaW5pQXBwU2VuZFRyYW5zYWN0aW9uICovLFxuICAgICAgICAgIFwic2VuZC10cmFuc2FjdGlvblwiIC8qIFNlbmRUcmFuc2FjdGlvbiAqLyxcbiAgICAgICAgICAoKSA9PiBfTWluaUtpdC5jb21tYW5kcy5zZW5kVHJhbnNhY3Rpb24ocGF5bG9hZClcbiAgICAgICAgKTtcbiAgICAgICAgcmV0dXJuIHJlc29sdmUocmVzcG9uc2UpO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSxcbiAgc2lnbk1lc3NhZ2U6IGFzeW5jIChwYXlsb2FkKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGFzeW5jIChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgX01pbmlLaXQuYXdhaXRDb21tYW5kKFxuICAgICAgICAgIFwibWluaWFwcC1zaWduLW1lc3NhZ2VcIiAvKiBNaW5pQXBwU2lnbk1lc3NhZ2UgKi8sXG4gICAgICAgICAgXCJzaWduLW1lc3NhZ2VcIiAvKiBTaWduTWVzc2FnZSAqLyxcbiAgICAgICAgICAoKSA9PiBfTWluaUtpdC5jb21tYW5kcy5zaWduTWVzc2FnZShwYXlsb2FkKVxuICAgICAgICApO1xuICAgICAgICByZXR1cm4gcmVzb2x2ZShyZXNwb25zZSk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgfVxuICAgIH0pO1xuICB9LFxuICBzaWduVHlwZWREYXRhOiBhc3luYyAocGF5bG9hZCkgPT4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShhc3luYyAocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IF9NaW5pS2l0LmF3YWl0Q29tbWFuZChcbiAgICAgICAgICBcIm1pbmlhcHAtc2lnbi10eXBlZC1kYXRhXCIgLyogTWluaUFwcFNpZ25UeXBlZERhdGEgKi8sXG4gICAgICAgICAgXCJzaWduLXR5cGVkLWRhdGFcIiAvKiBTaWduVHlwZWREYXRhICovLFxuICAgICAgICAgICgpID0+IF9NaW5pS2l0LmNvbW1hbmRzLnNpZ25UeXBlZERhdGEocGF5bG9hZClcbiAgICAgICAgKTtcbiAgICAgICAgcmV0dXJuIHJlc29sdmUocmVzcG9uc2UpO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSxcbiAgc2hhcmVDb250YWN0czogYXN5bmMgKHBheWxvYWQpID0+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoYXN5bmMgKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBfTWluaUtpdC5hd2FpdENvbW1hbmQoXG4gICAgICAgICAgXCJtaW5pYXBwLXNoYXJlLWNvbnRhY3RzXCIgLyogTWluaUFwcFNoYXJlQ29udGFjdHMgKi8sXG4gICAgICAgICAgXCJzaGFyZS1jb250YWN0c1wiIC8qIFNoYXJlQ29udGFjdHMgKi8sXG4gICAgICAgICAgKCkgPT4gX01pbmlLaXQuY29tbWFuZHMuc2hhcmVDb250YWN0cyhwYXlsb2FkKVxuICAgICAgICApO1xuICAgICAgICByZXR1cm4gcmVzb2x2ZShyZXNwb25zZSk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgfVxuICAgIH0pO1xuICB9LFxuICByZXF1ZXN0UGVybWlzc2lvbjogYXN5bmMgKHBheWxvYWQpID0+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoYXN5bmMgKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBfTWluaUtpdC5hd2FpdENvbW1hbmQoXG4gICAgICAgICAgXCJtaW5pYXBwLXJlcXVlc3QtcGVybWlzc2lvblwiIC8qIE1pbmlBcHBSZXF1ZXN0UGVybWlzc2lvbiAqLyxcbiAgICAgICAgICBcInJlcXVlc3QtcGVybWlzc2lvblwiIC8qIFJlcXVlc3RQZXJtaXNzaW9uICovLFxuICAgICAgICAgICgpID0+IF9NaW5pS2l0LmNvbW1hbmRzLnJlcXVlc3RQZXJtaXNzaW9uKHBheWxvYWQpXG4gICAgICAgICk7XG4gICAgICAgIHJlc29sdmUocmVzcG9uc2UpO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSxcbiAgZ2V0UGVybWlzc2lvbnM6IGFzeW5jICgpID0+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoYXN5bmMgKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBfTWluaUtpdC5hd2FpdENvbW1hbmQoXG4gICAgICAgICAgXCJtaW5pYXBwLWdldC1wZXJtaXNzaW9uc1wiIC8qIE1pbmlBcHBHZXRQZXJtaXNzaW9ucyAqLyxcbiAgICAgICAgICBcImdldC1wZXJtaXNzaW9uc1wiIC8qIEdldFBlcm1pc3Npb25zICovLFxuICAgICAgICAgICgpID0+IF9NaW5pS2l0LmNvbW1hbmRzLmdldFBlcm1pc3Npb25zKClcbiAgICAgICAgKTtcbiAgICAgICAgcmVzb2x2ZShyZXNwb25zZSk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgfVxuICAgIH0pO1xuICB9LFxuICBzZW5kSGFwdGljRmVlZGJhY2s6IGFzeW5jIChwYXlsb2FkKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGFzeW5jIChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgX01pbmlLaXQuYXdhaXRDb21tYW5kKFxuICAgICAgICAgIFwibWluaWFwcC1zZW5kLWhhcHRpYy1mZWVkYmFja1wiIC8qIE1pbmlBcHBTZW5kSGFwdGljRmVlZGJhY2sgKi8sXG4gICAgICAgICAgXCJzZW5kLWhhcHRpYy1mZWVkYmFja1wiIC8qIFNlbmRIYXB0aWNGZWVkYmFjayAqLyxcbiAgICAgICAgICAoKSA9PiBfTWluaUtpdC5jb21tYW5kcy5zZW5kSGFwdGljRmVlZGJhY2socGF5bG9hZClcbiAgICAgICAgKTtcbiAgICAgICAgcmVzb2x2ZShyZXNwb25zZSk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgfVxuICAgIH0pO1xuICB9LFxuICBzaGFyZTogYXN5bmMgKHBheWxvYWQpID0+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoYXN5bmMgKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBfTWluaUtpdC5hd2FpdENvbW1hbmQoXG4gICAgICAgICAgXCJtaW5pYXBwLXNoYXJlXCIgLyogTWluaUFwcFNoYXJlICovLFxuICAgICAgICAgIFwic2hhcmVcIiAvKiBTaGFyZSAqLyxcbiAgICAgICAgICAoKSA9PiBfTWluaUtpdC5jb21tYW5kcy5zaGFyZShwYXlsb2FkKVxuICAgICAgICApO1xuICAgICAgICByZXNvbHZlKHtcbiAgICAgICAgICBjb21tYW5kUGF5bG9hZDogcmVzcG9uc2UuY29tbWFuZFBheWxvYWQsXG4gICAgICAgICAgZmluYWxQYXlsb2FkOiByZXNwb25zZS5maW5hbFBheWxvYWRcbiAgICAgICAgfSk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgfVxuICAgIH0pO1xuICB9LFxuICBjaGF0OiBhc3luYyAocGF5bG9hZCkgPT4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShhc3luYyAocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IF9NaW5pS2l0LmF3YWl0Q29tbWFuZChcbiAgICAgICAgICBcIm1pbmlhcHAtY2hhdFwiIC8qIE1pbmlBcHBDaGF0ICovLFxuICAgICAgICAgIFwiY2hhdFwiIC8qIENoYXQgKi8sXG4gICAgICAgICAgKCkgPT4gX01pbmlLaXQuY29tbWFuZHMuY2hhdChwYXlsb2FkKVxuICAgICAgICApO1xuICAgICAgICByZXNvbHZlKHtcbiAgICAgICAgICBjb21tYW5kUGF5bG9hZDogcmVzcG9uc2UuY29tbWFuZFBheWxvYWQsXG4gICAgICAgICAgZmluYWxQYXlsb2FkOiByZXNwb25zZS5maW5hbFBheWxvYWRcbiAgICAgICAgfSk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59O1xudmFyIE1pbmlLaXQgPSBfTWluaUtpdDtcblxuZXhwb3J0IHtcbiAgVmVyaWZpY2F0aW9uRXJyb3JNZXNzYWdlLFxuICBQYXltZW50RXJyb3JDb2RlcyxcbiAgUGF5bWVudEVycm9yTWVzc2FnZSxcbiAgUGF5bWVudFZhbGlkYXRpb25FcnJvcnMsXG4gIFdhbGxldEF1dGhFcnJvckNvZGVzLFxuICBXYWxsZXRBdXRoRXJyb3JNZXNzYWdlLFxuICBTZW5kVHJhbnNhY3Rpb25FcnJvckNvZGVzLFxuICBTZW5kVHJhbnNhY3Rpb25FcnJvck1lc3NhZ2UsXG4gIFNpZ25NZXNzYWdlRXJyb3JDb2RlcyxcbiAgU2lnbk1lc3NhZ2VFcnJvck1lc3NhZ2UsXG4gIFNpZ25UeXBlZERhdGFFcnJvckNvZGVzLFxuICBTaWduVHlwZWREYXRhRXJyb3JNZXNzYWdlLFxuICBNaW5pS2l0SW5zdGFsbEVycm9yQ29kZXMsXG4gIE1pbmlLaXRJbnN0YWxsRXJyb3JNZXNzYWdlLFxuICBTaGFyZUNvbnRhY3RzRXJyb3JDb2RlcyxcbiAgU2hhcmVDb250YWN0c0Vycm9yTWVzc2FnZSxcbiAgUmVxdWVzdFBlcm1pc3Npb25FcnJvckNvZGVzLFxuICBSZXF1ZXN0UGVybWlzc2lvbkVycm9yTWVzc2FnZSxcbiAgR2V0UGVybWlzc2lvbnNFcnJvckNvZGVzLFxuICBHZXRQZXJtaXNzaW9uc0Vycm9yTWVzc2FnZSxcbiAgU2VuZEhhcHRpY0ZlZWRiYWNrRXJyb3JDb2RlcyxcbiAgU2VuZEhhcHRpY0ZlZWRiYWNrRXJyb3JNZXNzYWdlLFxuICBTaGFyZUZpbGVzRXJyb3JDb2RlcyxcbiAgU2hhcmVGaWxlc0Vycm9yTWVzc2FnZSxcbiAgTWljcm9waG9uZUVycm9yQ29kZXMsXG4gIE1pY3JvcGhvbmVFcnJvck1lc3NhZ2UsXG4gIENoYXRFcnJvckNvZGVzLFxuICBDaGF0RXJyb3JNZXNzYWdlLFxuICBBcHBFcnJvckNvZGVzMiBhcyBBcHBFcnJvckNvZGVzLFxuICBSZXNwb25zZUV2ZW50LFxuICBUb2tlbnMsXG4gIFRva2VuRGVjaW1hbHMsXG4gIE5ldHdvcmssXG4gIHRva2VuVG9EZWNpbWFscyxcbiAgcGFyc2VTaXdlTWVzc2FnZSxcbiAgdmVyaWZ5U2l3ZU1lc3NhZ2UsXG4gIENvbW1hbmQsXG4gIFBlcm1pc3Npb24sXG4gIE1pbmlBcHBMYXVuY2hMb2NhdGlvbixcbiAgbWFwV29ybGRBcHBMYXVuY2hMb2NhdGlvbixcbiAgTWluaUtpdFxufTtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@worldcoin+minikit-js@1.9.9_@types+react@19.2.9_react@19.2.3_typescript@5.9.3_viem@2.23.5_typescript@5.9.3_/node_modules/@worldcoin/minikit-js/build/chunk-VWX7SELF.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/@worldcoin+minikit-js@1.9.9_@types+react@19.2.9_react@19.2.3_typescript@5.9.3_viem@2.23.5_typescript@5.9.3_/node_modules/@worldcoin/minikit-js/build/index.js":
/*!******************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@worldcoin+minikit-js@1.9.9_@types+react@19.2.9_react@19.2.3_typescript@5.9.3_viem@2.23.5_typescript@5.9.3_/node_modules/@worldcoin/minikit-js/build/index.js ***!
  \******************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ChatErrorCodes: () => (/* reexport safe */ _chunk_VWX7SELF_js__WEBPACK_IMPORTED_MODULE_0__.ChatErrorCodes),\n/* harmony export */   ChatErrorMessage: () => (/* reexport safe */ _chunk_VWX7SELF_js__WEBPACK_IMPORTED_MODULE_0__.ChatErrorMessage),\n/* harmony export */   Command: () => (/* reexport safe */ _chunk_VWX7SELF_js__WEBPACK_IMPORTED_MODULE_0__.Command),\n/* harmony export */   GetPermissionsErrorCodes: () => (/* reexport safe */ _chunk_VWX7SELF_js__WEBPACK_IMPORTED_MODULE_0__.GetPermissionsErrorCodes),\n/* harmony export */   GetPermissionsErrorMessage: () => (/* reexport safe */ _chunk_VWX7SELF_js__WEBPACK_IMPORTED_MODULE_0__.GetPermissionsErrorMessage),\n/* harmony export */   MicrophoneErrorCodes: () => (/* reexport safe */ _chunk_VWX7SELF_js__WEBPACK_IMPORTED_MODULE_0__.MicrophoneErrorCodes),\n/* harmony export */   MicrophoneErrorMessage: () => (/* reexport safe */ _chunk_VWX7SELF_js__WEBPACK_IMPORTED_MODULE_0__.MicrophoneErrorMessage),\n/* harmony export */   MiniAppLaunchLocation: () => (/* reexport safe */ _chunk_VWX7SELF_js__WEBPACK_IMPORTED_MODULE_0__.MiniAppLaunchLocation),\n/* harmony export */   MiniKit: () => (/* reexport safe */ _chunk_VWX7SELF_js__WEBPACK_IMPORTED_MODULE_0__.MiniKit),\n/* harmony export */   MiniKitInstallErrorCodes: () => (/* reexport safe */ _chunk_VWX7SELF_js__WEBPACK_IMPORTED_MODULE_0__.MiniKitInstallErrorCodes),\n/* harmony export */   MiniKitInstallErrorMessage: () => (/* reexport safe */ _chunk_VWX7SELF_js__WEBPACK_IMPORTED_MODULE_0__.MiniKitInstallErrorMessage),\n/* harmony export */   Network: () => (/* reexport safe */ _chunk_VWX7SELF_js__WEBPACK_IMPORTED_MODULE_0__.Network),\n/* harmony export */   PaymentErrorCodes: () => (/* reexport safe */ _chunk_VWX7SELF_js__WEBPACK_IMPORTED_MODULE_0__.PaymentErrorCodes),\n/* harmony export */   PaymentErrorMessage: () => (/* reexport safe */ _chunk_VWX7SELF_js__WEBPACK_IMPORTED_MODULE_0__.PaymentErrorMessage),\n/* harmony export */   PaymentValidationErrors: () => (/* reexport safe */ _chunk_VWX7SELF_js__WEBPACK_IMPORTED_MODULE_0__.PaymentValidationErrors),\n/* harmony export */   Permission: () => (/* reexport safe */ _chunk_VWX7SELF_js__WEBPACK_IMPORTED_MODULE_0__.Permission),\n/* harmony export */   RequestPermissionErrorCodes: () => (/* reexport safe */ _chunk_VWX7SELF_js__WEBPACK_IMPORTED_MODULE_0__.RequestPermissionErrorCodes),\n/* harmony export */   RequestPermissionErrorMessage: () => (/* reexport safe */ _chunk_VWX7SELF_js__WEBPACK_IMPORTED_MODULE_0__.RequestPermissionErrorMessage),\n/* harmony export */   ResponseEvent: () => (/* reexport safe */ _chunk_VWX7SELF_js__WEBPACK_IMPORTED_MODULE_0__.ResponseEvent),\n/* harmony export */   SendHapticFeedbackErrorCodes: () => (/* reexport safe */ _chunk_VWX7SELF_js__WEBPACK_IMPORTED_MODULE_0__.SendHapticFeedbackErrorCodes),\n/* harmony export */   SendHapticFeedbackErrorMessage: () => (/* reexport safe */ _chunk_VWX7SELF_js__WEBPACK_IMPORTED_MODULE_0__.SendHapticFeedbackErrorMessage),\n/* harmony export */   SendTransactionErrorCodes: () => (/* reexport safe */ _chunk_VWX7SELF_js__WEBPACK_IMPORTED_MODULE_0__.SendTransactionErrorCodes),\n/* harmony export */   SendTransactionErrorMessage: () => (/* reexport safe */ _chunk_VWX7SELF_js__WEBPACK_IMPORTED_MODULE_0__.SendTransactionErrorMessage),\n/* harmony export */   ShareContactsErrorCodes: () => (/* reexport safe */ _chunk_VWX7SELF_js__WEBPACK_IMPORTED_MODULE_0__.ShareContactsErrorCodes),\n/* harmony export */   ShareContactsErrorMessage: () => (/* reexport safe */ _chunk_VWX7SELF_js__WEBPACK_IMPORTED_MODULE_0__.ShareContactsErrorMessage),\n/* harmony export */   ShareFilesErrorCodes: () => (/* reexport safe */ _chunk_VWX7SELF_js__WEBPACK_IMPORTED_MODULE_0__.ShareFilesErrorCodes),\n/* harmony export */   ShareFilesErrorMessage: () => (/* reexport safe */ _chunk_VWX7SELF_js__WEBPACK_IMPORTED_MODULE_0__.ShareFilesErrorMessage),\n/* harmony export */   SignMessageErrorCodes: () => (/* reexport safe */ _chunk_VWX7SELF_js__WEBPACK_IMPORTED_MODULE_0__.SignMessageErrorCodes),\n/* harmony export */   SignMessageErrorMessage: () => (/* reexport safe */ _chunk_VWX7SELF_js__WEBPACK_IMPORTED_MODULE_0__.SignMessageErrorMessage),\n/* harmony export */   SignTypedDataErrorCodes: () => (/* reexport safe */ _chunk_VWX7SELF_js__WEBPACK_IMPORTED_MODULE_0__.SignTypedDataErrorCodes),\n/* harmony export */   SignTypedDataErrorMessage: () => (/* reexport safe */ _chunk_VWX7SELF_js__WEBPACK_IMPORTED_MODULE_0__.SignTypedDataErrorMessage),\n/* harmony export */   TokenDecimals: () => (/* reexport safe */ _chunk_VWX7SELF_js__WEBPACK_IMPORTED_MODULE_0__.TokenDecimals),\n/* harmony export */   Tokens: () => (/* reexport safe */ _chunk_VWX7SELF_js__WEBPACK_IMPORTED_MODULE_0__.Tokens),\n/* harmony export */   VerificationErrorCodes: () => (/* reexport safe */ _chunk_VWX7SELF_js__WEBPACK_IMPORTED_MODULE_0__.AppErrorCodes),\n/* harmony export */   VerificationErrorMessage: () => (/* reexport safe */ _chunk_VWX7SELF_js__WEBPACK_IMPORTED_MODULE_0__.VerificationErrorMessage),\n/* harmony export */   VerificationLevel: () => (/* reexport safe */ _worldcoin_idkit_core__WEBPACK_IMPORTED_MODULE_1__.VerificationLevel),\n/* harmony export */   WalletAuthErrorCodes: () => (/* reexport safe */ _chunk_VWX7SELF_js__WEBPACK_IMPORTED_MODULE_0__.WalletAuthErrorCodes),\n/* harmony export */   WalletAuthErrorMessage: () => (/* reexport safe */ _chunk_VWX7SELF_js__WEBPACK_IMPORTED_MODULE_0__.WalletAuthErrorMessage),\n/* harmony export */   getIsUserVerified: () => (/* binding */ getIsUserVerified),\n/* harmony export */   mapWorldAppLaunchLocation: () => (/* reexport safe */ _chunk_VWX7SELF_js__WEBPACK_IMPORTED_MODULE_0__.mapWorldAppLaunchLocation),\n/* harmony export */   parseSiweMessage: () => (/* reexport safe */ _chunk_VWX7SELF_js__WEBPACK_IMPORTED_MODULE_0__.parseSiweMessage),\n/* harmony export */   tokenToDecimals: () => (/* reexport safe */ _chunk_VWX7SELF_js__WEBPACK_IMPORTED_MODULE_0__.tokenToDecimals),\n/* harmony export */   verifyCloudProof: () => (/* reexport safe */ _worldcoin_idkit_core_backend__WEBPACK_IMPORTED_MODULE_2__.verifyCloudProof),\n/* harmony export */   verifySiweMessage: () => (/* reexport safe */ _chunk_VWX7SELF_js__WEBPACK_IMPORTED_MODULE_0__.verifySiweMessage)\n/* harmony export */ });\n/* harmony import */ var _chunk_VWX7SELF_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./chunk-VWX7SELF.js */ \"(ssr)/./node_modules/.pnpm/@worldcoin+minikit-js@1.9.9_@types+react@19.2.9_react@19.2.3_typescript@5.9.3_viem@2.23.5_typescript@5.9.3_/node_modules/@worldcoin/minikit-js/build/chunk-VWX7SELF.js\");\n/* harmony import */ var _worldcoin_idkit_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @worldcoin/idkit-core */ \"(ssr)/./node_modules/.pnpm/@worldcoin+idkit-core@2.1.0_@types+react@19.2.9_react@19.2.3_typescript@5.9.3/node_modules/@worldcoin/idkit-core/build/index.js\");\n/* harmony import */ var _worldcoin_idkit_core_backend__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @worldcoin/idkit-core/backend */ \"(ssr)/./node_modules/.pnpm/@worldcoin+idkit-core@2.1.0_@types+react@19.2.9_react@19.2.3_typescript@5.9.3/node_modules/@worldcoin/idkit-core/build/lib/backend.js\");\n/* harmony import */ var viem__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! viem */ \"(ssr)/./node_modules/.pnpm/viem@2.23.5_typescript@5.9.3/node_modules/viem/_esm/clients/createPublicClient.js\");\n/* harmony import */ var viem__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! viem */ \"(ssr)/./node_modules/.pnpm/viem@2.23.5_typescript@5.9.3/node_modules/viem/_esm/clients/transports/http.js\");\n/* harmony import */ var viem_chains__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! viem/chains */ \"(ssr)/./node_modules/.pnpm/viem@2.23.5_typescript@5.9.3/node_modules/viem/_esm/chains/definitions/worldchain.js\");\n\n\n// index.ts\n\n\n\n// helpers/address-book/index.ts\n\n\nvar worldIdAddressBookContractAddress = \"0x57b930D551e677CC36e2fA036Ae2fe8FdaE0330D\";\nvar addressVerifiedUntilAbi = [\n  {\n    inputs: [\n      {\n        internalType: \"address\",\n        name: \"\",\n        type: \"address\"\n      }\n    ],\n    name: \"addressVerifiedUntil\",\n    outputs: [\n      {\n        internalType: \"uint256\",\n        name: \"\",\n        type: \"uint256\"\n      }\n    ],\n    stateMutability: \"view\",\n    type: \"function\"\n  }\n];\nvar getIsUserVerified = async (walletAddress, rpcUrl) => {\n  const publicClient = (0,viem__WEBPACK_IMPORTED_MODULE_3__.createPublicClient)({\n    chain: viem_chains__WEBPACK_IMPORTED_MODULE_4__.worldchain,\n    transport: (0,viem__WEBPACK_IMPORTED_MODULE_5__.http)(\n      rpcUrl || \"https://worldchain-mainnet.g.alchemy.com/public\"\n    )\n  });\n  try {\n    const verifiedUntilResponse = await publicClient.readContract({\n      address: worldIdAddressBookContractAddress,\n      abi: addressVerifiedUntilAbi,\n      functionName: \"addressVerifiedUntil\",\n      args: [walletAddress]\n    });\n    const verifiedUntil = Number(verifiedUntilResponse.toString());\n    if (!Number.isFinite(verifiedUntil)) {\n      console.warn(\"Invalid verifiedUntil value:\", verifiedUntil);\n      return false;\n    }\n    const currentTime = Math.floor(Date.now() / 1e3);\n    return verifiedUntil > currentTime;\n  } catch (error) {\n    console.error(\"Error verifying user:\", error);\n    return false;\n  }\n};\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQHdvcmxkY29pbittaW5pa2l0LWpzQDEuOS45X0B0eXBlcytyZWFjdEAxOS4yLjlfcmVhY3RAMTkuMi4zX3R5cGVzY3JpcHRANS45LjNfdmllbUAyLjIzLjVfdHlwZXNjcmlwdEA1LjkuM18vbm9kZV9tb2R1bGVzL0B3b3JsZGNvaW4vbWluaWtpdC1qcy9idWlsZC9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQTBDNkI7O0FBRTdCO0FBQzBEO0FBR25COztBQUV2QztBQUNnRDtBQUNQO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsd0RBQWtCO0FBQ3pDLFdBQVcsbURBQVU7QUFDckIsZUFBZSwwQ0FBSTtBQUNuQjtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQThDRSIsInNvdXJjZXMiOlsiL1VzZXJzL2pvbmd3b29ra2ltL0Rlc2t0b3Avd29ybGQtY29tbXVuaXR5L2Zyb250ZW5kL25vZGVfbW9kdWxlcy8ucG5wbS9Ad29ybGRjb2luK21pbmlraXQtanNAMS45LjlfQHR5cGVzK3JlYWN0QDE5LjIuOV9yZWFjdEAxOS4yLjNfdHlwZXNjcmlwdEA1LjkuM192aWVtQDIuMjMuNV90eXBlc2NyaXB0QDUuOS4zXy9ub2RlX21vZHVsZXMvQHdvcmxkY29pbi9taW5pa2l0LWpzL2J1aWxkL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIEFwcEVycm9yQ29kZXMsXG4gIENoYXRFcnJvckNvZGVzLFxuICBDaGF0RXJyb3JNZXNzYWdlLFxuICBDb21tYW5kLFxuICBHZXRQZXJtaXNzaW9uc0Vycm9yQ29kZXMsXG4gIEdldFBlcm1pc3Npb25zRXJyb3JNZXNzYWdlLFxuICBNaWNyb3Bob25lRXJyb3JDb2RlcyxcbiAgTWljcm9waG9uZUVycm9yTWVzc2FnZSxcbiAgTWluaUFwcExhdW5jaExvY2F0aW9uLFxuICBNaW5pS2l0LFxuICBNaW5pS2l0SW5zdGFsbEVycm9yQ29kZXMsXG4gIE1pbmlLaXRJbnN0YWxsRXJyb3JNZXNzYWdlLFxuICBOZXR3b3JrLFxuICBQYXltZW50RXJyb3JDb2RlcyxcbiAgUGF5bWVudEVycm9yTWVzc2FnZSxcbiAgUGF5bWVudFZhbGlkYXRpb25FcnJvcnMsXG4gIFBlcm1pc3Npb24sXG4gIFJlcXVlc3RQZXJtaXNzaW9uRXJyb3JDb2RlcyxcbiAgUmVxdWVzdFBlcm1pc3Npb25FcnJvck1lc3NhZ2UsXG4gIFJlc3BvbnNlRXZlbnQsXG4gIFNlbmRIYXB0aWNGZWVkYmFja0Vycm9yQ29kZXMsXG4gIFNlbmRIYXB0aWNGZWVkYmFja0Vycm9yTWVzc2FnZSxcbiAgU2VuZFRyYW5zYWN0aW9uRXJyb3JDb2RlcyxcbiAgU2VuZFRyYW5zYWN0aW9uRXJyb3JNZXNzYWdlLFxuICBTaGFyZUNvbnRhY3RzRXJyb3JDb2RlcyxcbiAgU2hhcmVDb250YWN0c0Vycm9yTWVzc2FnZSxcbiAgU2hhcmVGaWxlc0Vycm9yQ29kZXMsXG4gIFNoYXJlRmlsZXNFcnJvck1lc3NhZ2UsXG4gIFNpZ25NZXNzYWdlRXJyb3JDb2RlcyxcbiAgU2lnbk1lc3NhZ2VFcnJvck1lc3NhZ2UsXG4gIFNpZ25UeXBlZERhdGFFcnJvckNvZGVzLFxuICBTaWduVHlwZWREYXRhRXJyb3JNZXNzYWdlLFxuICBUb2tlbkRlY2ltYWxzLFxuICBUb2tlbnMsXG4gIFZlcmlmaWNhdGlvbkVycm9yTWVzc2FnZSxcbiAgV2FsbGV0QXV0aEVycm9yQ29kZXMsXG4gIFdhbGxldEF1dGhFcnJvck1lc3NhZ2UsXG4gIG1hcFdvcmxkQXBwTGF1bmNoTG9jYXRpb24sXG4gIHBhcnNlU2l3ZU1lc3NhZ2UsXG4gIHRva2VuVG9EZWNpbWFscyxcbiAgdmVyaWZ5U2l3ZU1lc3NhZ2Vcbn0gZnJvbSBcIi4vY2h1bmstVldYN1NFTEYuanNcIjtcblxuLy8gaW5kZXgudHNcbmltcG9ydCB7IFZlcmlmaWNhdGlvbkxldmVsIH0gZnJvbSBcIkB3b3JsZGNvaW4vaWRraXQtY29yZVwiO1xuaW1wb3J0IHtcbiAgdmVyaWZ5Q2xvdWRQcm9vZlxufSBmcm9tIFwiQHdvcmxkY29pbi9pZGtpdC1jb3JlL2JhY2tlbmRcIjtcblxuLy8gaGVscGVycy9hZGRyZXNzLWJvb2svaW5kZXgudHNcbmltcG9ydCB7IGNyZWF0ZVB1YmxpY0NsaWVudCwgaHR0cCB9IGZyb20gXCJ2aWVtXCI7XG5pbXBvcnQgeyB3b3JsZGNoYWluIH0gZnJvbSBcInZpZW0vY2hhaW5zXCI7XG52YXIgd29ybGRJZEFkZHJlc3NCb29rQ29udHJhY3RBZGRyZXNzID0gXCIweDU3YjkzMEQ1NTFlNjc3Q0MzNmUyZkEwMzZBZTJmZThGZGFFMDMzMERcIjtcbnZhciBhZGRyZXNzVmVyaWZpZWRVbnRpbEFiaSA9IFtcbiAge1xuICAgIGlucHV0czogW1xuICAgICAge1xuICAgICAgICBpbnRlcm5hbFR5cGU6IFwiYWRkcmVzc1wiLFxuICAgICAgICBuYW1lOiBcIlwiLFxuICAgICAgICB0eXBlOiBcImFkZHJlc3NcIlxuICAgICAgfVxuICAgIF0sXG4gICAgbmFtZTogXCJhZGRyZXNzVmVyaWZpZWRVbnRpbFwiLFxuICAgIG91dHB1dHM6IFtcbiAgICAgIHtcbiAgICAgICAgaW50ZXJuYWxUeXBlOiBcInVpbnQyNTZcIixcbiAgICAgICAgbmFtZTogXCJcIixcbiAgICAgICAgdHlwZTogXCJ1aW50MjU2XCJcbiAgICAgIH1cbiAgICBdLFxuICAgIHN0YXRlTXV0YWJpbGl0eTogXCJ2aWV3XCIsXG4gICAgdHlwZTogXCJmdW5jdGlvblwiXG4gIH1cbl07XG52YXIgZ2V0SXNVc2VyVmVyaWZpZWQgPSBhc3luYyAod2FsbGV0QWRkcmVzcywgcnBjVXJsKSA9PiB7XG4gIGNvbnN0IHB1YmxpY0NsaWVudCA9IGNyZWF0ZVB1YmxpY0NsaWVudCh7XG4gICAgY2hhaW46IHdvcmxkY2hhaW4sXG4gICAgdHJhbnNwb3J0OiBodHRwKFxuICAgICAgcnBjVXJsIHx8IFwiaHR0cHM6Ly93b3JsZGNoYWluLW1haW5uZXQuZy5hbGNoZW15LmNvbS9wdWJsaWNcIlxuICAgIClcbiAgfSk7XG4gIHRyeSB7XG4gICAgY29uc3QgdmVyaWZpZWRVbnRpbFJlc3BvbnNlID0gYXdhaXQgcHVibGljQ2xpZW50LnJlYWRDb250cmFjdCh7XG4gICAgICBhZGRyZXNzOiB3b3JsZElkQWRkcmVzc0Jvb2tDb250cmFjdEFkZHJlc3MsXG4gICAgICBhYmk6IGFkZHJlc3NWZXJpZmllZFVudGlsQWJpLFxuICAgICAgZnVuY3Rpb25OYW1lOiBcImFkZHJlc3NWZXJpZmllZFVudGlsXCIsXG4gICAgICBhcmdzOiBbd2FsbGV0QWRkcmVzc11cbiAgICB9KTtcbiAgICBjb25zdCB2ZXJpZmllZFVudGlsID0gTnVtYmVyKHZlcmlmaWVkVW50aWxSZXNwb25zZS50b1N0cmluZygpKTtcbiAgICBpZiAoIU51bWJlci5pc0Zpbml0ZSh2ZXJpZmllZFVudGlsKSkge1xuICAgICAgY29uc29sZS53YXJuKFwiSW52YWxpZCB2ZXJpZmllZFVudGlsIHZhbHVlOlwiLCB2ZXJpZmllZFVudGlsKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgY29uc3QgY3VycmVudFRpbWUgPSBNYXRoLmZsb29yKERhdGUubm93KCkgLyAxZTMpO1xuICAgIHJldHVybiB2ZXJpZmllZFVudGlsID4gY3VycmVudFRpbWU7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIHZlcmlmeWluZyB1c2VyOlwiLCBlcnJvcik7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59O1xuZXhwb3J0IHtcbiAgQ2hhdEVycm9yQ29kZXMsXG4gIENoYXRFcnJvck1lc3NhZ2UsXG4gIENvbW1hbmQsXG4gIEdldFBlcm1pc3Npb25zRXJyb3JDb2RlcyxcbiAgR2V0UGVybWlzc2lvbnNFcnJvck1lc3NhZ2UsXG4gIE1pY3JvcGhvbmVFcnJvckNvZGVzLFxuICBNaWNyb3Bob25lRXJyb3JNZXNzYWdlLFxuICBNaW5pQXBwTGF1bmNoTG9jYXRpb24sXG4gIE1pbmlLaXQsXG4gIE1pbmlLaXRJbnN0YWxsRXJyb3JDb2RlcyxcbiAgTWluaUtpdEluc3RhbGxFcnJvck1lc3NhZ2UsXG4gIE5ldHdvcmssXG4gIFBheW1lbnRFcnJvckNvZGVzLFxuICBQYXltZW50RXJyb3JNZXNzYWdlLFxuICBQYXltZW50VmFsaWRhdGlvbkVycm9ycyxcbiAgUGVybWlzc2lvbixcbiAgUmVxdWVzdFBlcm1pc3Npb25FcnJvckNvZGVzLFxuICBSZXF1ZXN0UGVybWlzc2lvbkVycm9yTWVzc2FnZSxcbiAgUmVzcG9uc2VFdmVudCxcbiAgU2VuZEhhcHRpY0ZlZWRiYWNrRXJyb3JDb2RlcyxcbiAgU2VuZEhhcHRpY0ZlZWRiYWNrRXJyb3JNZXNzYWdlLFxuICBTZW5kVHJhbnNhY3Rpb25FcnJvckNvZGVzLFxuICBTZW5kVHJhbnNhY3Rpb25FcnJvck1lc3NhZ2UsXG4gIFNoYXJlQ29udGFjdHNFcnJvckNvZGVzLFxuICBTaGFyZUNvbnRhY3RzRXJyb3JNZXNzYWdlLFxuICBTaGFyZUZpbGVzRXJyb3JDb2RlcyxcbiAgU2hhcmVGaWxlc0Vycm9yTWVzc2FnZSxcbiAgU2lnbk1lc3NhZ2VFcnJvckNvZGVzLFxuICBTaWduTWVzc2FnZUVycm9yTWVzc2FnZSxcbiAgU2lnblR5cGVkRGF0YUVycm9yQ29kZXMsXG4gIFNpZ25UeXBlZERhdGFFcnJvck1lc3NhZ2UsXG4gIFRva2VuRGVjaW1hbHMsXG4gIFRva2VucyxcbiAgQXBwRXJyb3JDb2RlcyBhcyBWZXJpZmljYXRpb25FcnJvckNvZGVzLFxuICBWZXJpZmljYXRpb25FcnJvck1lc3NhZ2UsXG4gIFZlcmlmaWNhdGlvbkxldmVsLFxuICBXYWxsZXRBdXRoRXJyb3JDb2RlcyxcbiAgV2FsbGV0QXV0aEVycm9yTWVzc2FnZSxcbiAgZ2V0SXNVc2VyVmVyaWZpZWQsXG4gIG1hcFdvcmxkQXBwTGF1bmNoTG9jYXRpb24sXG4gIHBhcnNlU2l3ZU1lc3NhZ2UsXG4gIHRva2VuVG9EZWNpbWFscyxcbiAgdmVyaWZ5Q2xvdWRQcm9vZixcbiAgdmVyaWZ5U2l3ZU1lc3NhZ2Vcbn07XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@worldcoin+minikit-js@1.9.9_@types+react@19.2.9_react@19.2.3_typescript@5.9.3_viem@2.23.5_typescript@5.9.3_/node_modules/@worldcoin/minikit-js/build/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/@worldcoin+minikit-js@1.9.9_@types+react@19.2.9_react@19.2.3_typescript@5.9.3_viem@2.23.5_typescript@5.9.3_/node_modules/@worldcoin/minikit-js/build/minikit-provider.js":
/*!*****************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@worldcoin+minikit-js@1.9.9_@types+react@19.2.9_react@19.2.3_typescript@5.9.3_viem@2.23.5_typescript@5.9.3_/node_modules/@worldcoin/minikit-js/build/minikit-provider.js ***!
  \*****************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   MiniKitProvider: () => (/* binding */ MiniKitProvider),\n/* harmony export */   useMiniKit: () => (/* binding */ useMiniKit)\n/* harmony export */ });\n/* harmony import */ var _chunk_VWX7SELF_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./chunk-VWX7SELF.js */ \"(ssr)/./node_modules/.pnpm/@worldcoin+minikit-js@1.9.9_@types+react@19.2.9_react@19.2.3_typescript@5.9.3_viem@2.23.5_typescript@5.9.3_/node_modules/@worldcoin/minikit-js/build/chunk-VWX7SELF.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/.pnpm/next@15.5.9_react-dom@19.2.3_react@19.2.3__react@19.2.3/node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react/jsx-runtime */ \"(ssr)/./node_modules/.pnpm/next@15.5.9_react-dom@19.2.3_react@19.2.3__react@19.2.3/node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react-jsx-runtime.js\");\n/* __next_internal_client_entry_do_not_use__ MiniKitProvider,useMiniKit auto */ \n// minikit-provider.tsx\n\n\nvar MiniKitContext = /*#__PURE__*/ (0,react__WEBPACK_IMPORTED_MODULE_1__.createContext)(void 0);\nvar MiniKitProvider = ({ children, props })=>{\n    const [isInstalled, setIsInstalled] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(void 0);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"MiniKitProvider.useEffect\": ()=>{\n            const { success } = _chunk_VWX7SELF_js__WEBPACK_IMPORTED_MODULE_0__.MiniKit.install(props?.appId);\n            if (!success) return setIsInstalled(false);\n            console.warn(\"MiniKit permissions not fetched in provider. MiniKit.user.permissions will be inaccurate.\");\n            setIsInstalled(success);\n        }\n    }[\"MiniKitProvider.useEffect\"], [\n        props?.appId\n    ]);\n    return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(MiniKitContext.Provider, {\n        value: {\n            isInstalled\n        },\n        children\n    });\n};\nvar useMiniKit = ()=>{\n    const context = (0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(MiniKitContext);\n    if (context === void 0) {\n        throw new Error(\"useMiniKit must be used within a MiniKitProvider\");\n    }\n    return context;\n};\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQHdvcmxkY29pbittaW5pa2l0LWpzQDEuOS45X0B0eXBlcytyZWFjdEAxOS4yLjlfcmVhY3RAMTkuMi4zX3R5cGVzY3JpcHRANS45LjNfdmllbUAyLjIzLjVfdHlwZXNjcmlwdEA1LjkuM18vbm9kZV9tb2R1bGVzL0B3b3JsZGNvaW4vbWluaWtpdC1qcy9idWlsZC9taW5pa2l0LXByb3ZpZGVyLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O2dGQUc2QjtBQUU3Qix1QkFBdUI7QUFNUjtBQUN5QjtBQUN4QyxJQUFJTSwrQkFBaUJMLG9EQUFhQSxDQUNoQyxLQUFLO0FBRVAsSUFBSU0sa0JBQWtCLENBQUMsRUFDckJDLFFBQVEsRUFDUkMsS0FBSyxFQUNOO0lBQ0MsTUFBTSxDQUFDQyxhQUFhQyxlQUFlLEdBQUdQLCtDQUFRQSxDQUM1QyxLQUFLO0lBRVBELGdEQUFTQTtxQ0FBQztZQUNSLE1BQU0sRUFBRVMsT0FBTyxFQUFFLEdBQUdaLHVEQUFPQSxDQUFDYSxPQUFPLENBQUNKLE9BQU9LO1lBQzNDLElBQUksQ0FBQ0YsU0FBUyxPQUFPRCxlQUFlO1lBQ3BDSSxRQUFRQyxJQUFJLENBQ1Y7WUFFRkwsZUFBZUM7UUFDakI7b0NBQUc7UUFBQ0gsT0FBT0s7S0FBTTtJQUNqQixPQUFPLGFBQWEsR0FBR1Qsc0RBQUdBLENBQUNDLGVBQWVXLFFBQVEsRUFBRTtRQUFFQyxPQUFPO1lBQUVSO1FBQVk7UUFBR0Y7SUFBUztBQUN6RjtBQUNBLElBQUlXLGFBQWE7SUFDZixNQUFNQyxVQUFVbEIsaURBQVVBLENBQUNJO0lBQzNCLElBQUljLFlBQVksS0FBSyxHQUFHO1FBQ3RCLE1BQU0sSUFBSUMsTUFBTTtJQUNsQjtJQUNBLE9BQU9EO0FBQ1Q7QUFJRSIsInNvdXJjZXMiOlsiL1VzZXJzL2pvbmd3b29ra2ltL0Rlc2t0b3Avd29ybGQtY29tbXVuaXR5L2Zyb250ZW5kL25vZGVfbW9kdWxlcy8ucG5wbS9Ad29ybGRjb2luK21pbmlraXQtanNAMS45LjlfQHR5cGVzK3JlYWN0QDE5LjIuOV9yZWFjdEAxOS4yLjNfdHlwZXNjcmlwdEA1LjkuM192aWVtQDIuMjMuNV90eXBlc2NyaXB0QDUuOS4zXy9ub2RlX21vZHVsZXMvQHdvcmxkY29pbi9taW5pa2l0LWpzL2J1aWxkL21pbmlraXQtcHJvdmlkZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2UgY2xpZW50XCI7XG5pbXBvcnQge1xuICBNaW5pS2l0XG59IGZyb20gXCIuL2NodW5rLVZXWDdTRUxGLmpzXCI7XG5cbi8vIG1pbmlraXQtcHJvdmlkZXIudHN4XG5pbXBvcnQge1xuICBjcmVhdGVDb250ZXh0LFxuICB1c2VDb250ZXh0LFxuICB1c2VFZmZlY3QsXG4gIHVzZVN0YXRlXG59IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsganN4IH0gZnJvbSBcInJlYWN0L2pzeC1ydW50aW1lXCI7XG52YXIgTWluaUtpdENvbnRleHQgPSBjcmVhdGVDb250ZXh0KFxuICB2b2lkIDBcbik7XG52YXIgTWluaUtpdFByb3ZpZGVyID0gKHtcbiAgY2hpbGRyZW4sXG4gIHByb3BzXG59KSA9PiB7XG4gIGNvbnN0IFtpc0luc3RhbGxlZCwgc2V0SXNJbnN0YWxsZWRdID0gdXNlU3RhdGUoXG4gICAgdm9pZCAwXG4gICk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgeyBzdWNjZXNzIH0gPSBNaW5pS2l0Lmluc3RhbGwocHJvcHM/LmFwcElkKTtcbiAgICBpZiAoIXN1Y2Nlc3MpIHJldHVybiBzZXRJc0luc3RhbGxlZChmYWxzZSk7XG4gICAgY29uc29sZS53YXJuKFxuICAgICAgXCJNaW5pS2l0IHBlcm1pc3Npb25zIG5vdCBmZXRjaGVkIGluIHByb3ZpZGVyLiBNaW5pS2l0LnVzZXIucGVybWlzc2lvbnMgd2lsbCBiZSBpbmFjY3VyYXRlLlwiXG4gICAgKTtcbiAgICBzZXRJc0luc3RhbGxlZChzdWNjZXNzKTtcbiAgfSwgW3Byb3BzPy5hcHBJZF0pO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeChNaW5pS2l0Q29udGV4dC5Qcm92aWRlciwgeyB2YWx1ZTogeyBpc0luc3RhbGxlZCB9LCBjaGlsZHJlbiB9KTtcbn07XG52YXIgdXNlTWluaUtpdCA9ICgpID0+IHtcbiAgY29uc3QgY29udGV4dCA9IHVzZUNvbnRleHQoTWluaUtpdENvbnRleHQpO1xuICBpZiAoY29udGV4dCA9PT0gdm9pZCAwKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwidXNlTWluaUtpdCBtdXN0IGJlIHVzZWQgd2l0aGluIGEgTWluaUtpdFByb3ZpZGVyXCIpO1xuICB9XG4gIHJldHVybiBjb250ZXh0O1xufTtcbmV4cG9ydCB7XG4gIE1pbmlLaXRQcm92aWRlcixcbiAgdXNlTWluaUtpdFxufTtcbiJdLCJuYW1lcyI6WyJNaW5pS2l0IiwiY3JlYXRlQ29udGV4dCIsInVzZUNvbnRleHQiLCJ1c2VFZmZlY3QiLCJ1c2VTdGF0ZSIsImpzeCIsIk1pbmlLaXRDb250ZXh0IiwiTWluaUtpdFByb3ZpZGVyIiwiY2hpbGRyZW4iLCJwcm9wcyIsImlzSW5zdGFsbGVkIiwic2V0SXNJbnN0YWxsZWQiLCJzdWNjZXNzIiwiaW5zdGFsbCIsImFwcElkIiwiY29uc29sZSIsIndhcm4iLCJQcm92aWRlciIsInZhbHVlIiwidXNlTWluaUtpdCIsImNvbnRleHQiLCJFcnJvciJdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@worldcoin+minikit-js@1.9.9_@types+react@19.2.9_react@19.2.3_typescript@5.9.3_viem@2.23.5_typescript@5.9.3_/node_modules/@worldcoin/minikit-js/build/minikit-provider.js\n");

/***/ })

};
;